<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>firstOne</title>
    <url>/2022/01/09/1/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>前端</category>
      </categories>
  </entry>
  <entry>
    <title>linux常用命令</title>
    <url>/2022/01/12/Linux%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h4 id="1-系统状况"><a href="#1-系统状况" class="headerlink" title="1.系统状况"></a>1.系统状况</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">top # 查看所有进程的信息，M按内存排序，p按cpu排序</span><br><span class="line">df -h # 查看硬盘使用情况</span><br><span class="line">free -h # 查看内存使用情况</span><br><span class="line">du -sh # 查看当前目录占用的硬盘空间</span><br><span class="line">ps aux # 查看所有进程</span><br><span class="line">kill -9 pid # 杀死编号pid的进程</span><br><span class="line">netstat -nt #查看所有网络连接</span><br><span class="line">w #列出当前登录的用户</span><br><span class="line">ping www.baidu.com # 检查是否联网</span><br></pre></td></tr></table></figure>

<h4 id="2-文件权限"><a href="#2-文件权限" class="headerlink" title="2.文件权限"></a>2.文件权限</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">chmod +x xxx <span class="comment">#添加可执行权限</span></span><br><span class="line">chmod +x xxx -R <span class="comment">#递归地修改整个文件</span></span><br></pre></td></tr></table></figure>

<h4 id="3-文件"><a href="#3-文件" class="headerlink" title="3.文件"></a>3.文件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">find path -name <span class="string">&#x27;*.py&#x27;</span> <span class="comment">#搜索某个路径下的.py文件</span></span><br><span class="line">grep xxx <span class="comment"># stdin读入若干行数据</span></span><br><span class="line">wc <span class="comment"># 统计行数等 -l 行数 -w 单词数 -c 字节数</span></span><br><span class="line">tree <span class="comment">#展示文件结构，-a展示隐藏文件</span></span><br><span class="line">ag xxx <span class="comment">#搜索当前目录下的所有文件，检索xxx字符</span></span><br><span class="line">cut -d <span class="string">&#x27;分割符&#x27;</span> -f 3,5 <span class="comment">#分割符分开的第3，第5列</span></span><br><span class="line">sort <span class="comment">#按字典序排序</span></span><br><span class="line">xargs <span class="comment">#将stdin数据分割成命令</span></span><br><span class="line">head -3 xxx <span class="comment">#展示前三行内容，tail是尾部</span></span><br></pre></td></tr></table></figure>

<h4 id="4-工具"><a href="#4-工具" class="headerlink" title="4.工具"></a>4.工具</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">time <span class="built_in">command</span> <span class="comment">#统计command的执行时间</span></span><br><span class="line">ipython3 <span class="comment">#小型jupyter</span></span><br><span class="line">tar -zcvf xxx.tar.gz path <span class="comment">#压缩至</span></span><br><span class="line">tar -zxvf xxx.tar.gz <span class="comment">#解压</span></span><br><span class="line">diff xxx yyy <span class="comment">#查找两个文件的不同点</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux命令</tag>
      </tags>
  </entry>
  <entry>
    <title>AI第一天</title>
    <url>/2022/02/21/AI_Day1/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>AI</category>
      </categories>
      <tags>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title>django后端AI训练</title>
    <url>/2022/01/12/django/</url>
    <content><![CDATA[<h4 id="1-初始配置"><a href="#1-初始配置" class="headerlink" title="1.初始配置"></a>1.初始配置</h4><p>如果想完美贴合本次教程的环境，可以联系作者发送docker文件以确保环境相同。</p>
<p>在此之前若未安装docker可以先安装，安装教程<a href="https://luohk19.github.io/2022/01/12/%E7%A7%9F%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%8E%AF%E5%A2%83/">如此</a>，docker的使用教程[如此](<a href="https://luohk19.github.io/2022/01/12/docker/">docker使用 | luohk19</a>)。</p>
<p>安装镜像后，创建容器，开启项目，配置git</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">django-admin --version #检查是否安装</span><br><span class="line"></span><br><span class="line">django-admin startproject mysite #创建项目 xxx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看目录</span></span><br><span class="line">mysite/ #项目容器，可以随时改名</span><br><span class="line">	manage.py/ # 管理项目的命令行工具</span><br><span class="line">	mysite/ </span><br><span class="line">		__init__.py # 告诉python这个目录要被认为是一个包</span><br><span class="line">		settings.py # 配置文件</span><br><span class="line">		urls.py	# 路由文件</span><br><span class="line">		asgi.py # asgi在web服务器上的入口</span><br><span class="line">		wsgi.py # wsgi在web服务器上的入口</span><br><span class="line"></span><br><span class="line">git init #创建git环境</span><br></pre></td></tr></table></figure>

<h4 id="2-开始"><a href="#2-开始" class="headerlink" title="2.开始"></a>2.开始</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#初始运行</span></span><br><span class="line">python3 manage.py runserver <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">8000</span></span><br><span class="line"><span class="comment">#当用本地的host访问时会报错，需要在/acapp/settings.py内添加对应的allowed_hosts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建app</span></span><br><span class="line">python3 manage.py startapp game</span><br><span class="line"></span><br><span class="line"><span class="comment">#及时更新</span></span><br><span class="line">python3 manage.py migrate</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建管理员用户</span></span><br><span class="line">python3 manage.py createsuperuser <span class="comment">#随后打开host:port/admin登录</span></span><br><span class="line"><span class="comment">#随后创建urls.py,templates文件夹</span></span><br></pre></td></tr></table></figure>

<h4 id="3-创建路由"><a href="#3-创建路由" class="headerlink" title="3.创建路由"></a>3.创建路由</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在game app内创建的urls.py 中仿照总acapp内的urls.py 写url</span></span><br><span class="line"><span class="comment"># 最后在总的urls内添加对应的path</span></span><br><span class="line">```game/urls.py</span><br><span class="line"><span class="keyword">import</span> game.views <span class="keyword">import</span> index</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;&#x27;</span>, index, name=<span class="string">&quot;index&quot;</span>)</span><br><span class="line">]</span><br><span class="line">```</span><br><span class="line">```game/views.py</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">request</span>):</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;hello World!&#x27;</span>)</span><br><span class="line">```</span><br><span class="line">```acapp/urls.py</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> include</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;game/&#x27;</span>, include(<span class="string">&#x27;game.urls&#x27;</span>)), <span class="comment">#当只有一个app时不需要写&#x27;game/&#x27;</span></span><br><span class="line">    ...</span><br><span class="line">]</span><br><span class="line">```</span><br></pre></td></tr></table></figure>

<h4 id="4-储存数据"><a href="#4-储存数据" class="headerlink" title="4.储存数据"></a>4.储存数据</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 需要在mysite的settings.py文件夹中加入，指示静态数据的位置</span></span><br><span class="line">STATIC_ROOT = os.path.join(BASE_DIR, <span class="string">&#x27;static&#x27;</span>) <span class="comment">#在lenet下创建static文件夹</span></span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, <span class="string">&#x27;media&#x27;</span>)</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>后端</category>
      </categories>
      <tags>
        <tag>django</tag>
        <tag>后端</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>docker使用</title>
    <url>/2022/01/12/docker/</url>
    <content><![CDATA[<h4 id="1-前期配置"><a href="#1-前期配置" class="headerlink" title="1.前期配置"></a>1.前期配置</h4><p>请看<a href="https://luohk19.github.io/2022/01/12/%E7%A7%9F%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%8E%AF%E5%A2%83/">服务器配置</a>，完成后便可开始</p>
<h4 id="2-Docker概念"><a href="#2-Docker概念" class="headerlink" title="2.Docker概念"></a>2.Docker概念</h4><h5 id="2-1-Docker的结构"><a href="#2-1-Docker的结构" class="headerlink" title="2.1 Docker的结构"></a>2.1 Docker的结构</h5><p>$docker\begin{cases}image \begin{cases}container \cr container \cr … \end{cases}   \cr image \cr …\end{cases}$</p>
<h5 id="2-2-Docker的小概念"><a href="#2-2-Docker的小概念" class="headerlink" title="2.2 Docker的小概念"></a>2.2 Docker的小概念</h5><p>采用相同的image（镜像）生成的container（容器）配置都相同。</p>
<p>每个container都是完全独立的云端服务器，docker管理image时会采取空间优化。</p>
<p>未来如果需要迁移container，可以先生成image（可下载到其他服务器加载）</p>
<h4 id="3-Docker-Images"><a href="#3-Docker-Images" class="headerlink" title="3.Docker Images"></a>3.Docker Images</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker pull ubuntu:20.04 <span class="comment">#可以拉取一个镜像 name:tag</span></span><br><span class="line"></span><br><span class="line">docker images <span class="comment">#查看目前存在的image</span></span><br><span class="line"></span><br><span class="line">docker rmi &lt;imageName&gt; <span class="comment">#便可删除对应镜像</span></span><br><span class="line"></span><br><span class="line">docker save -o ubuntu_20_04.tar ubuntu:20.04 <span class="comment">#保存镜像,可以用ls -l查看权限</span></span><br><span class="line"><span class="comment"># 查看权限后发现仅自己有可读写权限，因此需要添加权限</span></span><br><span class="line"></span><br><span class="line">docker load -i ubuntu_20_04.tar <span class="comment">#读取生成镜像</span></span><br><span class="line"><span class="comment">#可以将原镜像删去再检验</span></span><br></pre></td></tr></table></figure>

<p>自此通过scp命令可以实现不同服务器的镜像迁移</p>
<h4 id="4-Docker-Container"><a href="#4-Docker-Container" class="headerlink" title="4.Docker Container"></a>4.Docker Container</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker create -it ubuntu:20.04 <span class="comment">#利用image生成container</span></span><br><span class="line"></span><br><span class="line">docker ps -a <span class="comment">#查看创建了的容器，无a则展示正在运行的</span></span><br><span class="line"></span><br><span class="line">docker start CONTAINER_ID <span class="comment">#启动容器，docker ps检验</span></span><br><span class="line"></span><br><span class="line">docker stop CONTAINER_ID <span class="comment">#停止容器，docker ps检验</span></span><br><span class="line"></span><br><span class="line">docker restart CONTAINER_ID <span class="comment">#重启</span></span><br><span class="line"></span><br><span class="line">docker run -itd ubuntu:20.04 <span class="comment">#创建并启动container</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#CONTAINER_ID 与 CONTAINER_NAME 都可以，下面用CONTAINER代替</span></span><br><span class="line"></span><br><span class="line">docker attach CONTAINER <span class="comment">#进入容器，前提是已启动，默认root</span></span><br><span class="line"><span class="comment">#想退出？ ctrl+p 再 ctrl+q, ctrl+q是用于挂起，否则直接关闭</span></span><br><span class="line"></span><br><span class="line">docker <span class="built_in">exec</span> CONTAINER COMMAND <span class="comment">#在某容器内执行命令，!!!容器必须运行</span></span><br><span class="line"></span><br><span class="line">docker rm CONTAINER <span class="comment">#删除容器，注意rmi与rm的区别</span></span><br><span class="line"><span class="comment">#删除前要停止容器，全删除已停止的容器为docker container prune</span></span><br><span class="line"></span><br><span class="line">docker <span class="built_in">export</span> -o xxx.tar CONTAINER <span class="comment">#不保存历史记录等，占用内存比save更少</span></span><br><span class="line"><span class="comment">#注意添加可读权限</span></span><br><span class="line"></span><br><span class="line">docker import xxx.tar ubuntu:20.04 <span class="comment">#导入，实现容器到其他服务器镜像的迁移</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#剩下的都是一些小操作</span></span><br><span class="line">docker top CONTAINER <span class="comment">#查看容器的的所有进程</span></span><br><span class="line">docker stats <span class="comment">#查看所有容器的信息cpu等</span></span><br><span class="line">docker cp xxx CONTAINER:XXX <span class="comment">#本地与容器之间传递信息</span></span><br><span class="line">docker rename CONTAINER1 CONTAINER2 <span class="comment">#重命名</span></span><br><span class="line">docker update CONTAINER --XXX XXX <span class="comment">#更新各种参数</span></span><br></pre></td></tr></table></figure>

<h4 id="5-对于vscode"><a href="#5-对于vscode" class="headerlink" title="5.对于vscode"></a>5.对于vscode</h4><p>在docker挂起时，可能会发生vscode的快捷键冲突，因此需要找到左下角设置-&gt;快捷键</p>
<p>再查找ctrl+q的快捷方式，将视图的when条件加上 !terminalFocus 便可</p>
<p>解决方法来源于stackOverFlow</p>
]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>bash</title>
    <url>/2022/01/10/bash/</url>
    <content><![CDATA[<h4 id="1-Hello-World"><a href="#1-Hello-World" class="headerlink" title="1. Hello World"></a>1. Hello World</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span> <span class="comment">#双引号表示执行，单引号表示单纯输出</span></span><br><span class="line"></span><br><span class="line">chmod +x xxx.sh <span class="comment">#使xxx.sh脚本具有执行能力</span></span><br></pre></td></tr></table></figure>

<h4 id="2-注释"><a href="#2-注释" class="headerlink" title="2.注释"></a>2.注释</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">:&lt;&lt;!</span><br><span class="line">注释 <span class="comment"># !是任意字符串，#也可</span></span><br><span class="line">!</span><br></pre></td></tr></table></figure>

<h4 id="3-变量"><a href="#3-变量" class="headerlink" title="3.变量"></a>3.变量</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">name=<span class="string">&#x27;luohk&#x27;</span></span><br><span class="line">name=<span class="string">&quot;luohk&quot;</span></span><br><span class="line">name=luohk <span class="comment">#三种都是一样的</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$name</span> <span class="comment"># luohk</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;name&#125;</span>19 <span class="comment"># luohk19</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">readonly</span> name <span class="comment">#只读变量</span></span><br><span class="line"><span class="built_in">declare</span> -r name <span class="comment">#另一种写法</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">unset</span> name <span class="comment">#删除变量</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> name <span class="comment">#自定义转环境</span></span><br><span class="line"><span class="built_in">export</span> name=luohk <span class="comment">#环境转自定义</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#name&#125;</span> <span class="comment"># 5</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#name:0:3&#125;</span> <span class="comment">#luo</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#默认变量 $0, $1, $2</span></span><br><span class="line"><span class="comment"># $# 传入参数个数; $* 用空格隔开; $@ 参数用双引号括起来</span></span><br></pre></td></tr></table></figure>

<h4 id="4-数组"><a href="#4-数组" class="headerlink" title="4.数组"></a>4.数组</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">array=(1 xyz luohk) <span class="comment">#用空格隔开</span></span><br><span class="line">array[1] = xyz <span class="comment">#按index取</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;array[index]&#125;</span> <span class="comment">#按index取值</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$&#123;array[*]&#125;</span> || <span class="variable">$&#123;array[@]&#125;</span> <span class="comment">#取整个数组,获取数组长度在前加#</span></span><br></pre></td></tr></table></figure>

<h4 id="5-expr"><a href="#5-expr" class="headerlink" title="5.expr"></a>5.expr</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">str = <span class="string">&quot;hello world!&quot;</span></span><br><span class="line"><span class="built_in">echo</span> `expr length <span class="string">&quot;<span class="variable">$str</span>&quot;</span>` <span class="comment">#注意不是单引号，输出12</span></span><br><span class="line"><span class="built_in">echo</span> `expr index <span class="string">&quot;<span class="variable">$str</span>&quot;</span> aWd` <span class="comment">#输出任意一个字符在最前面的位置</span></span><br><span class="line"><span class="built_in">echo</span> `expr substr <span class="string">&quot;<span class="variable">$str</span>&quot;</span> 2 3` <span class="comment">#index从1开始,ell</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> `expr <span class="variable">$a</span> \* <span class="variable">$b</span>` <span class="comment">#支持乘法操作，但乘法需要转义</span></span><br><span class="line"><span class="built_in">echo</span> `expr \( <span class="variable">$a</span> + 1 \) \* \( <span class="variable">$b</span> + 1 \)` <span class="comment">#括号也需要转义</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> `expr <span class="variable">$a</span> <span class="string">&#x27;&lt;&#x27;</span> <span class="variable">$b</span>` | <span class="built_in">echo</span> `expr <span class="variable">$a</span> \&lt; <span class="variable">$b</span>` <span class="comment">#一样，小于等于等需要连续转义</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &amp;运算当两个非零时，返回第一个参数，否则返回0；若第一个为0或空，不计算第二个</span></span><br><span class="line"><span class="comment"># |运算，优先返回非空非0的值；若第一个参数非空或非0时，不会计算第二个参数</span></span><br></pre></td></tr></table></figure>

<h4 id="6-读取，-echo，printf-类似c-c-的"><a href="#6-读取，-echo，printf-类似c-c-的" class="headerlink" title="6.读取， echo，printf(类似c/c++的)"></a>6.读取， echo，printf(类似c/c++的)</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">read</span> name <span class="comment">#读取输入至name</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;please input your name&quot;</span> -t 30 name <span class="comment">#等三十秒提示输入到名字</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;Hi\n&quot;</span> <span class="comment"># -e开启转义, Hi回车</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Hello World&quot;</span> &gt; output.txt <span class="comment">#输出到特定文件</span></span><br><span class="line"><span class="built_in">echo</span> `date` <span class="comment">#输出时间</span></span><br></pre></td></tr></table></figure>

<h4 id="7-test"><a href="#7-test" class="headerlink" title="7.test"></a>7.test</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">man <span class="built_in">test</span> <span class="comment">#可以查看test的用法</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span> 2 -lt 3 <span class="comment"># 0表示真</span></span><br><span class="line"><span class="built_in">echo</span> $? <span class="comment">#输出上一个命令的返回值</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span> -e filename <span class="comment">#判断是否存在， -f是否为文件，-d是否为目录</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#类似地， -r是否可读， -w可写， -x可执行， -s是否为空</span></span><br><span class="line"><span class="comment"># -eq -ne -gt -lt -ge -le latex懂得都懂</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#字符串也可比较</span></span><br><span class="line"><span class="built_in">test</span> str1 == str2</span><br><span class="line"><span class="built_in">test</span> str1 != str2</span><br><span class="line"></span><br><span class="line"><span class="built_in">test</span> -r filename -a -x filename <span class="comment"># -a是否同时成立， -o至少一个成立，！取反</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [] 与 test 类似</span></span><br></pre></td></tr></table></figure>

<h4 id="8-判断"><a href="#8-判断" class="headerlink" title="8.判断"></a>8.判断</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> condition  <span class="comment">#condition用上面的[]实现</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="comment">#blabla</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if-else</span></span><br><span class="line"><span class="keyword">if</span> condition</span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line">	<span class="comment">#blabla</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="comment">#blabla</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if-elif-else</span></span><br><span class="line"><span class="keyword">if</span> condition</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="comment">#blabla</span></span><br><span class="line"><span class="keyword">elif</span> condition</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="comment">#blabla</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	<span class="comment">#blabla</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#case</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$name</span> <span class="keyword">in</span></span><br><span class="line">	value1)</span><br><span class="line">		<span class="comment">#bla</span></span><br><span class="line">		;;</span><br><span class="line">	value2)</span><br><span class="line">		<span class="comment">#bla</span></span><br><span class="line">		;;</span><br><span class="line">	*)</span><br><span class="line">		<span class="comment">#bla</span></span><br><span class="line">		;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<h4 id="9-循环语句"><a href="#9-循环语句" class="headerlink" title="9.循环语句"></a>9.循环语句</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#形式1</span></span><br><span class="line"><span class="keyword">for</span> var <span class="keyword">in</span> var1 var2 var3</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="comment">#blabla</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#例子</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(seq 1 10) <span class="comment"># &#123;a..z&#125;输出a到z</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$i</span> <span class="comment">#输出1到10</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#形式2</span></span><br><span class="line"><span class="keyword">for</span> ((expr;cond;expr))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="comment">#bla</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#例子</span></span><br><span class="line"><span class="keyword">for</span> ((i=1; i&lt;=10; i++))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#形式3</span></span><br><span class="line"><span class="keyword">while</span> condition</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="comment">#bla</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#例子</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> name</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="variable">$name</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#形式4，while改until根据意思就知道</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#break命令无法跳出case，;;才行</span></span><br><span class="line"><span class="comment">#break命令可以跳出一层循环</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#continue类似</span></span><br></pre></td></tr></table></figure>

<h4 id="10-函数"><a href="#10-函数" class="headerlink" title="10.函数"></a>10.函数</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[<span class="keyword">function</span>] <span class="function"><span class="title">func_name</span></span>() &#123;</span><br><span class="line">	<span class="comment">#bla</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># $(func_name) 获取中间stdout的值</span></span><br><span class="line"><span class="comment"># $?获取上一次调用的返回</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">func</span></span>() &#123;</span><br><span class="line">	name=luohk</span><br><span class="line">	<span class="built_in">echo</span> <span class="string">&quot;hello <span class="variable">$name</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">output=$(func)</span><br><span class="line">ret=$?</span><br><span class="line"></span><br><span class="line"><span class="comment">#函数内采用 $1, $2来取输入参数，但$0仍是文件名</span></span><br><span class="line"><span class="built_in">echo</span> $(func 10)</span><br><span class="line"></span><br><span class="line"><span class="comment">#局部变量</span></span><br><span class="line"><span class="built_in">local</span> name=luohk</span><br></pre></td></tr></table></figure>

<h4 id="11-exit、文件重定向、引入外部脚本"><a href="#11-exit、文件重定向、引入外部脚本" class="headerlink" title="11.exit、文件重定向、引入外部脚本"></a>11.exit、文件重定向、引入外部脚本</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">exit</span> 0 <span class="comment">#表示成功 且 能被$?接收</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">command</span> &gt; file <span class="comment">#将stdout重定向到file中</span></span><br><span class="line"><span class="built_in">command</span> &gt;&gt; file <span class="comment">#追加方式</span></span><br><span class="line"><span class="comment">#反之是读入</span></span><br><span class="line"></span><br><span class="line">```test.sh</span><br><span class="line"><span class="comment">#! /bin/bash</span></span><br><span class="line"><span class="built_in">read</span> a</span><br><span class="line"><span class="built_in">read</span> b</span><br><span class="line"><span class="built_in">echo</span> $(expr <span class="string">&quot;<span class="variable">$a</span>&quot;</span> + <span class="string">&quot;<span class="variable">$b</span>&quot;</span>)</span><br><span class="line">```</span><br><span class="line">```input.txt</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">```</span><br><span class="line">chmod +x test.sh</span><br><span class="line">./test.sh &lt; input.txt &gt; output.txt</span><br><span class="line">cat output.txt <span class="comment"># 7</span></span><br><span class="line"><span class="comment">#用这个也可以实现对拍噢</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> test1.sh</span><br><span class="line"><span class="comment">#可以使用test1.sh内的变量</span></span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>bash</tag>
      </tags>
  </entry>
  <entry>
    <title>os xv6源码解读(操作系统接口)</title>
    <url>/2022/02/22/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os_day1/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">
  <script id="hbeData" type="hbeData" data-hmacdigest="21426ad87cb8dd9a870a202dd6fb89a1251330a87ac6337bf97cd158155da9fe">10d79030e8222445804370796b90fca1b3149e2c2a0f36d6b4ea04e548758c2138c82a57bbcc35721ee7b1ccd17333ca678da103cfb7d50eb4bd8d1c4d1e4ad4270ee2e14fb3d880fa811f891a8a19f49f2277de30012c62fb0be2f46ce99d5268fecc32a3866cb8986d41b777f30a370755a575361176168adbf8dd8b5af1c2e09e4acbc5314c7b9c8a4441d0f6aa1842b44bd0c80c6e677c92dc5b07f733ab74866c887ea33d5ae3a78de58e80ce88158d085d2bbf96d7d9dbf6ddb5d836e3e5ccbeca5d6f2c621398c12f89c9e6b48c191e8c5e42a7d9342615cfb7faf899c4102cc9620d5a49acf2d532ea95f113351b7f2bd54a8392a6f2cb66ebb10898a15cb43fc3e0ccac2fb5c8d95ce0b9cf72258b5fbf34a0a3bb203f3e9d12eb488a9f1bfb91b8edc262e09bb671ae760286d84e9ecef3d986662223ca1798be0092d79240786268dbe317d34cd15ceaa5f558b8468c40d4a7c4b78de117ffd211d5de213565be5b1bb55eef6a9d9e2ec8486b90766cb3955b7ff07775571b3d86a330bd25034c8f856f9f6d8d6a8455ac5b6734aa8503b9f95cd1064e9e48bcd085feedc47e3a83a84681605cf7c398dee486e5189fd13c4f6d08811a5448fd72e20096430a4ac8455435b2c5356549dee9dd4e6d0912d456ed2021517ecab82917e693e9fccc631639c02380bf0be4eeb308c16c23e1f808ac51d582801367a37fb59d9632b64981d7c318ae1a8d0f8331dd77f92c7210d3155ecdbd146fdd22e0a1358fdcb7388f0a30cfed1b7cf0a3c2c9ccfb9bc488baa26d7925aa76a79d32499c1dddbd8d424ba2d81a48c4e29e7d94853637d5b1baa6d4e05ea652ac2561792cd38bce7404757f991c60dbaa3eb4d982e8afc05f3406bbbcf4f6dd7dff1587ec6ceacd7011c7b778f632136f22e7e37ff5376b15214f99a87fd0f26afb6d3fda2b5b0622a4c491d3af89fe88f6b5d510ab6dc0c0dea977100febff02543c23e983e169533cc8e30eedc7b4f9df9bb9cadf3e3380cf26f4a74ffa6435a228dd09c9686cc99057bb6e1f7fc2d0a05b47d8cab8178cb56c5f12266d948337faea93694b53d2e5743abc72eaf021a7f90816e212bac0bd31eaa07c766ee8402d5057b13313c1c435bfcd888ed3708a997704d18fae45e82fabb8a4b68092da0e5074c9324d8a0b9a6123b4b3b14baf5dc95ba7c66aa1f13e54bd01ac9193d33ef2e3cad2e5b572ac23a0b44bf28e41edbf4d6eecf516f5f299fb8194408338e7ea95ed7505e915687bc26e1112ade9e18fd39e50a6138f68a7a1dc4407588a755599324823ce7f809b8c362d7413fdfa2c784b904bc37b0a1e3704c94355bd718c98b39f4d11ab7a899681de75bf2f916b665afca0de770a8553824c226cba00addfefe4fc10fbf3202f0f7d648281b1876ca9cb94c0d274ea0a36aad9df4cb970812016d470db549d62c6333447da71cad2e0cbd1a9ac84f9e714de928e7bd31d6bde25e3a4cee2fa42d5351cebd53470b2ebdccc2aaeed8f62a6d910c046741f6f13c43d42c84a4e68cd0f48e51fc4dac0db20e5bbfe065392b11273889ce8cb742599dd1a43cc60a7e63d3014995412df703688ec4d31986caea8d3df152d273c24c3ae58fa109c101d7529b2730d7f1e1a2fe3948965c05057fa04638adbe6bd532914a2e1ff99ced28d8134e5232e60d516bf653efce89f778e798380129f102d8fc46d2f610c0e15645e6ea62f446ac2ebb94b2676e19eff6d1c33f175651a8cfacf0e3e1d96ddc498aff89bcae81d86dc378ce09e1860a7682c863618a2e377f5cbc1ed7d0915f282b33416f3bb032413ee3850822cf4146fa068ac99c90760295df851ad6faa9f900f8076d0e68d4dcf7c377a07b55c273b3df8b25fdf7e3c3d0976fa1e4f4fb6fc765f7ee1f395d196685dba9a0f6993ac2061ce23547bd92ef210072a1f2747fec5bf80446b8f443a9c82907a8c6c0c215dcb0c972cdafff63ef780e4568118ee7b8cf2925e3421d05af412de37766704a2332595d85fa1788a1ccf1322545f8f9f890c7a19979461d4682609101ec3237da5e5c7193ff72375d8b5680eb90f94e5fb8959686cc9b343a16e1a7b4ceeeb072e7800887fb9bcae49df3cff9bc38dc8e561252c5d62fdb465d5ace393c82b3f0e65584b00f13621eaba7bd60ffbf257c6e49fa700ab7fa7325bdd360bbe8a347b4839900907369955d31665c70d37a115e64fdaf0d67c9df9306bdb645ccae86ce64a7871a6ed77093abf760432a2301e22557dd35b7a8d0d2e2d374c3425eb339dd3f9dea62b42eb9d1e127b3fc9e2606959d2f9fca57d25341ccea65a322cc68060131f797c863be6f901c86676e2026bbbf5ca9c6cb745c5066281b46852de9a598de787928513d52690472ae842574acc89922573a6a29446cb8444b900b59bbdbc5f8cddc598a1924647879a3cb4e2b9c70468d0ebddad02422c3dbc705804dbcfd4317e7ea911da485e9c16ab705ea853b55f20ded456fcadd140eee2c6df9dd4756cb08cb4a5a68c3c0934c62b8f371c50c7c569ab307384b713c63206d9ce364b1bb6803f4c75e3e1b7fe1eb10c96b8a08c0a803de6cadbb7e9a3be4e3699a8a7a67774efbe51ce39fce624c265b2c132d6ecc509e2134344b8e4468ee3c0427403e135d4d39340ea53835e9b2722178650bf1d0fcadd40ef36755863af43a0a0bed2ff46c601ccd12172186fd853d8ad667b5b92e54226051b2b80cb4f6dc6d26a5304504346d25453282789ede58fed2b298c30cb08faa3266ff65c43cdccb2962ffb6511aa210c58f7f782d19fae3a270171620ae7dac609217b6464b00d8d945505966d8403d2890efc3ffd84a4b42a21c71b40cc92148819762baeb938166dfbb66e4d2f22f3a4ff6b6ecd96f2abdc60db9a1676e5b9abaf1ae5f33f30c246cb3e0759cd9b723b426067e0b4cf5b3cfe369b53b9ce9d77ee4a75da9a09b3712fe584a247d373488a52c4bed71a349cdbddb27eff774900ba2100c1432298b96b1b5c61d78a3952529b55761f1aea955dbb68a7797f368cc993a743f0087dcd968ee35f561f2de9204bb22f63f18a93da017659f3356d9731f009e6463a29985760443a863f4c59402e6b58cda9731237238f9306a9a4fb382d16b57458c02854562a116c616fd87c5e112b4f8e68e5efacc2ebddc03ed2c668a3fdb4368cf080d4ae372673e55ba857aacfc6f50ecf5e747305cdba6a607432ee70fab0f61bfcc70edbdd36119a2eba18555887bb701d4da0281d09431c37b50be60ea5940a31ea3ffe8c60e4e99028dbcf15bb12f40e4cc7e4bd64b605e92b8bd8b21d6778f5b9e5300f8161e693052ea20767d434ddb3423c42786242e3d305e91b5160e9fe052b43938b9c55114f39bbb282253f7f24bf71875c9dd7b794254832c94d71c080003e5d64a541ad52cbe7cb96081a4bfdf3e5bbae2bd557c2c58d886c54bae18aeb08defbb520865dc73c986ce27a7286a9c2b9a815a9ed03fb03b4ab6b8f7eb0417b27358a54ef1a8c57a3683ffce5e703f0b06dadd0dd72f51a47f45684168a0fbf0dc59f513525b8beb4a20fc6023d19c1b3b2c55f3c7b930ec7eefb8ad0ffd7fcd527dcb8bef02a3ffb7f248135ae120d408e7e5ab6f12676d4d6e177777eb0ed0c1ec6ef7b4c5a668a79e78440f4777c4181216ba16aa79e12ca8af9381656d48ae747cf653198227c46d0ce8e1fc5ea22bd3032409afd4edf9e819218840c12c367e97eeef98f078a4f4c11def8d654c44a0f6a0094a1fff2cbc3a325e67a7200554d9b773327b08839b2fdd03ee2dcf38d572896e059e0f72614c6b221429456aad7243cdf7ca3580076ec505a9d063cdbe241cb91bf6ba35d74fe9a64f7701f099f9295df6a790f85ff34cdfcca396352f692ec16e198245a8234a376c48518303fd79edcc3c2fa956505a6a060ebe35429fbc57be56528be3b28833840e3318cfc16dc81dd45530dcb0f99162f07bc9bad4cc9912dfa1e4531e974c130ea1548009671c597b07d12d257fd5ea13c3c76bf4779f8067158c7eea023e44967d5acd869f988a9631d7c77d2eae1b594e36377ea51e5ce1e190bb850dea4a74e4bb0d979e4df7a142e273f2bbd3fc21ba731f5f59896f086354a087ec67911c8185e98dbfa2f02af66a1f1237f59d3b5a5f14128fcc8104aeb7b94634345ab038edc1b6022141cc1dabf2ba9dc01e9544153ad53f33c24e7078b570200f2a5ab35ee711d9a8ac9976723e5e01661937e457c5b6ed70e5d458d4744b623e3c062ed8d4626c577518adc0a944331694629ca96db2962e96ca21b49e1fb73e7e2bcb2a7567df2d5012ba833dc56debcbc094e64f18c198e9178133eb0b412794828a1544f94f424dc3172f86096fb53ba13c453ee301bb93df2029aade59c93d22ce2bc5a94469309007b624cf901ba16f1f6803c1cda7e1eab2eeb04bb312c1a642da5f9c20f4a1b75fa365e8e5351a2d4984d21049c4c396d17d98ceda50470052804a14c0be5e239558a77be82c0226dffe2aa95cd5d995642dba41bfe68cfee9a665b92abf2d3de09426d942a4927a686c09536db1ba23ee0b0d9752cf63162a70811d0bda26e998e889b5cdccef87a4c923d9c22b418f5d9ea77e69e20d017336b922d8c8094d5abe32e1f3db6b3ea807a41e31900e26bddf187daf6e6960eb550abd464daa5ad8079471cec755489ed8f753969235998cb841c3d140c4f9d0b8e4f76411e6f0ea1ea74fcf87a8ad9ac4d86a27c661d522368a460211ef514a7eb30614b44eafb3e7563c5c731cf22b2175955e260049da0f650582c96f9328956ab55fa886b59eed37d1ba781858b8b189a642567ef08129593034e049f6e0cbf6b42629d4004b1bfdeae21b9faf9b6ba670291921413c1b1626face1952a17e4582544c27aa136ac07018b1240d75ec8a02be8ec4b45faa39f447c4763e8b9aefa9933062d1f3ebf976cef41d4eceb1521a2e53c6d295fb330737876b1c13cd9272e3f2ff68549b132258a5770db3a24ed61f51d9fbd86c1d904dd60370edcff708111dccb90d681f4ffdec29b7598de510cecfd2729b5534a8cbdf4dcb4dafb830ee5c9196a14caa0cece5aee4fc186553c0a7f98e7d78dfe8f603da039eb9ebb7b51b78645ed4f4e730853098854e7a3e3811042bedf81d4ad5a675c2ec4fd84b382803478cfb4ade4dbd27609d40b1fcea216df6cb03d3e1667144c31bdd6f321f7062988b7e5dd879396536112b6a3de9b635b160d945049ffc662ea273df981690fb919ddfe47a0a8ac4c9f733409928927527b0ea62ce3078c06d3381bddd0a27e0ac029bd6bd499ba5d47c7c621e05924036d88c42135224080a19d48b1cc63df4860610482484efd992413f9ead3024d275d3f4c7f53000b9f8b646ae93704dc8424c0c40690fad95a648f34a36b096edc4c75f3d89f75708c02efe710ff5425f738ebeb3820f588ed12f219b76d102d083802d95cffaccd2832cc925ebd68804fb5ae6dee3ff790694ed06161f037025b259674bafe61efc79b15217c2ac670ba141ddacb2c657e366aa59d4fab13ad71af5e6a33d7ed431158f31bdcf4827beb521383175c15801054d6d087c7d4c849db0d90e790cab622bbd43be8500f9b1314b2447f95215d2c974fff849096aa9dcc4fc6a0971abc9afda0cec6f2366aa255dbb1f8be9b7cf47172ad8d8bdaf3415f1b02a60739e4a21fd125a9f2da91b4352cab633be05c0a6a84a0c2a4bf2c8ac927a2ed27c2063a26837bc158d91ab90653093ce6de5363b1c08dbcd55862e7feb6025c55b7265271f3fd772fef790992250c8c399f5ce320d441f11c9be91da35e07282442acac30bee68f2e627cb5fcc1708e3aee5f276a4a2f6ea8394f00f68625683129dd0e5cea18569e314f4d1009e7a86938bb2456a4174aa0265d54da4e1b6c09092101264453df7d2fab921754fabcc9aaeb98147764ae5ec277a96468d59bac925a5f95a8974564cea688ed66e48d9df575417d8f5ed339b61af11dcd7e2713273d0ba20e8392a8377420e0f03def3b64b07315e0b5bd6700b46110790b3000979a3617a3d33d5ba5b48d3ea6307e27516eb8ac23d92860afefd9f88653678dc2009dc091270d1404bfee9b97923eca690a92598d66f7932007732f4016823b7aef72fe81ab9d9b39818510fc0ab1029fb98d3faa16c49f6bd03e3ba85e55d0cfda58f6878d1501b9d83600b53ddf9192fc43ebe746f916af241b2eaa558d5d1fe1fff50d1f02c70e08f03fecd0bb19a9738518712e5047d88517a7677b891646456fc1716ed580b62e70506e3d278375a5e04b5ef1cb1fa0aee6cab0bba975ea2efc7daad922008c0ffefd9bb7e4f01d3abf3ca19ce8314a254145cac29b46444cb4582191c4d72603ddbc081acf8a07bfbacc8afeadd46d3a4b2d45477ed0e32570f76af80dab123ada1a8a7f4f76f1ca987aa66fa4028fa014e443558c9616e347c77c8388fb9b29f68b7c1b596e382d1150e7dd8bf3f52958b2d9ae1e38f20c104f54b75e800f5f0f1f51836471ba7803e979388577c61e588eac6ce623f31a8ca3acd2a2c9ea87af0906d4f7b981fb9c50171a6793f6bacc4f66872f505827ed455024004931ff51f3fa581f584d1fa30334f2378fbc279359bc5bac030665b3fad0a7e84ebe273aff1867d0fff73bfa0fe97a342db307d17db4f0559a12603de8980b07d9efa0a8dc9483a35f493029b43960cad03569003bebb87e0d5844399424815cffa837448618e927c5273c5481f91e6b35079a96f383349b7b7d9819fe3165cc5957218ab3b833291e4170656d4d121fd766faedd6a033ea732dc0ccdcdec6881896e62c0da8c0f61ccfa9d6da24b918e38252c9a1e1bd83c835970ea67ea40936b5fcb08a46af4e2a23d76e52321cb9b35b01e1feb4988577ff64b6734bd69950093055b0c2d961677243b44cf0cbc1c27001badd499d215c3638182012f1e1f00b59543598ce9de7cae3cfd2b1fe6cea7d5d84d0bee816c8747ceaadba5ab4650da8040488d539ca15a192c29d85eec9bdd7e6a2d3edb0db6ce8726e90a2a0736f88ae688f1e88b14b41dee3bf33f2dc83d20543d8fc8c97974cf5cfd9b65419698823e88dcbd0fe2227eb7b06eff21fd23158704327c844c6eca8c894ddf45df3a3ea7211a789cdd59d80f8dcaaa57a546b46e482c72a7ed0150649b2c7380dd7ba4db1421fb14443d422daeecdad5cc781d1c647b6717ea03bd467a89799ea17e62cd759cb2108d3206f076502eb042dbc36e6c89f229d699e5a975e96f8a5bd2a8ce43a2cc27146e51321c73616b1aa2afe250cf889a27fa4a81a23dc272e27a0b76b2717a498eba55094c27e1217681927c56dba9a6b21851cf70a96974ef442b6320421fd0f3c456d2ea080f258b8798ce71855c6986fb0c6dbb8b7dad17f09705d7a2956319917b8ea594a7d542db65594ff07c2b8127d1189c9ba8e07f557710a0d0baa370b603055069f202db5c3d3c52476b504ed8bdedc273124d843dd7f041654bc707d6c33338476800b34e28b73ffc04eddbc026ac1be6d8177f6b7abb9e6ad60cd115c9a6ac64c2e93da8003c25b2c6ff5aac0ff20c138316ddb862086a78eca9e575c47f64cd4e88650f0bfc66a765c42757c89298249cf0c927b64403006c9bc1ad8dc2a5e0279b92a96cf717cdd0778152afdb5212a5ccf26bde8082ab5f05e0487f63d8c44116ca16efd8c376b1656d62dd5f8e219df71f1369afe4df969e9b2d1c4b21e9541db525b2bc6b08177f5ba6c9c0e2f1e384d04f7555b90f2dc75d54079006ea6b67b4edc28ddeda0d3f0283f2732328e9a03a2c146c28e085a667885a59ef9cdb6aeeedaa300897177376addae424ea9b51f81ddc49fe7f526984419ac404b4876907f1769d674f035a76a063831ef78d76bdd30aeffbdfcbf9158d6c921663bfc35caeb4bae906f81fcf4b6e6f0998650101e094f9531fa9877e7d20f3d223626a81fbe7cf829915896e885663c2ba3585b58a08d29b42e73bbf3d22919e155822a84876b432b3b9e95675755ab43d1dd4ac52c20ec455d9ea77cbbb79f13e8a4b10c56da823a60c59e5774076a6fa5d93c7661e7a3446189c6082db440b63d6320a6cb2fb3b5d95a8b8489f1f765656fa22eec28af7b2f43ad1e065f1b0e775c26edc1caa6526d576b1987882a1aec25f3088ffca4c9a16f6b468b58041a2f20c91cebb45a2969dbf218981f929276124ece5f3731c7ec931d2c1f8d895ec63defdd0de7c07a052a91be4a1b13364ebda5e94c8b49b872ad7bb27da7300e8e0048912dc4ad8b091593798bc6252302cb0a51e6b3a44ba79f13f55eea10cd3d42653a75e9c3c3963b00b5c1a73e0b71f675513def6595802eecb77888250b45abe3366022ca926e823318cb38dbd76fdaafc3ada863ae4bbbe8bf2e0a1c8dc717790aae313bf0eb1821defcbc1fd497f65b328666ef778ac8ed964d8145cf076ba80120fe447b404db27381d66bcadccfdd70f24d0f78b359c8510c7c9154bfa52a43b92f3668baf0be14eb125c8dba2ab9222719a698a739edf94641d72feb317b2a286021da34a9e87bcf852b115b8f7d0e92f33e6d1b44db22bcd2ed614c1d82552c33c4628a242eb4c6470f9b0394a29f6dc51e63c458dd27d457ae22723386b4990c9ca00c43416fa84073af37398ffe414592b31c8ba90ea4c62851ec5b6bfadb8d6099d96dd3aabf126c95412db3560d008ceaedd2e2e62506bba2b2c64aca1fd495c3118eee935bb5bf20bab3e52f56302fd4124b66a60cdbe380b920eb3f2370ff5b4bdeef62e00bf8805eef5ac058926e644c3006b4cff6e8525a9a32b401ec50bfb2e59f511b3deb9cc7907968fb69c57657ea1bbcad963be534e391bad8abeb12912446fe1bfa13c1add5bff5723e3e8da7c3792d3c1be0aa79cae582879d40a2aec9cc0c600001643e8995631c6609fd2c59f5c25e88b39e0d99524873efc7510aaf7ba1857a5010cf4627bc245cd6b644ed95e572f35414e8e9beb15bc789e739c8a3dd03ed63f16c23b08cd8108bdbce26d22bcc249f51f112e29acd304294e56dea12cdbfd10bab7b449476118e4d0dd051cf065f667a35be9f85907caff398f591ad15513585cf15e8d175946d69a4089bbb197245ce658788cc0e1550238f26e3ae46613feab9594afca72fed11abf986f4d84bff14bcc077c3191185a7d6c8919c873f08c2adaa42e021e25a60fa46b03116b8d7ce7eab35981c7772b81de8218f1d6ea4750e2889f4765b1735d1b802c9c700ff7063943010d9f648bd50a49dee8a9647ba4d867c40e3115602dccc111b99a4b6d6d9d1294c29ca521eaf0a062e623802b3cea2e3009e59f84dbab793ab054ad10fd192fc7840eacaa75edd355ee5f3ed724bac9d32c6e2a084a0317b31fb30d2e1eba2e28e542bfaaa0a633ad69b2a8a907bd3f7759bfc4f7ff13af0ef2eae442df77c7c8ccd5d967cbef8376403b4ac761a7c7c38b4b254c9fdffb9157d9cd8197bd3bab1b8206b4cb3531f8a8d1cb93769b34176c668d627290fc31fdb8611606cbe89be75659521a74df940584669b67f81df36b699305cbfe551d773de83446677b87cd131aca35991b23facb5336a67ca838bf70a2773765437e05c85bf43e037d35522504bc8114d5ada0174d6d51cbf8360330791fcea7f19ebd7688c783a704313ff5a7a41f92cdfa21b03ae1e405b2efc26005b2ad17c5b966a50acb86203eb3239b4bc0c89e97760308954e11ff0833ea8e1ffbef94df80e9535d7821893d60670fc2899253699a1ae1720b5ecd3054d5e2157cffe2f66327cbbf15c045a398cea96efdb2214900f8411654e4f67294b959c02bdfd1f643f729fe1f70486b056b94aecb9ea77309b3177f9061f8aedcfd2f7f4792cef486628bde1885a81ebc954e1af82b6ebb3d94e34ad82b0ba3e6d118f1b1244efac613d267852217ffa503e4518b3043a35861b21ab1d32202ff9711821d5b35fd9748b127791d8a79ad66520ec65a3f0c704d2350118b805eacd684c809b76935be04ebe20fbe750b61f62cf6e0b0662b1ff191e0478516bb99b822fb063f58cd376ed81dfbd5415bd6ba0d841e90cbe50bdd29fbae5fe65242084c8a93a178c1c00fd85a59865c8b0699be56683d0b3780afc1d0e74e4ef04c746589e150593ec264c9ac8a0e90117bb4daed26a6dac49664ef98116bea033efd3fb31120186cd645b4e088829e96093584e22c48db067967d086e7405ccd42d46b671d6fb7a6f3e1ac00f705fa72fc6b67420f7b6faf920884cbddabbe433ca4dfad6b855253e3f68c80367bce62fd3e9460e4234b3c399181c85186ba36c18a314dd24d2b0f07513ee98596c38eae3b7325cbee13d5cbeed6b8c88fdea11f514670241b1156c3c3839500046a02f9e682754db5665da6031c93db6e7049328f9ce36770edd35d00ae4755256e2eac69e0c72e5e34d82104a07d90dad0039e444cc32a8e067bfb9358d58092b20dd0d3bce4cbf8aa67d07e0458e1f269f9c7688556d2a34bcd2c98cb6ddfd58806daafc70b1258486d3515f5ac5cb518d7a2a75a6e67138da5a9e49672326d1a6768288f9b7087298fed4ee0a50f11690fb2bf1c6d7917e67d999bd779236e3af0ba88c4187d1cbf2d048452676e884a4b364dead8f0f257c173fea83b40e6f912edc005b138b40f9a4dc8e0ec59d7541c3bdc6ba189352573c804eab24545b62454efac4832aae041266735808965c97e107ebb0c5893bd6ea7971bb6ca20cd789c3bcb18ca72f0123a00e8784924720161dc8ca55feb555b5473504499259e1f4a4087ad40de1b30326e3f2fcf431a4825d68313fbd5f2375792f0b1574f048fb00d58437</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">当前文章暂不对外可见，请输入密码后查看！</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>os</tag>
        <tag>private</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2022/01/08/hello-world/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">
  <script id="hbeData" type="hbeData" data-hmacdigest="60d335b7180a6957abe64f977aafef3d3a993b5bff30507ffd9f3e75ef7790de">10d79030e8222445804370796b90fca1fcf46a07b5ecf341c635269a7fe842f80cf07e697ff3618a365f409d43ee2a0b71169e7502cdfd2ac90458dd940f8bc9dffd4520316db24d3e303037ca2d5032e72bf872f07e40dbb3cf3ace773ac1c9</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">当前文章暂不对外可见，请输入密码后查看！</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <tags>
        <tag>private</tag>
      </tags>
  </entry>
  <entry>
    <title>租服务器的环境配置</title>
    <url>/2022/01/12/%E7%A7%9F%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%8E%AF%E5%A2%83/</url>
    <content><![CDATA[<h4 id="1-购买指南及前期操作"><a href="#1-购买指南及前期操作" class="headerlink" title="1.购买指南及前期操作"></a>1.购买指南及前期操作</h4><ul>
<li><p>内存不需要买太大（1核2G），后期动态扩容</p>
</li>
<li><p>不用买最大带宽，按量付费更实惠</p>
</li>
<li><p>选择ubuntu20.04，支持后续docker</p>
</li>
<li><p>安全组控制能访问那些端口（起码要有22端口）ssh，在sshconfig修改允许登录</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/ssh</span><br><span class="line">sudo vim sshd_config</span><br></pre></td></tr></table></figure></li>
<li><p>创建非root用户，给予sudo权限</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">adduser luohk</span><br><span class="line">usermod -aG sudo luohk</span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 装tmux, 根据自己的需求更改tmux.conf</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-在docker上配置"><a href="#2-在docker上配置" class="headerlink" title="2.在docker上配置"></a>2.在docker上配置</h4><h5 id="2-1-安装docker"><a href="#2-1-安装docker" class="headerlink" title="2.1 安装docker"></a>2.1 安装docker</h5><p><a href="https://docs.docker.com/engine/install/ubuntu/">Install Docker Engine on Ubuntu | Docker Documentation</a></p>
<p>到install Docker Engine第一步结束就可</p>
<h5 id="2-2-加入docker用户组"><a href="#2-2-加入docker用户组" class="headerlink" title="2.2 加入docker用户组"></a>2.2 加入docker用户组</h5><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 不用每次都输入sudo</span></span><br><span class="line">sudo usermod -aG docker <span class="variable">$USER</span></span><br></pre></td></tr></table></figure>





]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>server</tag>
      </tags>
  </entry>
  <entry>
    <title>os xv6源码解读(操作系统架构)</title>
    <url>/2022/03/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os_day2/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">
  <script id="hbeData" type="hbeData" data-hmacdigest="99d27d7f1b7b5810d9ef0639ae5ea17c8af90c14e37bf66bb671c407656d3ce4">10d79030e8222445804370796b90fca1b3149e2c2a0f36d6b4ea04e548758c2142f44fd7ccb8d269f64e53a5eb295dde04e16089bc5e0c3d07e452f07721d323cb37f6ea9ca5386b0915059098b19a89977c4f8dc30cd4a01e521f95df7cc91608eceb06cc41545067f6bc1189c49a3dd9a9a03f30b99a34b4a425dbc83a8a67f75061011e67f7da0d4ae2294a57cb43894f93866f1663f8a5ab215f5bb72207c6fd6e993656b12636dee5f5c719f17094e548c12deb568b7f7872d4e1f1337b50f1f2e0bf17abb9dfda03320aa8c8366a61cbe01f9051dba266db27e8bb2fbe6c5fa839034c26157d1b7cb64c51ebad48c7f1e1e36be95f24ea22e0080c64d6f78fe6ebfeb6025345542e5b3a90b260b906d4b2b169318543bedb10df70cf5d1f073978a794903e8bbfb68b6920f38ca5627cdd9d2a631ca005c6ed201883689d1a84bf245bab3a07a229375301d639e01991379772b4b694c5580d3c074e414999e1403c59280a7165118c84a985a5882a0602c34b5bd8b19c24b1d0235927bc5df12264e5e64c3c5d844e33770c3f9c5af12228511fb8b3187d53602ed102cd710f7758c8d77b3e38cca8492decf158ccd495cf03d0ef75cc513663403aaa797ab47676e282def15bf6d6769d90dee9fc613c813a2de9ae052397ec218ac51cffcd726ecc1b6cd05cee1a91bfc8c80a99bfa2f85423aeae51a6f4d39578f3fdd563f44e3334295137ba6f0105a3a34db969eed01a004985280eb49091656828cba9e4dcb1e32dea706265bb38deecf41d907e9e05bfb883618f376ba12f669717a1dae9ff135e1c80a977edc447113aac5935d8c68b9ebfe614bb5f28673e38a6bcc2ef2b6cb7326679e25941eeecc65b262bc48c1bec8581b5e15ea90a0157543e326e33969b3838147ce808cb4e57ad6980cea5702a315cdf51e569fe85d898f64af359aa532035d690f121a167abc0b2c56197b81555b537ee6eeeaf43172de362c6da233a8274d943768bb41a37aacee944e3ded63ebc5c11badff9d1e73a9eb727e68379b747bd8f216c8b7a876e2e053e70f4c1b733b9bdb7e16cb15e828f4d1dfbfce50ad9b1a2a1b1613400e89819516b054927a47e715bc43016c2e84ad25910f209156bca091a8e626112c68ce85e0d8585261f4d94ed6203a328bfbf8fa50dff784c954aebda14d969d1af1c8f42da390cf413e5289b3c3cfdd2ba0af9b4861f2f7daed829dfcb53b6f80c2fe07dacfc8cf55516048bb4bc21650ba2375ec29089940c3f15ca21efd318200e3d7132b0b19b931ed16e796655ea69422b052d73cfec82d811a3643c70d76f108ef29b0f8badb995daa105b8eeb49a74ddd7db8fe274517c424cc492f6f2f5c18e12c51852e54985930f80bb12851bb3ac196a164854871da21bddfd2fbf5e6d31184213e8ddcfe665e42e629ec99c06f7d956c2bf89b70b42b3ab426ebf7e057172b0d2ba7eb8ff8f11853868e153e742cfc6744ba203a9e91ed1bceae73ad35657b9a85e418e9cfe3d0e8ff56bcff9dc9a902a3ce1ffca03c029a094bbf8e07e9621733dd28cfb3881c6e7e5cdbf82d97a168f09ca040ff3cd6953d9fcee10f84be57a52c1e32209e1624043431297ea5c5471346d26f9e9a4e387c84631f0695cd963d3c4a290272c3ff7511ab2b3ddf687317905f126242be2a6b5d25c7dfb1877635a065f657d178a71a18088424fcd4eab384f2a87362337d7f87ca1a555cd35943dff48f4547fa46a6cf9ff783211c1818d0c2c845698b0d1704c0edbf0e1dae975d728b0d7bff45b1b28228e6c6ab26e52272a33d8ca66ca5a77ae91983d3f8f5c9b5d17274b4a48516b562125cdb999c0ebd536a7c181a76d571f2fd33109f5a5c2cd09073a0bf86bbd3214441f549d7b1e1fd9640f5b88cfd1c0357a0512a2dec58b3801b6c1967ea7d83a49e8e1449dd71a085ed6fe6f9eab02124c99690fa938ba257991daa4735d33c768083356359c80e775b6bdef2b51112bcc15be3bed7d1afe94b454509391c041331a6017aa4c906d2755f8feef44f8811a929890c18ed33b997b692c61d0fd22ca1e779f6d958cd4c4b0891b71b0991b31e81d669aff668598d61f04927c3cea1f90d99053ba6fc3c2b48c5cdffe5b9e6de7e1fa9895b8c18959240b0d39ebadcceb8c9f2b55cb25a6e2487b8af9912cd0a74f6ef07d41b952658b79ff3f94cf0fb89b5d5f77f9c01c1741eac3548144ec08d56e753159e57157b14c808d865a727af0481312fc777187435dea1980bf9a9370c4b83552c35f74d911dccebc017566b1aa7f0be6bb667febeca16760feceea282fd2ab936636999429a3dd5809678491c0293c0be699af5722e76e3316a4a112238d0dd984306e7671e89754f005f2f1a8aaf4d76fd88802a235d678b863e0ed8b1595773d3cb6421f334ff498e1131383cc63d381d16affc0c6b27c798f806a38b55ce12e74e56ecf8301d6e730ca11105736ad22478ffab25a7b7aa3bf99b87c087008ce3fc7ec4b9ce9bac80efc033a4d9306e2a3c9df14a0b6e6d24dba90004c8b8a705c853aadd472c3ba6eb1c1bb53b72ee27296676b353709fbee55db58bb369ddf4f05e1d82d55fad8be5de06a1fc42d5b97ddba94769da605034d611e78d3a049a0115a3940e733d90370db0c78553672d57c73d8a4eb20e3f610ffdaeeccadbd0075425031389a3a74ae89d176c6898b71720c45764225eaecb4f7d56fb959e47346378d5cf8a830768e32ff5df4254c5b8e309612e5bc6b70c63aebda9ee843758f9a850cb07762327d00e706aa745a37e68f2ae6a59a3c63a548d615f52deccb4c09c12f596cdac9a03b2e033eea594a9af7bf125f0b563f84ec8b56434d47151a04215b4fb023007412a3f4543beb92eb19fabc2131e039982eb13ab44b9416b6144e40d1d272045fec4d4a636cc573881ff47c0d7a52bda8bae5392733e9b07c9d170cc818c5b9954b9fae55b739db2f6ba160bf55421d3b27ce10fa6f0ffce7b238d9ae3d310bc898d3e76b546f825c60f4c5da36326b1a75bfc32222140697170ae5736239c0b8120253550020f497e250abeb540ed55a635e94d3df82688b90a862828228e5f0213feadbdf15f7487a5b491a6c3027a3e4eb3e9e2a1ab425bba0e186747b66e3660b8960474431c5ce578ca7a0d78a041263eb3a0563fcf32e2750b13caa43fd73e4a47d5dbea53c530e5f2599a9c42ed757613e87b1cc7c33b0a6ca5c3157f587b67b9ac4e3463d7cf9732dc3cc0a52fb75ca305963603c65ce058dcbc5362e50de018ca06adcf598986e2a41a433cc0a45088a86b8bfe732086c25bc6c0808861470e67c72d5d18a035546b7f9850a2f01d60c635fa28ab5c50127016cc38262c043cfdab6498512f14c64ffc03ee5a2ac72fcb01ce708f8dd49a9f21377d814737e86e10436233b14220a19c68ade2fb9ad03e78bf3fb7fa6e95eba11297c08cdeb248dbfe206b3d36c7885d02d8aba3c8b5aa98960431a58d5b9cf0d1516b7042f8560e890dc75c5415caed268a42a340773fc2191408b500c16088cadccc2fd9687766108b7e5052e225d77a530f717b8f715ce76ece09ebaa452496675106706496885fe1b0d54311b00b128160f6a1e57385b229116406d01f726b93ac2f692f50fbe16840296f533d5e0fa5b206850139a010f750f917a66a8207001a5580fd9041f380a3545d4cc96eaef590b852ee944160d43727c343d2edd03e2760b604a561d5e1fd00dfa4585364c62a45211872b1f17201d86217c04cb157f71f0b8a6d6bf1eed2a075a86f88cdd889f1ca017709a7eb1b09e27631d49ae6f22526ddc380238fb8d5b83902a32295db3c835d004f2d65433fd955d62083bd06efbd5d31bd94469766f0bf381a1fd90f214fecfd42943f46eef5c43d534d144c40b0626918dae78ec93a83fa170c181e3cf3def6cb23915c1535982ca50bb397c9667585d010bc57114ef30c31c88aa205f74088d74da09ca526ae72644955761f851a2ad40db6808936a6837564cb91d9e68e48748faea771531a5d35c243181ead9ce0edbb9810f98ac936e63d0b8a45be475842751caa17f28cffc75c40b6075160bc01e4a52147a84a00cb592e7c9d7059c326f00be3a5a4131cdc56afd2b86b686a567f3fd288364b1f68f715557abfffd1db1a2c094899c8bba3337bab79b5f172e8edddb4ee62ae6db1cd3a996b5b77181653f3434e4796e0186ea4119b99f62753593f8554298aeb7e0bfe2cf7e1fd32cb6660fc998f2c90b9c539528e4b860a45ff01b889378e09febc580293294df3d1c21841b736cf3e959d4f1f6d6f5e6ecd630e901f8c7d5dadaf27d6123f0a7d11edf77ed09843d36ad31c4cc447a991ad82d864914b277cfca5cf721ae7d06738e83ec7162f71b2b51327616cbac2c2025f2482125ed22449024cd1ade745fdad81248307d7826a218bf3bbd86783a82c9fa19541ce11326ac7770aa0ae02e57418484b885748dbdabae47dd14ffd0f02be0307383d8f1536e1edbf56fdfd8080edac9671c15103ebd1ede05cb133cbd8d5357ab7e808adb40572000be44435ca87d059d771ab11aff2ee101bd7ad203127806ff8a4935fbc0b9707f20aa8efccb72d9dfdfa1712d6d2d77bf0d4edbe4a7e78b52d7122d3bdc126b6c13cdd5643ce5ce11084eea5881e51f083c3d187f9d82d3e6e11f69d5b95b2c4587ddafa2eedc9b5ba6892949d820b97ab78cb1ec9d99f2ad8303a2fa9db3e23f447936d02d6c1e7d0c934dfd2c39fd0b7cc1590df18974e950c1810d4a034fc743e200ed5d60516bdce75abae008fbdfb35b04b9f8b73a6a8f9b72eb7dd88f270c2e22d87a011b9a32d01236af6a7559175fb2fc57ef64c7c66db8320566184a6197fa66756dd1ea55d16a6aa19f951ef2e24938aad01385a5ae36ca96283eb6afd0ee3d6c1cd23ab7a2ff62b9cfdffaed95080656a3463093f939b79683f5f73df1a5141d223ec25efa6bc385c78036c5c75018232468194a779cf20747aa013d3191bd888e15c7b7074e57c013793187562db8d9bcb6b40c0118645bbd366572c59997dafd3ce8759cad33aade028ee006da923c5b53431176dcd3bf85b3b0f529895f78096c5f3014b70f339dfb02632174624cc5a34dcea048b33834fd26078e130ec690b6799aa04d9c19ff9b4f072972ac0ea1434c309a18573b711f77a387a2c3e647622f112a9417fc4d417319880cbebcd9bfb759abf372c304a9306e1bd3b5aea8bc491a4d816a1215fe3d0968be2caa9be89699437ee40c694eb34db1883283b0a2859ff769841811a18702145c6a47f2c382e8e1b6ddbe68984429ca3fcee8071b3fc09b93b0ecff277ba5e0492d8818dabdc1c6e3ddbea0433f6ff8a028fbb3309c150777cacab32404c8a52fa6d519bae0c993830bba1b790d0a3397c76ddf013615cb79dfaa84402567784ad16aaa226d80f9efded0a1e3ef7a83c546dc194440f718a38247abff87edcdc4f46a2a37ca42c88eef8624965c2fd43cb5fa11b06587075709e6be695eb04e84d380f99c8ecc077584c8d4403e89b21169d62339a02c7803d38cbfdc26d9cac904b61cceb040f7785ce454a83377722ded2941efad057e7b07d761d68ff137688b859c8e0e9a8ff7583e193061d76084649abf7baa5e652f96479d3815c915a9ef4ad17cc42d15eaad93ed2e5f2da96fe7515ea91ada9eb6d6534e4debf01abdbe89e489abb0174b93d8a26c7357af5492811ef6b6a5532383da9f9a741d293fd1f8d2989bb4ad7223d4a0bc624d259aa932bbdc403332471721e4b321a5af348cd57efdb57afd84d507538a0309d6ab6d1df76eda2fce600015ef6da31941de857970ebcd41a5a6f14ade377fd70b32ec9012089c5acafe80ad3b9c2cb7b7547777cc9a90e1e1c942a6564013f4ecc3f788eb6da07b3d117b38df61b7d5c38e2a8fa6a9950b9361331263a7e42aa45de10b1896c6af2c883e32da8aca14830e7d79263065e615303ea42f1c4c1e960ce90fb38e926dbbd292023aabfa1a6fabb6515a13b3ec0e0a5119a3a0303a0251cfe5c497d5a194d02f59278063a4904264e8b4d391c6d14d193bedc01560203d7b972f5b78aae1c4700d8cc1a7256a6db23261014d85dd58193fe450fe5836f08937b5904c171e7bf328fc039f5914c1b6d693936ba2db9263b4fc38dbbaffe790a9f06c8fab8a5459baf13c1db699c5b44b0f7fe44c7598bc1f5befaddd19b413c5614234a1a4b07e063ef2a83307d11ba6cafe1fe6fab1b9b3e151c58af01b17d286ba5f7a402fe65f2f084b3f71af2400a03a0f29d91c1779955283fc0dfc5131a7c7c4a0cd70c3b49ae9a7cedb401b88930f27e7758579d0b5aa7c8817e90026453f5b72201db2fc3adeb773349a3ab3f75737b7423d27490083ce8b92e3d8296f1f1e260b0e7b4718407263f74ff97403547b0b26113648ab719a63e441cafb1279f554b5fac327f8fa883bb5d5db2d05c44196c0a19747c4cb8f3fd71c9c878c2b7c805f127c8a6b1b7a6b64f498aa211a59c7444bcae633b7f4b66a7cca157055d02b87090dfd07337d7ecbf060976e98364dc19c3179c89df502b1193912e6f74c80bc9eead83879d0af5954889db6d1c46d8205f70584b46814491deee2e3dcd89e93f0ebe84d73376ce59c25d90f7cc8eaaead1a969fc5fbbe5b436cb28fbb76e2f72f978bf2fb1f9e36d3d218bab4cc7f382fef0348e0322b0ffa51834c00ede302cbbe290f15778990c7be6e56fb6230e785818b3a3b8f11282c8b3a2c989dcf35d113a7f45c69703e12ed0a0802e6dc0b46c464b1786cf67b40e486150bdb435a2758ed30383a1314ef41629904c029a4a3aac7e442ba4adcf3921c38e12b80f048dbdb4eee35cda153c4af5b895425e191fc60e81a43fae2229faa3eb3c3d4f3ceda482a4d0116a11c15964af98a5cce50bfc0be292053313ce422ee924a7b3c5aefaf7eafb53e92a12b44d19b02aea63c85f14671b3d161239d607fc18b994968a40a4bba7684baaf22c74ce950c655b4daa6aa5d576391b61c70336219cb310f61076a7ba48bc0b111f8c5a94f88040bb3edf9059e1c550e508c60a2c8751c237b744a8adb5606c64f7752e721dddcbb639479291b6f1ca5ab2bb70d450335b893e543f1a089f09b1903b21ec5a08f7a8cedc389fed6dd17fcfa73d6cee60094beb8adf4cfd34482fbd21b6ab9dfd8a8eebc972c12471e0bd31bc6104b1dba6a842d8fd758f61029d4ea5f65f6b66b90a9e77106bb34861cedab4e2885701e8cab97620f9f311c7e0cd4b2bfd93ad1fbfc83ce70383fdfeab85cf7d3fcc2cc49e5ab40fff5d13d5230f60855d092c6a0bc3ed64a566bae7a9986122aff8b74f36362f8aa270a2299cf6d2c2f6c8980a66a88310555422954924b47f4c6b1358c07734569fa36c3c014d0464ae6d9b496613255d0c2c81ebee7b18e3628529eb6c2426db33fc2d9c5641710cf729f0086e505826f3e74f59beab52ff84205e3d6e63c8761fcc6080679d3af47086b84c17b8faf7a9ce2e041da5ac451a71f9152a55cc33f387ec5e729658dd86e0dd5cda17ebe1aadd15afb27801e88e3746fc38e43acc258e3e48ecc5446e5dd3918f8ceaded475de3d95a50974d5404e90a4876ec0f50d43e7560b3fc443e788ef6192a8987cd257d09b33214b9fd2ce4a728cc40a190486491c3168ac822673ba1572a42fbc05863b55d652c430719422372f0060f2fff09a0a2db0f3382e5f8b4bd657e5f7be8605bc9e1b8c7738046272f162d8d3b19d62652028bb0abb1059a57ca5f2d77f4b12f32ef95ceae2bc23732851946ac9778e3c27bbedd66a210567c4b6a390dadea58ebb0262a103e0fbe1958e1c88fc850b2a2219739c2802f0e63fdc9efc31ba2a03468dc0392f7b0e3de17be90554b83d21986c039acf44a951984282d64382d3244cc00a858dca5a6b5875aab67832966cae55d325e9f1b3e9d678ae7d6bf084099a1c7af957c5b94c72359ce40d29edf773def0c1dbdf5e478fb362e314a7cf7948e323c6a7a88fe8d63188705119b8089f29fc2d64ba27cbc2de392485b1c8c511a69b3d49380df7c73ab463746f114489f284ad6338285704465a2c00006bf526bfca4789298c1c65fb68062a14cd75fda1e989c4352ca8dae0e33024c3a25135356edd3aceb2638d9035e82222dcbc80882a3ce5d62702dc185c0caa53eb01d005aac66428d99b8eebef68c7bb7f291b033f708d60dd881c964b1cf2aade2bfbe51ed268646ba67020a2205e40486919614b4c3b204fe41400214e11c0f42805510c1515cfec45536d487e7267ff12fcfe694bac7f059c164b921abb7d66c35500af51322b3c873cb026e500673e93193acc3b6a6d09b43ec6e02cdc2e891314352f6722a05b5ad92a566e17743489517aa6d8065d3af780a0fae7ab42a1d50899be2390c1749d17d2d842fcacf5c1ffa57e510a5a783cddb0666a501fba12f7a3cdea8b1fb75e0bbd2e1f0df0ddf84124179059bc2349435632b3e26e8743d485a776ca7fae6aacec581c548a42cf24e78d2788177509ffb88d2563a4c0f0547a256d1e6ad54f5a392e0c9e2df6e2d82d24ac99060dff1331c39495d2b12de034f1f5e2d27481fb92999a0c64ae05670177cb320f0dc66abbc5dd8d6c3ad5ae496b876ce09c9671d4c726a0517055b12370573b92755233128256b7ce3e603278a6498adfa60b4514c2a4bf6adb70ef294bf8eaea21429dbe18292fa434697f52813445c43d8fa59ed6f3700b0eed46be35d4500bdbee5940b5ef8369b7cbc5ba63510a94fbcffed962aca8a39ae973575436c8f6bf7d751ac55763c082ed9c74268473f845b9399ff52fcb06585ff48fc2bd1110a76eff577b4d3617caac50f90b4c1f77b084c5a0fd7aa5068c3691a061b3c55be58dc38dd925c3eae5c58b323e97832735cf9b9bfdea661ebf8dcf37b0ebdfac7f0a7fbe7c1ae8abfbd6dfdb547ae86f0c8ba788af6018ba5e38a30c2b7c6f9250b4c483ff5aa15855db154243292fd69cb68c7467a91d41d75d84dfd1f9f7a1bd1307b6f8f24835ec57cb6144e44aa7c17a739c9d3fe3816f9f4ef587087f0082ec3d95ea33588878a38f510bbf9b9c1164d352cfee5337064c893c13220e1dfd7d359c41c51e3f1b057559101ba89c7b85b7d0653880db2ca5265a647b5c5524eb4fd823e38a764091ebe744b377a3e91ee417361b6a553f0be316a3f290921b25d359d0028a34419ff3ca56ad02512542f72c0274e79798c434ec2bfcc4145a62f6d410ca446fe8fcc4ed8257c1f06a0bbbcad0bc3de7b622454857218c295365b1ecfc1babfdd6a7fb91db7f1293fae00b05f6435cce72b4bb8d3c97e70335d992d5192f5c7509efc8605484962f6ace1d2c835cc81e8f30f4f3b298e3c62efb56b19e3f456ed4f8ef7aea55f3e9879509202cae4a8ebcfab6ae6e6c52add8389203ee752f987151dcbd1eae519f1041ac5c9bf7b47f29746ab57d8ea804971cf80dace1b37f5a10ed0b4466212975f51dd5759aa3eaf6a67cb535de10e043d9cb9fb479d65f241a85c0bf7ee3f16f05df3957359e496fc43de093b8d731580f8710e4a2f43db1f2bf174c697530448859ca31e328552678d221dd38b9068f4e52607c00cef9f29179bdcc169c879be942f059df51cafa5cde2b4b64b368bff4b47db3ffdeaf58f25cfc20c7a424d3dce14a3d7a2193f129d2b1087c94c92cf7480cf9c897bce5f333e86fdb467394f04a9fa40bb878b60c14bc631022e16f10fa77e92003b326c38b8617e6ff42ff25851d11dc26072ec83efd9061454d672f7f0167ed121e57e9d38077027b11fd934ccafd1c0e5fe0fbb3bab2c34b80de660ea326770230a53172c3f9e7f766b22dec4d0a3b50091fde874623dce7c23f3f5607fd1bac7421acbd768512c913fc39b0682fcb1ba8d44e75ef72204701c9026593e3d8af7f6ccd69c470d4f0f513ce1ac299a1b3ad645206bdf6200c754b7011b18823a68fec3697194f3efdd64b0df270764adcd7307258f0f869c0e4a37a47bd1127ee2c06c89eb545a46b1156ae186d259f4021baf6917bf2557a781442fc4fe258da0e9b64177016c642d650f7c47d3dd62a6e50880843ccb8f4895a983b55c2c6a412d61fd08ed91226b2503fc04c78ec2f2d19db4bf6cc06d7d7cc693f317929cd65300ac7e1ac86e2d97e00a033dcda25c997a8f236e115c5ae495f42480e693e426145b2318c284391522b4cf5be6c070e552de8170a8ab7c1aef820fec600073594d64fe3fcf44f3c0ac259f13fe02ff48cfc21ffd06811ca5d93d61ce0d7e399bd5e0224d037474b5e6ed2af9d58cf2b08168db25bd42edec0887feab62176f762f2775a4d228dcd547ea5644654c6036e5fe027c636429eb7be331324e69416176bb1fb854357d43a882fb53bdf5b34fdacb6de625165dd9825946f463ee03aa30a37a06fe4be8baa84c63a994cb3f2fedd8c5dec1a3ec017acd8cb91d3d218a02f026d86a75982d943ed5d7db7c42abaf5262505ac95718b1195fea0c4fe3de5f807dc51da50bd00b74c3d78f8f89207e56b919e839137c48</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">当前文章暂不对外可见，请输入密码后查看！</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>os</tag>
        <tag>private</tag>
      </tags>
  </entry>
  <entry>
    <title>os xv6源码解读(操作系统页表)</title>
    <url>/2022/03/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os_day3/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">
  <script id="hbeData" type="hbeData" data-hmacdigest="b86583d25795d6244c82e5893b7d18107baf063efe5910c1d68b45e374bab0ff">10d79030e8222445804370796b90fca1b3149e2c2a0f36d6b4ea04e548758c21ecee1ce7bf513806cbf8429e266592cf7f0e90d444665fe18da927ae66fabaf7a2aaeca2eb156af26bd1b337818b5235c509bbae72efd08a57e40c5818a223d6bef17196b01f43ea9c250e0db5f57daa464bf1351765cf2e3ca50d3897c98727942ed5ff1143a95ae00323ab894409cb572d4e1e7da371153fc164aa0bb005fb51a3a5fd60259849ce0fe3c60a1e2e57ae3f3613fda62e2f6155f5277b47b227045241012c1acceed608b5ee8ca4e2fca5a2a91b0ac85eb7eb149b5095394872ef9437fb8816630a408213ce9f1362dfa95361b2c8c726a92674ddc875b03fcc09639c0a939b5aa17169c6461116949c9a28aeceffdd9c2ec42677d6f17d09e83efbc757797aa8a54b50253010d7de4b56723b0fdd869d74e945dc4eb8c26cd0430566617ca32a8aac9554a4514c337e4b9291e1cb4acc559205252cf407e152a4e05cb62c0f9d0b48a28071e405f816f2b6bd5dfa498424eda06c37bd63ed4f0907c9798c2430e93e5e02f30227c17844fb26bc2e00512dc6be3a34e1994d7c368f8164b8347fc12d15d4960636bbc35f9b6bfc7dff98a6e7f5b2029803166e9925a4d10dd83b5ea7b189728ef27dfc83b78b916664e77974ff2202cf4dfc47a480fdc82998c560cfa09917438de791fc252f83662b3af78c8524b632fc1a3d1e55d81fc16efb516ff291c05fd1d2d36c30375176c6092510ad9f3280181bd7ccbc86a3d8490d50aa534977d5435b02848e52177da9a7df0dbd82ef66d445e00e9fb2041ab675a2577c3efb8a64f49e54252a4ed43eea5124eef0d387cf6e9bcd3bb101f656ba04458aafa6f91f21a6f6966e8bad75729c6314a9538e592a4b3e999e0e99e6ea245daaadc950dda9921e94553fec27d40ef6b6b39ac489e3a4a96bb798206dd5528ec086e5e662e24cb2b9eaf85bbd796bbc31fbb8f2a1a46566297143b90a092748f738fbf51ec77ac0df37cb7d374d0c10ebe1632c979c4dee87ca7205772f44ef0dd235e9f6064f6fb834f5ae1bc6040aa0a20fd6f6b17359883f83fd7c16c7a653fcc8c6fc7bc0d70e51ae16912e147dba1d6e21b4c0d9f4f1540427d05a1ee3d145cdef5812b1c9bbdcd19e7b24d0b1874fcc95b60916a026e9ee40bae290354c5b0678b557b327e76e02dae9902af406d5943008ceba6fa5c51b466010d24911692e5ce95456e2b529bb516513d330e60f0c69c52be8e841914dc2f721feb2e2969b4160225870cba8d23defe31511e967d93ec9140a3523bcf90ed1f6402a6f162b18cfb44ca407ff4af0a64394ddb5022463a2e08c6953ee0c94fba13e2263c9c6d839828028e16cf1c752abd4a20b1af4619b55a9a6a53939f72dc71479fa6fd7cd36a9f1d72754749f540c2101fe553e239d7aea47d0d69ce8d8ba214f1998efea2ceb347c7d17cfadc12321d608f3e32778acb4e2333b09e51e4c64d3437744cf1b1825be65d4c84f282e6bac43a1a04a4de879a84b34df521e0a792796b40a9cc2e0e706bc6c27907625f572c6359d3956b420d1110cee6dbee48355209e9503c1b388c465d9283bf864829240f811fb815db6ae747b83228a46bd1b12284579eadb8576db06c60a437129164d12363b5d584a8bf4c147c56bbaa802c88f3f03601e9ba04e34dffdd28ded5b511602624d8b496fe02e50dd061f8c04e6d72c8fc95ae9820a35a9102b401e3b65ac432ec4c96dfa87108a16418ecbd0d5490385e6fdf981c049a8b53ff6fb83d0eb549eb8d64aac452d3bdf9befb93982966ff217ca81e79b83e618af91c5bbd49fdaa062fe0b681a142ece233ce53f57664663d510bf214ffa53740b8cc35aea17f2743a9163569e387a32c0958387e50ed1b6e18a26c2e765ddefe129757eebf4b5a8e4fdc74e9ed84fb5c7df53ea1772d2b2ddf6294dbe332df26b1ac12f645da6e8d1d5deee823794eace08642a1bf02ab7635a3d11f3c735845b5c87455c77a5a0168b8700fa09f5ef42d5b0ecb183973eee9b04404c46e9d82e18aee496b874fafb4fd1f57416ac12c4508e42e99b7ea6eb5ee077589d9dacbe6316bbc22e10a6c81f16f054bfcc3bf73e9547a8147131cd0d1124bd91322aea333a8ae7af306af76704dd54a723927089834d26072d87c44ff7e66ddac5c0f692fcac25015631e14a6a7ead10a16d1dea5ba546a21437ebe21f4a526db07b0f7bd0005e3825c586fae9ca77f463d66be06c60e3da298341a144abcd3a53c6e061fd5a30814eb57bbfa0ea4c75892e87c7b65f4d3276273a3fd54cd918bf51871f9faa8fd341394756d6963b07960fd4a359cf2bda5e25cea44370e8e264d0670deeff73d5b824bf05e661156e077f8b111b2112ea194602bcd5473def509fb88a48a2edfb86666601def685cdb301f35902447d8be9f52765d134f87e3e6233b8224bb5c6f98d468b54dd2231b377633af94265c5e28f85174c3431dfc3b87e96783cb9827e631d719187adb3a595afe023609a16049543aea8ee9e125b48a0528f563fb93db40fc3573f483e8544062bf8885a37de85d3b1f6bc749afa4d69440bfde34eb7d736a2ec60d8a0ca908f3221b5df3bc63045a52c1bf7a6fe1806e7b1aeb857261dd9037be104ff1975fc973f0cd81287f0db87d88892bd70dd10776a9b24e3cee36885c83d6deaae048d048cb92d985933c8bb467eb9f9aef1352c84a7f1c920471ce5bb27b062bcf7abf5ba3f1472ea0a557f4161ea927001477eb8a7d36b22c6978bd43f3b2693d7e033c2206786998efd07cd098b5eb9940494c13241828c849eb1a2740c59270a45cdb7129b6bc2a72dc538abd413af2dcd0a1cb5f63d659dd6d4a6f2fbe417b1dff1397190b779a93473a31c04be4f883f7316227d2f4ae0fb05c16e8e5de08ee609ad255aadf2f99e56c4b4e5a5b1e3f1b75e0250a7c597ed2afadb7f0e40be0c8766be6d894e988f92fc60f497076f749d1009a514f01b3eeb2914ae3b41b464a62b5362d45f3f3f8c89b4d8a6925ae5e40f491a653c18389bf2fac6e86258b6aa26273e021f04d8da1042a91b6a52edda5c19b1295b4f6672230deb8822bb2c3466b8802826d304a3fd91a1796f446589cffd0d31c3659989649cd885f084ae7c2338331d6f37ed5022b07243a685b1cf868c43b6b56d9da9d3b2b31a63bb0ffabe230bea597d951f1a670efc53bf18e87e9fe6ebe55640f4f6a87d6cddaa142c7f7df3d842b94430c75a18952ea021b816eb558c4b827a6b6adc97503212c9d802a58a61c37e8ed6eac0614392d832245f08f5335d8e93dac3633d3eab98061f1dda478e1b359f6653a62b28511220dda8b9977d541288782b9c06f48458555f30651512c686387212f4ea4e3335f271059680bc1b8c51642ed23206102199de4ba05af3e56a2b5b0b17a59e8d9177d1bd5005915b4a63f660b9b556088959323200b0866ccce598b17f1e5f11df52d5926baa81e24730984d02d748f71124124efe2a4a57b421fcb6e8f1d733fc52eff7d49ae9af17826fe422971817321fae2d01f5eb9e9d09736a8443f1a5a12e45766c28f0320ffff74a093995bc329a36949355b933a0a8107c237407461f4e264ac2800cc4ce31d54dae90d9b9cdc2fce82fd51e17db73325f7a7658a2a18930ce38fae6f3a1656b034313e65807d50b08babd8fbc43ab9f2e6b7dc33baffdb5385189feb7cde049f0636c05ebf2d9c4dc010bf96f833ff9e1f956cfb3e9a5967ae5887418192abac48efeaf85f19d33f37a56ebe3d2214f625fe1fa4b0d98b4b30cc66f0530b4bff77f939c5968d60c1f3c322bac9f06fdd07002a09359adf70ebbbf99e4345cab16f70e29610191202879e7b575a9630f7329e8c4a784365d60185145c21fe0be9ac51fbf948fbf9400a0bcd06825f5708ae0e56f8c549c486341f9489c7c6f2a83957265be693a4bfbcefe121ad4bbda6a61dfb81a723d7dc1a5739223a8e3f981ca8b0a7a533c4dda9dc30f93e2bb490a9b622dca4d76ef850953ee692ec27e018d34a1553dd6382e523bab153a1cfeb0911e798ac6e5fee76a59b969889afef6bd86c6733fe37e48318a3962cee7a7260d6041c86548b36d37d0ec4e9b1d75d85602b67b80dd0245f1b05a450cb07e851d9ee926f78f0839245485359a516bbd70e25658d312cf6885ea691a8e725d02193e3b2c346e74b290c73f0fa062c6875b2b75a6b2aad7709e3a43cfc7f1ed810ab9ecb53facbf5cc82aaaad835636029d877484170c511faa3f54911ba886cae9ee20a425d758c78249c869558bddc698263b84980d42dcec2b0deb465fdd9e3f276e807f5be912ae15c567f87aa7dcdcfce066d4b2476854305b9795ebdb1c5ae3bae2144de670d9aed2507a3b2825c5ead6676c92350f33d1aeace4eb3bce858b06ca47bfc56054969724fa17457737dcfe778390c6a9a66115dbd4b4f05e4f99815d11a2b1152248dbd576ae373343a6f822de9b6763209639b07ef63baa65301a3aa4e03c3f33f3d8b241d87fbcfaae30c5421e8a85b3c3c4d2370b5f75a3bb1a4b5c768848a4f499e30a4f3d121b72c380379e0f019b7f7cef06ca088f361d6fdd6238047eabce2fc161f43b85f8804e80bea03078a59ac03f5430dc5eeb8ff7b491b62201b14ca2e1eb64d486a181c67efed176862179cbdb9926c9b823cc5e7f36992112f0050f00b4c925738d49c821e6fc0d491ac0e3d82651797bf19f3e0e1bf52ba6467021db5f60130eb4ffa74f53548275d313992e06842aa54576b4d7251d3de86eb60f0bd715b8077a95cb5183410db83805316a1d6bf237bf91bf03f5ad7b1e123d84a5d5bbb81651cc404c3744fa6c5223f3144248559c44c22e88f02d99cde09d86e38bb14dbbb14f4d332faabbbb9270859fec29e22f341fb3a55a2d2e23cdeb3ce3724c9fd4d38a701d7e7f7572345e5d9d6338caf2a284a5c8fa0c0de1ae14aaedb235c4ef4efeec8f4bb73ce9df552af287967ac5bc27ca3abac4948214fd43ef09853f2ddbcbc95723cf121a68b92a494ab8414bc0943181ec48d88676b006c4a0888ed53ec779b910db0bab1684bc594f24c2cd75c6654b30186f818b4968fc29067a0a5a6e3bfe38273f221a726496a25f2b8e9641eaf0ddfd15333678204abfe12b15d4603d2aab1c29f09184d5816145127dc79b2ed2e45b9a803d4a261a87faf4722220fce3620840d9a7cbf78d7eddb124c9be900299aac28ead0a45c1d11ad0244a0bf999614ffc09b70b0700db0104d2a7841c2c895c38b3317d6e0ec87ce3245dd0a18ec1505dd9cf5722c652d0b73d2bc57fd5b6079f86e353c028858bbfbea9b9e29f83a87049ae62d3072db57e64d0cab7987c91bfc0c9d486f4852cdb5320929c72e336a8e9ee9a12db4314555ddc5abaeac9e86846bb026c953c2eda30d0d808e3852e7b39583c48bbe853e7e31efa1a81ca59bd56d9e24e973e7ab8e9b597786b644a465c56967331766775439b62b2854fc5ad8cde0301f9f1c6d172ab8d2e7d2bca5c627245fb4181f5aee99a3c0010017e83f34f88bbebcc49f6c1e58c31834073e823ea2bf37f33d0758176aefa531f0bed4b4cfd1d464d31902b329fd8ab17ca922d71320fb61223f20e78bdb26efb82d0559280d3a484cce199c11f6c776e43a02d48a24261b073b48c2e5612fcd780531ea9af68f3dd7178fa7a15c06b75f6dcaa96a8743fecc7956a5a3a1e4b58b9800a47cda3992fffd83388c12c96765fecb35ec5f2e6bb558afcd5aaa1a7616b4feffa40e8db284fcaaad66beab01e194bfabafc0689a3d97fa4361c25a52e65f68875489ffbe89c4ff4dc2ff91bbbab32b25214e298f5dcdcb3d93fa81633952ff640edf3cde53c41d6bd18eacda596c136564948039f73ea3bd525c86d09bd9a32b686908b50beca807bfd9ed81e10976be0b365874bba4b19b33be16069c3dfdcd1ce9b8645dac60bcbe67cd478652efdb590697f322fa606baf114f69a53030e170114e6956a17a159c3860d662de706224b21ce25cba1fb4478e0f1d947cea182984ec3730e143bfd9537afdd0f592f82e7c0dee34b3a4ea59162f2c98b6d2b57b300de93103b0ab74325ccb7632e15f20bcfb9381d67f150c78c982084cc6be61336c794645012ae6ab882c3748c8431fc5acf041c5597213fffac1412718e84ac18d80bd2c41f2ce14fdd74bb6f6f0a80ee16076223c344b2e5cd419f05c84de3f7fc15bceaf7fc3778cccbf834b4d561b162345f1f4aa1985d99d67b1a117257b0560a2a831e0b1da1bc81391bfdf4de4d4a48fc22ceaf2c331675646bc208ed500ea6438843ffec14bce78127a62dc9bbb9d0ba318f289be25bb61260fd3872d4c6c002833e5813271ed0b4054d645ae12f15667dada1f37797616fa6fbaa80275a11fff7cd8dda64eddda373d703c5fabd70ec538b36174e216019383ca2286e1531bc2b17232d949bb9c204b0a8723ba105787e13486510140963b6c758bd200f76a46163398f46d68e7bca26017612547c33e933eef3b254c4d0c96c5d34b1cf028761f11d1fba8c4e7b1a778fc06617cb50e8d2c5a528050e4873f52f16e5f3b00d5c7d770b361a84e730bb00da22f654cc3ba3332ef92419d0a309d3a94fd71af001da7799d168d23ab3e0de925cb9e33d26bece6283d75a3218007e79708e53c43d8b8b23ac097c904a8b65a9571c6247c3c8362daf37bad49b7d032fb4ca2313efe33246bd1d069b74edab77d719024d71eec44cc4e93843f86d540f42b7f705b9c146503ad83455b7801340c40fb76570b56d5c18942648bc63d7096d2f8d27f7cae5ec178cadd0f40e69af490c88b89eccc4f38d56d4ad231c1c5bf4ec311d267791d899b49d7e97c550d972d03b0c769a982d5aa661a1494241016a7cd7498481218923711eedfc073efce7c80afcdc5d5ed5a4b24273b625ea7f928158095af5223b841bff365cc3a43e66a8411fd09eefa6994231cb8f58c81d0e1e6c9e9b6913275b12a6b8db20189365f23d780effb3cc9532478eb5b8492f8cd0341965255e0b89cac2d7abef36ce4a4ee5231b88d6b47bf6e5c9ee845193c01049445a0ff2dc89c6ef2969534925cf0054703dbb8eb7bf7deda6d100aed48ef4bec695cc3cf48cc9b03a9345aeafb4132942422ff006300b437e61d4397ae14c2dda02627904bf56e924e1ef48e456c750022dfcae5b6152b1788a71ad5080e90955383c2eca2b33ff4dfa84a480e5185db768ea4331c240cebd09ffbcc4d596eaf94ec2456d24853e97dd6552b958814f6742b686671f72471d6fffa98464a047690be4ad921309fbf55548165cbd7a087d5d2549c4f3686c07f7070a35c9d6b004056fa06e88cc71f1af5bd7f324e66e7751c34b49b1573068287a4369928dad146fe0c70a81307a753ed9ea2e88ba33cebc2b7d84ce533d74f30f073303b914b0b2e774b9a765b3eb1e7e403a99db8774638970371dd9e9257d9f07aecc723c4785f5ad97ccd501c5a3b36af4dca5a573887ec24121f521a4180d293bebbd5534237b36525b258dff9ac60dde5031244fef18073ea30b3d429998009dbf2bfbcc027f1be31a50ecb9271ca972836707a70891e54f8aef09199698bb246e2a4e987a7ae7ffb3939eaade4a5abfff3d07a294fcbf0aa17c218a5ebfb490ad30524c90f1350aa248c97b2d2c0627999db42459102643962fc8584b33b619e5891e0b269d4f90667d12d30b0f9d96df20dd59097771ac2eab196a2e5d9a22444e7463bedd55308354590f60e71990b27d0b71e48a65aee09cadf618206ae6a859da628bf58f83dd72b61a6ed8dc3dc7804ba5b68560322c12f21cae655c97bb7a2bd0d9e5f17f2b341a1a51f72863e038b2d8d31309403971e37f54cf24306df4e19678ab81df8045d00646f881830124c2775a71a16d99bb6484650cd4ee5f09dafe675acca5f9a9fd04b07069c3f32c31de8f2b330228d619af9cc2073451cbd067700261dcd487e3530a3d4fe2ce4bdb210ba80dbe1be85ab0160a69952b5827f6e52312fa09286c024413ca727045097c24a07885ca125eca307f3710b8c1c8a93153e0efe0476d2b9a56ddfe8b49696de1414b65e6c3bfadd99d0340f11f4ec86b2758c0579bfdb6d43578c42b19c56bb726a4f6c53092f8c0e0a7da3c40572719a019e0eca6ce5a56b9764838cf970af8d9c057cccbd5e3f5d8115839c0e00abd36657ddb1b3e7e17efe5034ff62f01c851fcd9882c62db575cc5445e6372d7843e14f122ef2471cae1a09da8c5cb37ac5070e784b6e62d292bdd60bc6689d135359fa19510e4d8bef145c6b9da036fe690097a693941f4861ef066978cbc85e9b4a8c9308520a8acb103272b252494ceec3e88ea917fe29ae07f629a5a1a4661b2872254cfb4645944075155945965e880cd6619ab451ef4565e1141675bd54e399d4d2b4fa4e6de7721460ad1f41e37de67879e0a86d114e0be87711127b1eae1d0cb3abf8a56f80ba8aea0d14224f54c344c17e0830dc07ef2e873b2fdc39e0b250ab244c40dc1d7d183ef6e76325dbf10dc15b67e168210c4a6b5bd1fca8bfb64b4d2fadebb63053fb27e4560a2d4ed3f7ac3e77b3abf0016a6a58aad865c6260286452b5b67755af9585fab3eae1c7564a499e4d72b13d1accdf466f002d7c9bfbf7f1f16496a8791f22ccff6f72be49764934c91b4d95be3cf4d3bed53ee944bb94feff3e3aa6ba039c5a2ae1dfb314ce34c590413a89714cd8ad9b8d38b993316fafd820433a939ededef6bd308888a3f83db580ac9c6114b5303e6ae6efae80dec8b79ecaa4cd2877b6c9711d1500a44db891ef515cea99ed2986f0e3f44634a32f8cca4fa4ead029844ab55bb0439d57db8cf4c482d3717f02f54810739552d120a1647e73973cf160841845d6dca1a547d7b1cc478bf34bcf7a2d1890406e81e5dc017b994b22ea2dd727a78473b4b873dc1ab7d5f6a790da83727b4ec167ba16acd114d13493a7c2c9ae28b375f3f7fb99dd3a40f8614a04e5f009a920d71836690c2109452fcfe60a48b6845543e8db3dfce79fa5d90fe8910e9a5b78905919cabc2381829f59736c32d3b4a5bc6e90db8d4c672a2d8026a867cbe4d6aecfd819ce73111550fbe0be37eb776c7a143cbdd5beaf83f53e92a5d344cc3811fd1f36f915b77923268b0548982b721b173ae674dbc79c68165c9d1750d1d1112b703d33abc4205071de9e2f9c59ca3ea2b87e6bbd84d4c5ccb09d8ef33755f2a61992a7dc585f609212cf027bab6b6abaac2755a9cdb3387793bf74cb2189ad0832bc9bc4c2cecfb137d779df07c6f38b0fd699b281c56ecdccfde88517d983d009d3a76788a87007fec92c5abad96da7310699ba750ddbcb8efd4648fc586d86c45ec4350d48c8c3c664b58e196ca3fa6c3101348c44f99f1faf17ee3a36cc36b9e53581458469957964722fa9bea2cec4129506bba360171fc6516562ffb446672664a49389fbede53ec3e488304f8b592aafc70d615053800611b7dc041768eea566a63192b2d94e3c974775dfc05bf0e583ea40456718aa57de2ac3264fc31b5f512718f7c4f13691abf82c00d994d7f184d63c5a2b041afa8dd60f351def20e4c33c5fb76d1f3744542107dac27d5aafd076ed3799cc036f25fc840d474db5a1822d80e67a6353ba4f6d8d88e848d7e2cf4cd39951511706f02d88875f5fb4ff1fe8c4af5bac39606d9c81bc5273ea7c5ec13aea0be603b2d768e6be8f34272cc7d63b19ab85165071ab1d2b96c92d62c6f1de9dbb5c4ae38f3f183712798cdcacf8002b5a113dbcb49ec27ef3097db61d35422e2f51d08865bb2e50a3c758b237249d601210c5a78b94f868324eee896596c0a49e7d726b4b2348bd789cfa7a91ef704b652d9060794e783bc0b1f67865dd3ca203cfe03c6d3cc742f32653e8d45967820b6c6c7e7295d9d74943bb82c9458eae387b7a4c70b7c3704ed189c2713ff6dd13c6c6678af2494d31fdeabd15597ac2df65e059fd511cdb3064cf7436712046e93bb2cd037a3d17a9c5c45aca9299cbcc37bb256b4c41d05c43c9e0bde696d431d92ac065aeb49a2aa747032bbd6f4e4fc749079be95532e8645c5f0872ff9e721c6caff2588b9535d3e308fad6b8ffff38ba7ac06d2210f82a2192a8d9dc5a51b0484bc46bf31b9cb7363579de8445b0ab1d21de641bcc66ff09a23bf952382d0b27853172a6c93cb2b43ac9afa8247899eca0a18dc25afbece951a9172a16af134645c4fffda1519d994e138fd6cd2fa0f046cd48f7f646bf00665d6fcd276854c416642866eb6126331203b12e863f23c2c9bf9514fb7dd4d6e800bf16a5ba15ce27356c98a6e8fcbcae0634b96b994fc835d12fe03e6c919ea5efb165cf1c731b8052bced9ae95db534d2a5689a71e86dd426d639027b7b006c3ee3ef5afd58146c5f1b8321c575bb354377b9884e58df9296d4bc8dd18703959254edcc8a2116c538d944b4ffc21ad49e6929d0cc7100ecfb0a2aabdd9227576217c09079a8b443a5bb88145becd2e6e05bfffb87d45309181d145296b5400846d87f7399f1e0f3a103fd4aef83a606a08b34a9fffffec81d2d2a6c2bcdff2ef0ba87c6e596bc6de3cab6ce1cfe1c1acb463dd19c9c926693b188763bc9a0f4880a0ff4bc4e72f91f663ab006ce79355f5093187a2d8324653572e758141d90b986172d2d21df7b6e6a9763f830d0ad6ba160b666121cd2d55a47a8dc428b54f52f361be25c369a7676451a45577fc375bbfb901444973af93f8ac807850eacd5bfc26db86d0f2bdb142939d24f2ee25acf39c5494188b70faeaed957f5de9069cd3afce58ae6c28df41188b374cd1cf00dd0a965d8de69f35c6ac6e5128fb6110df26a568072842761c17b24258c1a4bfa04940632023d8e4251524f7b24cf256d31ca625e856690ce3825452789940857a71c01ad3fbe937ef301a09535a60295627c0da5909cd8537550101128a29c2fcbd837a5d13c2d4bd01fad06f12d72e6162c1386736bfaa0483022a22fd6f186029e3ee255785f0ec13aa53a2c7ce67397eef0050a694768de2d7e5b44b185d10ff58c071b4298e6e4e1e8703e3a628f8ff55a0c06f56df931a4eb92634f4ab7fb05ab200bce9895a4f815ec2e872b64b8691d3e24bea18c808e71438da0cb97c6e0634ce63ab5509510e16b6a76688976081b4f8147da612eb3ede491b905a01b985836eeb6468226dd8d9ad82dd27ff79fea4bfade8a3be2fb4cc3ae809a4a44f3aed41f1a327ce5bb70cccfb9e1187959bcf2b04e75fad0a1def1ec945573d684a371d86b5c3e91534c4179e6d169dc58b21020cefa28ef7c146694deb33ef6dae537f23ebd50c357f0113436eecb2fee79e2f89bd94de3481aaaaee7ddd1b69bf97c3ea856c090cca9ef2dd7fb7bb2511989990878c43d9ae18f8953dd9fbe5328816b3c88a2ae5a6d191258665b25b13abc3740d9e7d841ad654dfad4e8c0493e35f5ff6435d640fa1e44de1cccc959fa10259f1a3afdce4246deca9337771046f8dad0c4a9e071108fb9f6f6d1393f238c8d17c98cf2343784e3cbad8933432f99ddb303061159b11e8feca8d83d95a1ba047cd585ef</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">当前文章暂不对外可见，请输入密码后查看！</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>os</tag>
        <tag>private</tag>
      </tags>
  </entry>
  <entry>
    <title>os xv6源码解读(操作系统陷入机制)</title>
    <url>/2022/03/25/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os_day4/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">
  <script id="hbeData" type="hbeData" data-hmacdigest="23e1b01b2deebc62d5d542009d82ae8c6465efcbaa2867769a6d6c47ef4e347e">10d79030e8222445804370796b90fca1b3149e2c2a0f36d6b4ea04e548758c218c0c0e695893dcefc30af49c04ae746a0d0e3bc3f8dc6644db6eb2c3d55ce0c0008ae86d1d2f607260289e6b9e30333fbe705b5ee3cf3c00928c20391c1009708e4145d7a98ac669454f6f29a9d9f78d0939b794c2b07104e7c9e9daa51628f95c6b6b1ee5bf0c1c228e9fd377918551df0afbe71390f5acea6c3b1c091032ad862f4a83a31e3e1d2a8bc0a64730fd3b6e8ef55c6d5abf4d0b04eeea3be4afaea7403c4f5a838ee9f1d219d65eddd694a716c2dd42beafe6644193d3ec9075f38c0d4ff1d7212252e878309caabe3a72313731c2c4479af366869fdec74acd83465ae8efc8234e64d52d23bb76b9a47105b4cdac6e28e5c193ec192a8631bbe1357a71e691cd00e5a3fd98cf532b8d524be5b1d127dea9c585b5f3775005435af5ac2c2f605f71efbc8267fa406df7ab0cacdec8739bfe1ebb8f5b138ec9f4d7f8d4f1fe3f93a860b3b859eabd86f86ad9b5fff07325bce10ccb86afe4bcc95c70c1c45c42512cb78206f95bf9312b1abf76efe335deee1aebee0ff456ad359b05a291b76f4cd51a7ca5fd7ddf2b653ec09bed85b3a772b9bb8fc844fab8958876bdd86c4e9ff5306a4064b8151ba7cea5f484d2c52dada71d9074e07f0c1f3b6dedcdb092fd883150c4892045178e7192cdc76d46dea7e2913b600633318e3449e54a8bdeae43d9900c715cbb62d328997cdabcca962b5ef39cc3e41700254f37a742d662ba654b3d4b4f45c7edf2cd0f8f407efea32a1edba3fa78fea3083fdf282fefba24e8f717346c2a4a43a6a6ba4901d1f766615c77cc33df47c77257575dd0880251ff8c9badede42f8c7e21c6fad549d3f19319e0365e72e42d2a9020513fd036f4942a383cfbac217d1e17bf2ac1b0c5f542b6c601392e7619790ebed1ab1d156939352e256a61400a546dfa6e0b5a45111c0fadd439db1ace3a623450bb739b46eee05765357512496ff044d9877fd26daa45f885071b2a966b423d9a86f0a733c92a9bdf9ab23591a83a16d8d8842fe6d09ab56c6c974b027737a37198725ec67e520a6e7a6a7f118182b17f85f2fa6770a1b26a1e98a708e5eb404912c124f0e9df5fe28b4239d553d5408c0f892f18fe0faf1ecf3ef0abcd008417be86d812bfc7f50cb916614be2aa0d62931d2931741365393dd92147b329cefd2769f2cede5c6700199d1068da37f76dff72b9a688963a758c58c619f3984b50bd6f500b75b1609579aa8cd5e6d17cb46eca8ff7a7875de80f81fa3a4d9fc190fd1737ba97671f4e2682e8e8f1440f387d5d76718ecb5eb25d6e607850d60e1576404d0526ce5340351559e239f65d3aa26b8ca908d16ff3a2c1f07e039289168c8d616e5483112784fdcffce74804a2bacfca3f0afe0a45ca216da75eddd711bcf8af198944ed95f72cea77188e0c22895ef0829f3aab9589ba5750c7d2b0a178bafc2c8e353bb85c2cb46d6f39ff00fd9a61ce3425ee8d831ad87d01b40c9fe4272936a414e470a3a49d7d8fb2ef2b8a985a76752917e8aa0ea6f8bd457fb3de48681140457fd08ca6a625e104404542332b62d929b8d4f506033de1ff8754d9b8b0afc3874d6f5c6d761614d6425e47791f2bb647fe54ed7263d7f24d74c7db8dec2a1f6e364a4422f70c12e8fc7d241078472e6994a258296993a9614ebc12792aa1becb4bd6da41bdd459766d7fde4822a3e746290b3114d7fd5dd0b1961a5e4040bc310875b20abf83f855fc49f4f7e20f69f8c9fbfe400d3d924b22b88068d0bcd3c10591d5352fe5d12f2af41c81341c5a73b10ebe687a4f16e9baac93d45ac91676d0890e907d1b0d076e855ece2c2ca5c0fb9d42e2d448b55bb2cc6665afbd433f17a1bfe7774b34dab9e0847904d0e198f7a80db972e828753dc9e8b704436a52359882ee2b7577ee7276b9eb8dfda55c1292217f8718b6a349743f9c23359f96e0a1f9b5f121ece53ec588a6dd2fa1de90a5c7a72c13c87a2ebb3e4af44befb62fe3e4355bbb9945df2170bb9d966479545905f57b748d7610082cf9cf7980a2afae5554ab89ac06a3baf631dc8e4d7efb57653b35682e0d8f015f6a6b242bef40a731efb6f7234b4643c48cdc0531b0792f4cb76e016314a6257b856b64aa1440fa78cdf47a84da1ae143d22ec7ec6d158f9fcfdb886c5b6e9f350c3d9b1467ff5d316d5bf97a54745876cc9f93eb1c796bf4472be13043ce1fd86034bcc8f84214020ca4f621f90330fc3b1234ad1f21f332cf16d93bd3981552e1bd776df8fa582ce01a152069fd07053dfe251b5223cd76c76414ab38fdfc0f52c26c46de31d602f36e694d3a92d884842d34bc2e850b2c9cfc80283f7e084a441c08bccffd6b4bb8fc8326080a09843c7bc882ed03d9d7788ed992a5a28e139d371a9025999ffb397e53b4328c786a83e838fb91f530b7326e6483d5b7969d2bf72cd2070e04f28d987e0b6d5a8605ec57ccec58a36b81319e5b31ce7641b82ae1b27235d904cfca8efb3fba88870de53c317f683197c40204787fe47c00ebc7876a15427843ce06dc298cfb33536cdc86e2489db1f9931bc16105388c100508c797d0c8fd33d04669eff24a7e9b7ef54425064dcb4f80a8d93ec0f09dd5eb42a495b91fd827163a564fd08f10e0d04f195ec08916284679bc18b232045b3dc7cb33922e7ceb8f07206131638aa4e5f418ef56e9d09980516698335f40c1f7f0c377dc56fa0932d493a0ee1d97e872e38ddf147b83bb4e1f8a6e413341438fc57a3f9e9d0be77a622f8ca5bb3701441ed2a32c1f3762502c0a420f4da278f0aca403b71c7a0b140ebc94759839273fb06764d4a003b5876653b15715853fe7ec6fef665b535bd5c6741e6c137c72d8209863ceca5bc9f97dc27e1a0ee7abe4fc45cbdf49b4184cb9cdd875c8e7c07d70810ff010ff1e45a4bb174e66f91d091d757e58e9f4c885c6a9420a6dbfa679000bd286f988b87f57cfef8c37f069f34dc15a70a2007bfe04c66ad372527a7f161aa0cc67874c8cacecea3a766d77d630b066063ca8abdb9155ca661c329e43447dd9fc50ddd08b126a9c69cdfbcfc4d56b6df09065b3d9b5c5f31c882bc29ce9923efce01143c81d7c3b213df13393b9dcf9513da52f5344ad18bbc4a93a21ce39278c89ef4b49cb079ca891bdadcaa2f59723c6b049bfaba283d4826c3826e73ee3f4d206b5c852a482e51b57d0d9cdff4d3cb43a00ab2c9e2ff321a10ac30ca93cfb1af59e54b620f89eafa9c7ecb068b6dc9fdfa99049a638d6fbd44667794e83aca9e568ac913b498cf0918263ce12f82b77dd70795fed2dadb4f37214751a3a200c120391ea50a353d89a212863546187b05a7a79bfe4531eca03282a05c150dad704a2d9c0334858d079a3bf2dadcbc43b31035024307b1d83f7c8125d429359e320aec9648448dc0cd0df825ec818c67714e5dce919d65e810f37b7fae377a88392c8242690e35f2c305c05624cab564ca63b5614b02b4b7e9bc9a0f62f2aafbd794ecb46386925c36f6a11a0334aa8424881e619ab7eec59b26e39836f105cc4c5e864610f117df4eaadd692025900042249b69c79a68b3425d23ea65722449dae966162726a9aa83d60b8c993c99f08e5369c50e076f3c7064edebb7dabf18f88bb0f49fb170f032dbd82ae9afbd2298fe05dc57a9c053d54227331a8db08d4586442ada7d1b3485e3c51cc80703507382b8e9d9726819133226bb087b07fe3213831b5d2addd9764e30fff64b45dbf3643a6b4c9ee12f21ab2797569839427d7cf9da7b441addf06ee16eb139c850952457d6b1e0deb9ce5c57c4e89640f4c1033c0926b18994b0919a846313f3aadb2253d5c0c3ea7e38a5c9ef316e88361b9ea9f7dd0d5031e8f6f81490f58dcbd76d1075e4359ca5620b5c6fcdeebe116da6026a32afce43f1413c1609cc96b9965fc24132c1d9b7f5ba054db25f5673b339c6a4d96cc49d25ae0d233b8e5d51bdd2c6aff587182bf5548a0728cc6f49483ba62b43adc3338a290ee473ec45de04ca05f190869ab5e76711623d4f3836ea2c517c6502444247ce6be195ab565af46d4ad8c083950b6c0833837fd7ed29112b25a815a8ddc3b0b3f482ade18b7b07e4bb416d947f42307746cf4c2cc4d4ecfddd5e58f14fb5acf0ddc79f51600d2f6b1913b271650168efddc6ea2848803b3cbfa2b3009f610a8de109d838c479a92b7e443673251ef595af4804bc6abf90f73a9e2396c626fe6ef3082296e8eee628ff4b29e8c01fcfcabd6ae401522465e95f65460517cf8b5d06b9b4899edfef16e2d00d8909adc87781aace05750d873b2dd8e7ee628cde8fa05d4c9d5f1ee94959c0a557a2f0c039956a191eff505c66d0fb0819a87469f3217d0374528c59509a1bb3292d689f966e970c6c811eacfb165838eb9457135572bb2cc1a0b34dc5c0e6642938979014866ddab494c93e8a61d50d5c5e5792379f26610fcad30caf6f6ea81393a3bbf02d11f0b655517c06f43aed3a3502b8f8902f4d9c3b2d21e4f175a47d059ed61f6a8fa3782fd6f9a36ecb350f90c16f8b0c35eec079c565affbb1da7c9105e0e3a098a9f7e9d66ccc904b75b506e314213ddf451a51d5f37d3e8d5525756eeddad5c07bef67783c4818461e1062ff37cff0d67f154f86822d6a99224a911121ba91bd3f4e87f50a6eb499dca0e2560cb41d96ebbdeaaf61025c81d50f6037d8843d3e0e42b476a5f746b83228d95b38648ce07414c12cb4a72440ef4cfea832c11e4172d94baafa212a87a7df6297045ef54f43a0df0cc7ef3cb71aa399b8861b5c158d4b50869ed5b55feec33f64a6671a0eb24ab3cb9dcde576022c510c587d63d9e086110df518b9f6771df11c8a1ee47a0b2c10f4a06a030d868b8258cb6cb945a988044ebae05a8a0052acde4548ee3a443120c680d6c29166af5de127300bf8c724747cfb0fb4cefa0698ebd669ee1c8510995c2baf3edd71fa778cd2576380d873f901aef3324fb612b3c331d33fb564a2ed6f7c1bf3d1758eaf203c70e56c25fb85013eb63b6d6799278542ef331e33971da1bc9383ed355753a05aa91ee662c5f91419d935eea0b81ae7c741e95f9f83c32bc235379c8d3f641d0436d47563ecd7a1e5c704b6ce4bbdc81e43b3144749f355318781f0be50d14110a62a620aec2e6f4f2025e95e728ecaae1a3ea97589b378df38e0d3f7bfbee27ec5a96fd2ed4d81a9df98801d55c99507bd9d55627f1cd8c4a1d0aa88de884fbc863e16f844e537df93774f3b4c04b021f4446a64885514e9cd2c9fdb7459c6925873ce2b66e27427baab979430717cb88fed9b290dccaf3825f1e5b57b544ad56fce7425f6c9b525fc38d540512a14c26dcd912ef66b89143a0c1aadc01813d7165b8098a5cc587d9deced77605a83335d45c0f4d7c1af4baeb2d299e12eb5b9bf25cbd74bf0ec2e21267a9d718c5789c6b073b94a5542250cd5ddd625bb9cf42076cf4db7e5601197f39541d825c241949dc929cd3f3a5a450326b67c23e9f3c9baf98bf54226c1bf9f6adc8e5cabc98904f4634bca8546977d09fb9f29a75e57d00328cb6fc454dc923c6610c06d3a8e6e6d8d40d41f1a7da7dca6175be4578bef782f0d30e4230cc114495893d5bbad30828827a2631ef6f412d8c786bf1db2c386b329baa5b62cd073e0201c7ed72270bb3ad35c78f8b0f3e93a54a2d406b1b7f37e34c5ef0c71704e1487e07e0839d6c5db05a67332df37b137d1f964707c6fc070ad086385c93d1ebae1c8f156c9be0610f14bb0807c4e92847ff4abe8c3c5a916681c330cf9ba19fc10142ce35bd60dea78f0666f1c10babc03c93c267a9ed8ab2f0d4d199c5838a1f9291a9b9da57a8206289b4604612d4e110c78a9c7b00eef81c238b9a036618776daf4f1dbe77f5b1f86221781f4022fd5efc334d67b6684dff6b4dd98be6b17e1b7656567ec05dac7fb10091339349d4da721790bcd8231cbb01cc399da91eaa9687c4c366b08416f8863474afd6501f302283bca0cdb61d440c8fbb8368c8061cfcd90e698b6bfd7798d1f5e781fc7a6e780132483df1dcb0d81db7f24b0e7350691ec2a7f7520d8fa7474e33380ddda24bb55d71b56f90e253479d94297d47e5f3b40bfb9f4f7be35a01a42bff07e824353dd6f3661def68d9a8ce3a0783d58aefae5e447555fab65855042709761928d93f0cc18b62153d3bd027483ef587647db39c38e641df6b4ae96f3cdae3ec041bdcbb86992ceb5ec5d00ee747a3fb91d02befaf15543e4c5715aa36025826d806d8c60124502e6c4f859b94eeeba8f822383c4eb88ed4ef1c0a7ae436bcc4dac4003762f34bcb265db1e60a2f992ce8c298644ef9d33841947dfa27a1f27430dcf75517fb806fbe2c87145720405af67dd5bd2078b669e0911038de5dccc777b81dc8713a872af6a71eae68676323346f958cb7697260eb2dac9d7a96d7fb53d3f73311a293f1bb65d989b2dba38527a890b42dc05651f55f648e0a594f4a5728eea07a58887748262315227e10a4da5013395af5aed1f4f49e68ec733bfb70406b1afc33e9adce215e2f20898529627ca9b9482f3fc311e5d09db5235a0caf070a27b5e1ad32a6276fd825f2285fe9ce3a3d46eb84e983a57e8cf41b802861841013c3a0a07005488a05c820fe18455a34a9cbbb08dcae1000a49fd74edd5a214828b5e75b2e8d34660f548c138562484a774cb1d1b0d68863bd68dd38c7f9504a2da78220abc73ae1dbee9d6e29681e34fe21c0c3bbc738e3498474c100054fad2d03c017dfad1246f5e61a9d9ac2127ffa931646b1e729dab4e73f1fc785951fcb8d7b021bc2ace36bdbb5321ea2fed43b1ddab732ea41863c3d6ebb8de5e762c2813bc754ad3ead377c338f4c0f1890d06da46fe618c6d68cb7439317b06c50112b4e130909b698403c1911e3fdbd7107da85439811a5809a93f13d028b1c779bc3fd2c3cd551bf2db73b64f89d5ee200fd97307f21feec809b150bd777db3b397c80d6b66eaf9fda62e17c5e9ba5e15b7ab61c981d706ceee4c8003255e7a0ca9c0059d4b2dacb0691435099015014e0d0ebea865e4ebf0d0e8a20c2417419fed6a8e0dd04c17dc0e06c4587c6b0424df12d2e84ce2e890861b1f6496a3f6ece418cf61c2255b6d8c8ed18623de63d5e8b0638132f5468806c5951efa441166f89bad0807a2a4570027d570525b75cb1ba08cf5a9e2bee81a2301e48b39b88becae60ded7a0bae998058cefa91303cec97477ce72e35aec0ffca1a0caa891a8dac23a1cac79c6c0ed7d4922ca6031d0a060f86d5b2d91d7fcbd22dfd8bccad3ba1d022e76bd5ddb5a78bc2b8ff4e6891408e1450856d3aa7a5b19b4c5250892b26b5620a4c981b6409d204e0acab15bc74a766dd7e8a22006187497afccc4ce75694e269be87713f145ddd34d6e31a0e3faf59fc29809b9417543aaba49aa0223c0d363f5d2bde5a58101091e77e245e84960215206be3039c03bf6b6384397b8532bd5ed9fa11bc5302e83bcc7202a6db3cbc4dd1ea3f94273c999139b89326fd91186cf217582cc1889b07e18fe41e0eba369b6ec4ec0f953d1860e5dc18783895366a81d13b0d2a22f36e1f538d3ae49d34a8c6fc284be277b863e3dbf1accb130be14bebd51abd065811a945f13b95fc48a171429972fb86ba7eccf9d76bb1f395234391653f739dad4dfe75036be6861aa1f4363146a32cefa4caf06c0f8d96f02b417416fe68131b3a444350b92cb2920a4222bd8f7e67fae271d0d0d81d01d9338c9136d32db0c667c7eb7bb92309426cc332c418d855d9e4b15023d2842543da98c30e5018ff54bf04608884dab94431ae673501e2d1ef9180fbb4dc087a2b928c69882d6365ef31be1e74c5c864a1a971886eea8ce8c289ce95f1250a230f05af15fd9e24643c95536f249d96057ceba70acd0ecbb58f93bb0c62136537a68581fdc8392dc5a4a973250e0ee0a45aeb1650c4ffca7a2582a736997faa8e8257f981b43476d935ce5de7404af5451bf8d7674e94056f67503987e7acd2dac2f1aec8d7399b793459653d41158aff5da5c20352cad126dcce1925e2b3089e87b9a3d31f6ae5325a7075424d8437e74f1ed7340feada15ea7b204592d08a79e7e0053cfd04e724d5a76029abdcec52b96ee7c78d6fcfe95a8109dd5663b3a0f5eca0ba485eef55ca823b4176ede9d6c471ded30ea4359fcc4bd5883d185ecd18e1a429d580b529c154fa6a0ed932c0d6004fe4915d4e4e6c590d4cf51684ce6a54b6ace99273e57efe12c23e7fd920db96423e5177eee9f6848e0d42fb7d580201c717e28ff3929c7434bd74e77f0392378e3fc051cef754732110820079e7aabd33d859f50f5d604642bcd2193c7773cc23f758708365a910fa094bef2556122ecf72301e70007aebd920c0b07bae0ceb36a16be68c219fad9f381c8547024695a741009f3c963d59c018a40198da2da05f002f4b0b62812beea19688e80a7dd1689508dde7831d94795d54b3412b31e4a235c4445da1a98cf1d564aad1dc63d1112dfaf8eeb4fe8eabaf6a724ced86b3347bdd80eb9ff6c6d20e4b3e3101575ab32e122c844fbc2c1a4af64e5d6efaa39664ad91086d956d74fae8bb803285a63e0f022827510001b6c7f63282ea21436e9ce574562a4228eff52116bb30f7f3ef59c877e31d608dc9dd4cf74113e313f337b1a3b0ec1c93bcc14e4df499da4febbf2d62a1ab3d0c000dcbf8ee0231eadf3b67c50c21f8dc43b9e4ca75886188ab06ea2a659f4c21089694d0f8bd817204a37e4f84d3a8e3276b40cf00a8d485fafdde99da143e81e75529dc5097786b5d7c187ae0c3bbad578329423fd333a29b08f35f4ab4b5b31d8c40a792ddb2d93448e570f75bf36957a4f4cf7e15ef1f7343c2ccd8ab7f594b205425b0cdb08438f66d965ac2f7c03aca97b0f30f64853962cb71ccc183791844f4be542543b0fb3e428b379c8780a93a2233241532e3d57311fd6911a4ee08070973c8a72c994cc00959d80ec7c2f92a1b2ad4d44f9214b4a5b1819e70b16a64b8edc7a7e42593540f5aafcd90bd3b147c5a097ed894dca7c720f172d7c320153b42155f4fa117d099b1f526e6219402fb97a2b55d36b4dab8acc7db751549ba620106526485f88c87882f340f12346770c34003b11333b8eeae31ec3c46dc5a6f52f789ea1f27dba8b447c919e9c7742efe887ed7fa25ccbac8e00160bf45cd6893eba053b0806e553f3cef85c183bcc885c8cba818f622cd40c674ce5da5a52519de319c1dc74d24e97b78b82c87fc8c8f4807d321be830b596ff465a0d1002d781e7ae960f35369fdda4512db9c909ba80e1da02a073e652f319c87576ddbdcc3b94a2d11c6a9878801ae0531a2a4b2dca86425802fe535115079ec7bce6494952c137c2773e5508f6d0d12a3fcfa6d2d8650a89ab99f345bee054a2fbaf14b182b90c9d1080493edf7902de37d5e7105bbcd977e62d41bddfbc6e7ff2168273882dedd0bddb27d2d2b7f2bde3a2705403cd44a2d609a4a8a035107ec79310af92d8647e114c3a21586cb93f8fe209b503a2eb2dadd196f8f732197b8e96011eee4a7005a5360995fe8eabbb6602eaf09525e88d9d01e9b34322fff7389186e99fb7bd8e3dead183fc6b89097079c9490a0ab7a151377da7b53bad6564a1268721f5b98eba00ab0f230a5c45bdba914fb12e22259da3ca0b174318e83596d0914fda6965a388be2e9e69d5dcdb91e233ab42a22238d00d4e4716ed9dc67fc317632f7a507af427161af098bcb013261a00f7342fe11cb99f75cae66803d2a5a</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">当前文章暂不对外可见，请输入密码后查看！</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>os</tag>
        <tag>private</tag>
      </tags>
  </entry>
  <entry>
    <title>os xv6源码解读(操作系统锁)</title>
    <url>/2022/03/26/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os_day6/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">
  <script id="hbeData" type="hbeData" data-hmacdigest="4a9a8827f4ac2d226325d490895294decce264ad6a0ed51be685b9f9c67a3dca">10d79030e8222445804370796b90fca1b3149e2c2a0f36d6b4ea04e548758c213011888078557b2d2cc705a300db97e6ea22f5fdfe31e990ed96180f03236a730358bc0059ae1c5f0770205233eed5a4f303ff03ef1b0e985a8e70518249d2ff596ecc8723d71c685e7f1a75c71ea956b12e6b96aafd0b40fe78b459316e2c8f5e9413fc1f3aa6186793df8cf77c35f75838e6ed26e34249bc4b1ada97581031174ba870cd926ca1e0b12979c5c45b549a46c5c930af942c5783f9a1d1e42c3d3d306a0fdf90ea82e458c91d4eabc5067ae08902896ea92a3102570c1e1da680849d0470eb34aead338e932752fce02df797d984b241be051e048fd6fee19e193614f2fce32fe9ce3a329f73efa24e49fde07054586b79023e03bbda859988d9971286b51430d23525911c640b122e5db318a3bfe672e4683ca92c333aadb77b4934531565d7f30f1e0f22023d78a67b846e0836978e3a9a2becdbb35c94fcaf1a9d57e56f594640fbf30216e44b2603787f3bfde62887808bc8219866cef6e8c9d24009998c600c32380c564a4eab19b3a0386d134af4838b958173411379e31f95b60e2ff769946fe96c13580941dc05c1a1445102df4a79dd7a2aca9f70f269f8400a057775f30954c253723bf069c64cb13cc51534c6f82d77aa62d5fcaa038be57d664d3f5148775f213e2fe18d57fdbdd4edb8e8fe16fe892eeed7c612bccee21d95edfdae364eb4b91d2116c589a35c37fe22111d24630e25f45f695fe4ed9007ae9aba5af10d281c55693f8b644c0e90dd739daf8a008f512569e36b000c0806b86d5ddeadd3acb5c279cd93aa20734d3ce5f8008465016d3d9fb351995a4b804a7dcb5a5d4d30191bd8ba0ae5e840e8eb9a48e61ad6fbdb34023c138c1a11d87d95851bb184dd8a8eaae22c661bc06959521e9e2864473de0921535153c54aa78df80affc7ad60524f7270520380747be331c09d660d5f770230bc705d13e3fbaafcc21614f8091bfd46c5b5b6507a90497ba84434221175d3f357ebe970041ab35076f69b17231ed497cf7b647c816eceb0a7ed09432d02cf897356ee075c39be4ba219acd01c9fc5084b34b4426a2426d4e4d3ad47557f74b3f541ce9209b99b37a110eb7b34046c61df469f30f03d99d566df3623bec22bf4e15a10a0574a85bd35091b828854eac6b702f9d537db314f2fc792366c9503603edc4cc03dd9fb30552244660d396d6b71c0a11611ca13c8c02bcb86bad3a063c768b6c702a9be545bb309f9d865f8dc666cb4ed9580818664e115fb18c3a52277c85101ce9f0692ea5d5d83ac9c6024b84d5629436494c0da7acd8edd5348a041da5cc7eba8171885fc6e31c96bcd342f45b1160ee3b84a95c76a660f14a89b46f476648a48bd719cb7a6fdf56c5e4784490c97d61f9bdd56a44cb873bdaffa98fd9ca115d09aabf804cec14c524732be9ae78c1d053eb9b85100211feb363b96618f627ecf4140e4c567b880683a53ed7ec457190f8f4bed823aa5c143daa4d3e728e49563eb5870b3f2e07d325ae297febe68533cb16406400365395a6a8aa6d340b20d73a9daf7a3a79994baff44e6ad1700759f31c2dec90487df85907354f1c580e21cffab617a048fd2568387bd7e7b4637deb001d13108a9d0960d2dfec265b5dc67eb13ad0c03b6e9fe2e78d24fff323244a0f108cd3e6be2cb32b80d3d5568042ccd49ee9ff261c125062130cd1ab3a410dd03900a3be9eab816327547ed9a2892891eeae2c733c7ad140e71f4af4c3a1d783db9235d4fd5d5b4d9140caeded1b275a2628627a175be42ee870a8a8f401c8a078eb535bd816061efdd599d2fbd8ed92f82cca0aa2130dc664ab34441e402965771f19cd71c1153f07cd63e6e44061a68ac8ccaf1b026865da6342745823857050d8d933495e257222da6f43ed720adaf3d35e4d23b69e5e993b1ed384f12425a7e59f58ac50cf39fbe33c53bc0015c58cbc903cc456a5e5ea7b322c45bdc43e09feb100701eb7d7a0a9d2bd13eb7c3f3d9bbcc3f813b38add5cf080b900fd1a9d23d2f60a121a392198176aab4cd6c3533497d54edf7ad8c4b5fb169c2e2a351c5b2bbacc28330ea29c009bd235b3c4b9df8220c10e02e0cd06367662430b745c46335c8c270ebe2d4bfa7483f0470cbfcc62f2d706a344dbfc58c220c5e4eccb204bd10271b71d8064c083e32333ac8a5e0c7a2770e22c0e27211b66a746f591809945c869537ef871bc7fe6e37a470db862b2ec511395de762805ebd77ea8c53b8c7574242f7cba56e5c44858454d6271bad8a23dc966a55b632bf146adcfdaf8a50d44bd556f3a6f4f4175f3f850d8ad3faaecd62c0dcbf8ada2a4d0223140a01fb4abd64625b70b25a3ea219a0445b659d75a21e41d476b3bdedee9fc06fa3c7d5a77dd2d12dc0824c76783e0011ae9dfe28a3c5cb5eb7a0e7632ed223290d847b7483dca4ca8fb2d25178291316817708505916382e9987f7df9a6c6a9c6d67f70d605e617b94b408e81831ed56c1a1f54c9e7575b9e697aa55fb4a2776abc0b78a486ce63d5aee3e798ffb89097d371631043f6111c1359241092fd5e62d8ff66fba983bc5ea186e107298482799594f64d700cd62eae9994aa95671fdb575bfc1ea8503135cb3547e00bca035f41235d98788c31d68291af287c49098bcad1d136e15d9ce026ed2844d5fe3eab4d3ed19edea6b3eb1b4a9b07932a15eaba401d021bbcaca762afe17ed1ed5540321601d1848350fd916d32d4273bc08ae04d1788336403720292f516d60fea512da338a2b9ee40ada1637e07a120d73cf06c5ea1b404abbc3e0a13d8d8ac858a8af297ddc018ce96ed132454d22727c8fecc438a4f9ce51bc596fb153e36d561f6fae6a90f3b9458c89600ea8479bc952a8d5977a1c7869501f3928e1708f8e5b34e9b9b0467785d6abd40c809922177917231e51b6b2998c83404eb6e53618ef8318fefa646e84fa45c16bdb47f447486ddc447541e4c5b33db6d8fd5f06e448ba3df37c2683280fa551e98c733c9d345304b137ffc16e424ebbf225c1d769dc50db2f9ba74e16aceeb37f8b65c127d0fe5f8ac6ed414d47df8589b8b29a96b67d30c9bd8327fcaeac492147b4ee805772270f3d1f7a8510193f6929bfb6c990270f5970222b491fde2d4f7593f9e3f2b1846baa5a9dacf93f811125fc2b11e16148c3162e9490bfcbcd838b8aa28fd897eec8191444e4d38edd936660782cf4db33a16a5ae0736bbe912a800cbb8dd3cb8b94fbb5367aa9cb6aee12f779d90d4094a2913377fe78341539d8233cc45a3dc30b768ac4f8f3c7ec76f72d90fef08203ef6d44c3fb82dc7fdb2b07147ea8c3ed1348f39e91eee7d5cf4ce2debde215d43071e1ce32e0846dd4a238a2cde1c76d7c651aad6763285af995f9e05f3cedf072e0241171b693b5ba51b51bd83788e1f6a89ed48915ffd3781e2cda3173ac378091d09bf7f62e1c7d505d4dc24c7727898a056d9bea13e98fc375bc05687ffd0ac5dff876ace59d617cc8cca6f24d1fe0abc9af3f9fd7287c07b2894f78000c02cd685d681bedb89f19ab58b09396373092ee0319d5d267b54cc02072e573a8dbed3a69b2f2edda8d46fd5729a084bba2e3123d6c7ec1943e617262e3c133de1707e63c1f0d1f9d80956d1e3370ebc83122cb779e406026c48561eccac6b2377faa04837f71743299f45fcb985de3ac0778966b39b4878039d917fbb1af64834bd07cafc65f5115ca9d41a54cfe87ca686136d7c6e59d30889a57be9d0d183b9fea5ce3f939952183817fe7053a931cfe9d596c589f2808353d1917a0294222b398e8cc971ee46a1f4e6efd98e50f3754c474912042974947862a7d8379156677b6ab583f4be6413135005f9195a6f0c782633b730aeca4dba9a77b89ee40ab41427d31a5904b316bcdf8d8f2452e3e5c21c9cad3ae4783abae92c33e272738a8772e18f0a08888c1af8d103011593d67b6e056a8f9f92b3971fdbd5dbdf02d6995176b18e3c72abf1615b146fec07a36243dce6122fe2470e50dd8fc0aedd1950ce46d48105342d2901e2de32feeccec4e696a98ce281f12304b4e7d89dadc8defea19cd8ee48664a22c682c95f6501f769f947f7e7a9b000713dd9da83ec8d858307b8bb1b2945ae3a6cb301fa4845c1675c418fedec2a1076f32e371a56effac186a6fcd2380f7a10a582cff6bc21b28d8ae4725862b146dbe6a7c0ef6d8f55cc50058babb2e26ac8c1a68dec307b7c9493e487ef00dbc4490994e31441b5a172b6f119aac902c27a93dc1dff0ca25faa13d4ce3407ccae1ea0c99619daeb2c18453a4b6818b5a0f3143339b0b42f352f5bcb1b19ca46465ca1fb85e12ecb975c26d7a8697a9d2bd04cd104bd16bfa2e4c82317834f230eea4f540406fb2fbc680f631098f4d8786f564ab7b9a69644c8c8ac675c8fdb440484ebf987313f2b2308ca01417accb2290fa3bfa4c36cbada04493de1b608af7b5564a40b89946a5d2868081287019af0de2c3875b87a630a69dc9baab7f406821946ca3f02015f5bb250a15b9745332103dcecb0c555ee1da0929f0d704ccd24701044230e6f65ca9b11a260e7dec2545de75b9d880042a5ff8913d984f74ff893bd8fe7b2f944a174de797cb14a54d0b2b34265ecc71ba45a164e854156d4960f11997021ffa1ec1806d9f0f241347b0fb474ea8712875902b570307323abc15e807d3cfeda46b113eac0ef822a5678c41545a8c9cb23dcd307278898f20b46e18864daeb07e4255fe5a0dcbba1696a04eb699fb9850642886f4d50a77655d0d8ab374e04bd59801029ef59585de14203445ea831642d1a17fa5b088dae42122ccf9c0f8d0865aa181552c1e9df5e07badfea666c813265f37473167becd515ef8c923e5448a0cd67087771c449e36ed70d254932aa15cce80d663398b8a0ffb3afa26c1e5256911d364d15426ca6420bf2bae3e5904e55f3b97cbf2995e5ed697098600cb89c8812d72b44139b17698f5018f9e43c441c3e48889f326d3e9f2100a95393cd2dcfa213a529960ef98632f955ad67863735031722dd3a3c08c691fb13c48bc4feb7f71279efe3e9345eb1c82994421010e559e6ea5bef8962fdb0c4b8c039954aecff1fe4813fed45a868b5e308b0cf72e404818c9421d8ff8987f659a4f7d04666db043f6673bbb1ab64fb150fe05f66bd940e59872138236d164868d515156dcde5cd2589a316356eeb9a8c5764816349722e89ab3ce8373920e7c787ae8a6c12a183099e628bc51630772514bd43c55795d79b14a538430b3fdf757a739d21d142caf9dabd3d92c403e66abbc864ecbf1486a55779ef6d926441c13efd83f82c5a5f5f62702ceea758b1d1374023c39157293191fc7ed08b35e8af993906f81aa7168c99005946af67771051e22172629d35576f39aadc3a08b4afbf70ba737f572d27b822c290c0141bd65b063cc1525dbdbaa70ab53cc452d7402fda7e7d750b1aedd3b205dc300f0056e7b7f1271b735c1cc0ce134872b9b6e6aad62fa04f06ee3f8ff124833f2389a83ba2f3d3ec917ea1893cfe2aa0e6e6f7eb0dd7b395c599d9427028b3febd144ea53c7c39096db6c7b98b8253578bde7c7da3500521ce08e439a7bf2b6e35dcd6e72f622fe94af5021b486109a430e8ee51b0efbca51933f50c61027f04c6d504bd252dfa1e1c06a89e1edd399fa86e0579fcd5ceda78846398594cf95e7326e053b355dcd3a40b0dc3</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">当前文章暂不对外可见，请输入密码后查看！</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>os</tag>
        <tag>private</tag>
      </tags>
  </entry>
  <entry>
    <title>os xv6源码解读(操作系统调度)</title>
    <url>/2022/03/26/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os_day7/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">
  <script id="hbeData" type="hbeData" data-hmacdigest="0fe4d7424a9982d4d9fa09b0dec38a3c90fa348de12da1b1344942be65ab93d6">10d79030e8222445804370796b90fca1b3149e2c2a0f36d6b4ea04e548758c2155439d6299057135762aeb6da30282c5c7ef246df515d38038c5a1a8a3b5d59265721c7d99aed975499b4ded7882eb1ec179cbaa8a1bb220236f52e5ad00bae856c055108fbba3f5ebdba1cdbf48d42cc5cbeb18cef682198e25daf827fd30d19422d41ae58869dfba9395a47989e8d254701ac5ebde63bd29a59881627e0ee1d1f6e760a2caefd754b669afbcbf1f77aa187163c41e1d7eab7de7994b0bd0c1196ed9f654a0d606ca33458bb418fd03a853bcf3e74ad28f3b9a78c9e106f8bda02f70b8bc14169bd736051890ee98f3b13049e5b6e739653871f03afa16f9bba0a99b1cf658e86d3fdd3fc5af7e9152061808069378edd4cacb16d542ae05faaf87c4157ac6a903a52ca4ee5589cc490219543d480066f111a0900e17cd3d4eb4d40da1d01f94c6cc9fa7a957b1944a9f5ce60a1370dda12482c88f01daca3f3eee7d0aebe88cc7abdd6ab4d953bff44122b08f80cc53c2e6bd195c4ff0f600cdd8f070765dd8b92ad1e24696c4814b8cc393ccaf7eaaeed0106d20f108c1ad399f230d40736a9dc68be8d9114d76bfacf7d45b9e5c6a9654067f48e1f0df41ae45b03a3ed5ed2a9ec2ef40f19eab6ded822c48b3aea0730a59835527f2dabaf01f623b5404e87bde5b274e37d66d86d59a78681c5cec7d5e7cec5114a98e12472fc58e194b6c7b5d7f1a8c79709fe7692afa75ec98cac6b1665289cc4a30872595707fed5140f239659ffbad30349de77461b3eaad85cf55d34b39cba4ce89ec70b45ac9f922fa48be6b27257379291ebe7d1e4025263d97483b09b50722b7e2d62f03fd36e4d153fe746747fbc47a217548993fa6633234ace690624dd56e917f00f8b8bca978d7adffe45cf6a6226f22bcc53e5f069168a5bc45dac7cb8c01603c30c710f889cdcf99956790aa7ccdc6517ad604aea3cabbd7bcce06a00dde78cd252bda5517b4b5fedb95444dbdbc9a010f693fb4d07410c32872866746f624b712d284ca0c4a1b7e5aa8479d23759a87955c5b2c05f20056da3be59f7fbe6b7c0640c196c5499cb41affeac0088cadf4d1c6007aed09ac8a784e4bc4c71b8211c329efa601d8fe6b8300e250ceae8265d2833561b97a5d5129e9fed0e725609fa5f3d9574ef46e950010e4cbd9fdad6e11aef24b986cfb0e94e0804d6ec3b62da2be069b61126b4e7641e1019d8df9e365f6191a4581a718d620fe01427423bb3b7f5fe1b1182e30f192badf5835d2865bf540c59eaf8616d32c9d01a759a9618c3b5246d8e67e454f5bddaf545c9f50a2b84299a3aef050d6e62823fe1e9a903e3f17b2e411af31564bb602c47f08ec4b73106bf61439efbb7975649e33e59c2b64d6574a944d9204f69c370a2872393824e0380cbd407ca4df9f4c5b4e59afe12a55bb6c86d4094b121b1a3418fdc9faff8ae31eb95f942186a907e6e68ce42dae44c47e2015bdf8f87e129f0bda713408ddac942e17167125a66099e62ce0a82295690dc0f8194151d7f66067fd6be8022ab9948f5816ceefa02e499b9717a50b2cd0439500d0a0970a0e95add837ed90f8b5eef5709edbb203369a45026b428dcfb2db76d6539feb144eb97b9666c9f37cb6643e87b55047bbf4ff2708b9b4ada6547cbc2470f749b36676c9486e05952969d95f7b635a6da598cacba5473efb7d0d55179e670b7ff5c3095a762ec2753ad7528752a16ae4b9fee5d4645c5f5cce3be005fb23c9f24b718b9762ec32ea97f3c70af0fa8dffa6b7db7834d053beb205ff48cdbc5bd3784bea4e2db4600f7aed2193dda40dc4d54be7a5baec6bf25e2ffeda8e1885f445bc9cd8098521342e4f3e848f79c28a2709a0406a8d9f61746fec58bfcd212657d7f5d038172b3a0493141412258ecb74b46e784b5adfbee782f97c898975f4bd562a788c967820256d07c07ac109c689b4e22a0a6d26d4a51583d42a5b8d4834b8d513b7779f2883f0f038ca258bf40636d5ad950962dc7ad14e35cb04bdb8035612cea3e9fc9fb39fff0ef8c057cceb3e0f55fe9ce757a53fbf76af1859767d0fc9c5bbb6e775d969346e4b84c673038a9f7e280dbb8769569fdbb3b2855c21c119ecc2c1462f79611e70b081314f9a24301e3ba37e9a092ff6a2b33c02b2ba264292b4624d30eba09ebc2d56e7db8ffbd4c545c9ed93df747da6fd9e463897550d8e5960385f8b8195fb07d835857012b6a9410aa90002540cd54e2e761c525d720368ff51f71990dc55ec57ccbc38165ead57f2347785f39794b441f7676a37e173252f69c944440aa9499f85e42440b47d42d086171b51a4bd679a1f8094b7c165432789541f77c9ef8521b18d1688aca56c4e5fc605b5275c206b262e2075fc5b12095ad4ea387437a6e6a2e20a8e335274042cf3cf848a73f1652b6ac8fbd771742cddffd306f30c7136146cea9b336bd7a3b58c01a3c43366a69d8c42202efe575b25622c1a85a6f0a559e213f158c09a4c2ac99894af3ee9540dc269e6c433903e18e7156f85996750fa22e7bbf7e166d4e60a00e5be852e2b6d0f499e8965b60a97cb34b3e6b208953e315d5eb5bbf4ce19bdc0458b0c12a49fdb6074c288860647403ecf950e89236c05f121c8f5b7e720ce301c8fe363b56acbdbc9b74ccc8c0ce080a57734cd06299312d6e85195ed66d74dc8b31798b9504b375d733885a536d681e9cbd4954ae4f80349b1c86182454dc1d25d187fa5609e3db004af6b6a1365ec4b66183e293474276420fc164aca7db89682f473d21ef3a3829cc2b2ddb9e66e82b5adbcf90ed342e171aef5fa3580e78bf149313d0e3cd4d564643e8ab590a7aefb0296f2bd512a53c64af66b9155ca1662fe9dd2c901c04ad8e9859baaed6084e3637d021a0971abd2436b2691a18041f277fc129a1a2e90b406c1d04c2f75f42962b02fb5ca0d2fa26d0e3302746f79310a5aada3a0a80814530890b44fc6a072ce683a8b5b4d89b651e24374bfab7d119e5e65c40dfd1485ca0f44b8ca3fb94893eff5198e760f06391fda32b575aa6377fd66dc7dc22b12e0dfdade73cba215975a75ec07813708f47f93c1f295d858759fd54189236f5e12d43f9c1672d74f51d5c7d33c203358a0fb9c23956fe7d83c0d53e22c3c12b29fd2c186af2c55ec6c3cc599661e0daecedc3d5c6ae3000cb97a820309b7c5252ec2992fb25d28612226ca039ce2b2eb7f76a3326fe204431e841e0effde8b7c4479d5a1007bc5409c7d74476649e4aa170b541a607c0e3c2d67bcb6b885cc6fd0dfb86b04bbbe52cdf70eb63a18fbc3f90d2388b2cad9535996c6617fe47bf6443f813b01e010b4be3959d6900f3326b272414b3edecc3c5499e5ef1f65011bd45fd083fe1177670080c8d604821e29a9ef2a8fe5aee9faf8664a886930ec3dfc20bc529ff41cbb845ac54b3dfec01a4f1df2eabf2167fb55114803081c621fd29cb8969a35fd8ff550a0349b2fced91101073a064cdb311c65c958168bc47f0a3314c677a9636e557bf5443c7692e52e77dbb9b796709079ae6b84a345ede1e8015634d6bd205707f98516c7570c614884f35a5d41b1c355773bb0a94d489b796b40728613e8330f714f70f59ab1d4b372748ccf5526f4e3344797aa3fe47868f6d8236ef1c409ae0a7d5b3c692d33987af664d32fc7043776c9a9531135de96f8230ae49f3ef5332f92443b48ec1b6cd914281b65b8f1317a80d41f130181fa7486c74e27f9d97ff5fa77dc2d1608ebc6cd13a2c39629b07cf02850373d4d67f8d87477079c24ad742255f21d4549c2b1c7562498df8a1261c7cc415c6095aafde73ea7994038891e20d1867ac92f8f6b40583cd6ae8aada4e73530bace4ea4335008a4ef5cdb97eeb6e8ddeda1127095ab57b804f0cbfb4025fd54ded284ab75aa2aa5897b42d2f4359b842ea27f1d6b0277f58ece91c8090f463cda44cab88b103058b5273426819aca79d82a460e8bf9c28ab2255aecc67304bdcf6af7e60d9011601518670fb281b371f96ec6adc08b434499d68801fcd847ecfce869f9d82e403661a0a93677cb7de2ce1bb01a17c9033cb8de166eae927b47a8a32535f49634c17e36cddfb93f407776b1708799fa2fe12d5cb664d7c24f93433721b041a6988252a8e856b6e64e071b4f0f46e8dc884b519e202d2e08b7b69586474cc6b988ab5b20862d77025ef07a62bd0cb1281ba49742208a0402c7ee6ac18a30329b3c1be53dc03f8b05a91ef7285b89a6c3040b0ba4828964f63260fd75ceec699270a444e8553a654a367cb531451c668cb523d20882f243bad0e42eba10f63f2ee12b76def7e76109a32c99bebc46a8f35f7d409057574c223ddf746bf455522be34c70258654615f1045d28637d4f778b5794a021c1aee1af636cf0e187aac35760253e28cd0c1004863315bb9048e5c7c98a18804be4026fc51066f3bd406f75971017285b9996178603ed66812a0379b4dcb28131a5b729fbcbb489c587edb5a2e8d976a20c0dc41b3314d0186091b924c7e511a7b19c7b4a6eccdc517134e137fb2934ed057a5d9db691e277adfdb4bf1ca3c485e36266042eecd901541053920bf6213908f09110da896350a89b2065f3c0fea65b7c65fdb2e9867f52df4b187ed55cbb822e07724a9254dcb108b72cf58dad4712e50609268462bc37aa0851f7c8926550b7b50f1949893625d7b10534df5322a9458c05f878b0a5c84ad694719997dec82743141770f85cfad5de67673c3f7b118b1eda67e932a859e760bb0c1ea3fa60c58abbc6d0bcfeda16cfa0a29747d6ac680c69849a55ec087dd97230fa505ac0cac56ef091b4bdce1dcf9d885637fe9ea0503c97521fff904a8ff7a84e141a7d9a796e3aa713c46e5554125bb2ff55cd6ba8c9b674c748eb507993c0b0685660f77a6f6d93a780f0aecac68bced4e22f1f41467403dd6100dc98146db93977fcf5237ef4a923324465fa89f56c18111818d48c53aa964007de47830a36a57d0f111ebb90fb054baf66952cc52a041b9f45a8dfee8e993ae982e41d26958f9960498bd67dfa96ecb434f468d7a79c7d717596fa385c447b19e3788523c8eab0cbb67704d1bbcf1477846abad34d76bb5e6fda52f6570d0caf93ebc5c0075f3d9992d193b10c92315ba99c0d1935245fb87c4af01d4fd63117b17e3f34c1082a6bbf79d7848116629f073ec68ed78aa0d583289a7708851feb7c01f330b1b1322c44333111b326330dc94ffb4ff2f4747a541a87cbdf1ab9914e54f13dc918905c7f1b7e849f6443cbb1fecc41df0fbdcbc252c6b69992e712d1050a8b6a4ceb741465de81c9f1d699d67e21234ce00d1710943314566e3c2b1aa3a7f04e36321c2f6dc96b59185ef442b6d67dff1157d6959da1f568ccbac6e91191479cf97cea0ad6c2668a0f101480f21edb38f3014a84c511ff97a148efcb8be9de3d3c56b0f6e7b13b36ac77b6dfa8e97a392830ebcf3fa206f2302bbcbecaec58f44d8f3f939236d16617cb53a2f4b6ebc12651e885b13696fc3db6919541966b96131c2d60caa2c6a3be0e421b008c27a93de6aadd790c8a1feb75da482c319629819ac10bfd7f7f76ab880b8eb270f6cbd3f1c107e91346e93749a64386adb85f4f7667e2b4e6d9ec4bb656a3cf6dbd943803d19e83e26faf5f4b87f2287987cf31f51c1cc23b88cf613a9b888543c3cf27ddf55264cc5b5c4e9fea8a7bf8088b2c76b5160f5ac2bf0e483e11117060d2fcd3c7b46a35f95b8e51c07f15818571508a681c1086f63a1a546091ceec392e7c0d868a8efa38cca303e00f89f169ba0720d89a3e7f7fe480dc06e3630a27b7bb14c79d90469ec1b80becdcee07dcb702e24ef2c42ca5b8df7c4a5c8fe6b11a73c78f78dfab29cdf2eb7df54acaeb3cc26da1482abce8affb8c184694533e2a79cc006c29b9c044945d96e9bed9ee7477c93260bce32ef7800231cf151952da821f26c2785c33e52b1219e414d432f88aacc0c531a8c5642cc09ba6c0cb5f89d5d391a02a78cd16f95ad7dcf1aaf9791b7ebefc8cacbe4e56badf2c0052385cc49e7610006b4f22dcf2b4b26aabe4f5a215b15cba7f17553dd9a3332c6bae882889477ae4bd31a756a473a0961bda172d474bb00cba8180a784ea7be27a25ddd63d6691f1afe03c2f74e13571ab5f81cd079c27b59c46cf7c5ff0b3082e62df5297c31b46721c98fb2ded2f1e0d86d60e9b02149e53d07d4ee65ae88584ab180cb0e6b92ce967227b674850d9ccf9151d99e9a365e5dee80dba2ea7dff1a4ede81dbfd75b5875171a9dec296e9c3ff9346e16960d128d89c61dd136a720aea2d695adf4bbcd900389ddf00030462c19f8af0cc22650a4bc2e6c56ab348d6aa3c5ef6dc73ccbe9a206abca412befa9a8b5e00efeaa6e01acdc3764044e487b63b02e559dcd7fd492c38097afc760cb3f198af1cc623829d4a4ffd6fda52cfa3014a48a1096713a5ded6ba2adbbb311fad8b86876f12215332223f6b9c59bdcf508f2587987de4ea090ab829795645092349cea36018328e1f15b03abedc109e59741f223eaa68f87362869d299c99fde9977f5d653d251b3e3dfded68b5c1b7cd181f0d51a0ec6bba8ac365143be415062afe592058135733d43c9b01dabb5e332d4d2fc971c7897d05774fde2433150697bbff5bfd08d6869eb4ba4b31dd3ef908986c4d7fdddc95aa36f7b91b93fb52d8c9211082f3f686f6c27f7b50141b0da37d1f814f3bf62b4c8f628981d01d158133a99659241238a3e188189b2338acb94bfdce2c51be102f498c2a4438d287910a9b5fb15db7c9c1a2236f42651483f9e2c8d2d30d2c180146afe1c6e791148093ff1ebbe61b69f5a0ef523ac61a26f066ed937cdf94f70ebe97319d45dda735f778904c9b9b8ec2b46489ab8e4f076f61f8769c32796fd7c76d7a9f313de88aa30b21af405320f11bd6bc97a5f4503f1e45daf8e1c52aa94ebf9a65472ad3688f46f84338b157460b4c232daf1f5e5e704fa12ff28d78b40fd934dad14da8296f5d98f5216d5c0dda680e341c02073513a12b879b9735727135d76d360b39d21db8c15a0eba3957e73a51066f658f13d1ebcbeb422f51f3cab79fcf5e2bae1aaceeaa2759a610fbe2075fec26b4dfd60d969aef576c92260820089f811a70e925ad9b2cebf1be56de22e2408b6ac15b12c1ac138db39dcc1c882c8e8258a4feb7cf541fa5bdeae0a434733fff096ec367ca8dc433fea4802ee94b490cffab11b3ff810d803423810a3d95676816819fa63ced9f47121df5d8fe9eda02de272250175d3f5be03d52295fe6251b38c0d6f4c56ed828a165ec6dd46452952c817f5fcf3c42806e61c08640250e9a5a92c869a90fa2340a8c18f9c8d46518aa523c89e21caa79aecdfcd78eb42ebf6195fb28d50223a7ceeb72d49564134519dddc446f7b0fd9ffba11e0103a2f8eca9da6e042459ad77c3efb38151667e4fd7af7e9f6c814f8b5ede97e5047ac18227ac34a780e095fed4fe4a670e9ac74056f4f8edad9344becca4060e6b57b8c7f27431cee445ce1d256464c25bf35bd3cd4caae68d08c83a4acaec7c5804a31a806fd56ef37d4754513c4d849be6f9fbaa2036c3d6f9c6ecede35911eb2400e57c60204215dd156bada6e7bc35a9756868f27eaced0103258ccd493b5c5698678f5632ce92940446a7b8800c9fb64c66e2f1f5574cab8cd5166f63052d060d0c8f7f2b8675c1f9d59d7af2aa511c952991136eed0ac764d9cf750cfe2729a88a976439550a75abe08cf9af99ae4d9555f3924efe36e106e448dd1cdeb79919835a524d37a3c59b6641f8a2b66ed13eb1511e8636d939f2a012b1ff759949111a9805dd25c7e0832ec95c8ea78a64cb9b84cf90e806cddb5dfc6f8428b1d594a048dba92b569a5b3d3eb2b5aef85ff65e0cb91435ec92910d618e5080bf12703711bf8b25640c38b1923144d5c3b2dff59f726c93b77d5f7fd4874ad1821bd76af01499d0fa8bc981156db2cad14b5a8bf3df1096a8b960a7cff92903a501eeb39de3c8cbc7ea12862a3ca280d0200e10e1c59b7dd80727b906c9876159d297f9416f4a0330cfedba346c96d3c1922668f2a02193bb15d86cbf1f0c0dc8879eb5ca92eb7cfe47b0b2b42e2400183b396203f67847e50bea65c0b36bd9d025d0a7056c7973a1cf5ad955566ec16e99c07bf45c4151efaed16b8243c62d963d1322a8a5b031362490d61deaf8eca7a4b4b8a7dd5ebd506f6f9aebe48f7c9c117a5f6635c215a6259aa7b0f032a14312e5178845fd462b2aad2f7060c3934d2ea72ad3aedbeb84f77dfcc3f805e58fe57e4febf51859367efdbfa715f8ddc2470fe2764711ec689d7ee3f4356950d1c61536d2f024be99523f3bdcbefe42acd2ff4a0b4f1c25e8ae8a5cf9efaf6b4d6358ba892a783ff476ec7f914c6ae1af3d628f2ade3ac5e13da991016690870d8d342c4d2e0a7204944029e0ead9905631d2b538300f8b9aa59aedfa87161ab5bab6977e109bf92a0b0dacce51aa349d2b35d460fc574e2366201c473024bcb0a1169367e7d6396c3a85225b31e0f84bb3e3b5d26317e629755cbe015d80d7177d8d5f508613674260f1a07786e5bfcab8535221bcc87a55bf26aa3355980fb8c96c56df35e377f9471d75557242cbe6d6d0ec7ed88ce6ef850a1df44c7c125090eefca1490bedd1dab52f311f6ec6d5f126169c5c567c5160e10231d844b658cb09283aa3fc9b191c066ced84cec2b05da894fdc937bf749f3d5a40eec9a95713c75973e682e0b5b6c446bcc537e5facf775a86600723b49fc6d76987e2650f003519eedfc7038224dc89588a7631c4bc4dc6a148844eef26f68e221568161aecb22e6ef7bb9f4f69b2ccf941cac6e313bc3dc24e43feb12693ad69233e6413770491df91004c58bf948829eb877efac810c7f9aae1c4f1b72550e57a3630c4ff0080f48f7c67a3c0eb2018d4345e77647814eb9895c0f9a419625a43c780ee8e45289224f65c7f8de6fda4a661f1f6d39cc9585ce8336f5c4bd52f7b7048934800db9e5fb4cf8b15a26a978f4d081c6349d8f443c0068ebdfc215f66dd84e65094cb8c219b2a1597cd3a4af1db01693d486c121334c80b626decbda88acc66cad2321f13439567050791ccda75e5727388669a2e61964fc1b053ed80011f77c3711ddd70fa47b836606fb027c9fa463e208c09ee450081e0777eeb3b90f3a8103e42921115108362651b00f1665f9b3d6c1b310f04582f878c4f2b1faa5be5d7509bf653871fbba83b2fb9338f9bce682d0de394364ad13998297f358f311218045b6dce04c2368b8bacb22db012d1db1ffada614e384f97887e954c90b7a6b229450cad1fa8f2a460685abae124ed4471479d0158746451066379ca4d5b58cd967042fa0f87cc489e600f41e559ba3cf9b3ccde706e3da24f89b9dbb332c453a271944d1d79aa71a9f520cd6acea0dd8e3c755002130d9fa1a96631e0f5bf5b59bf530a41eb95655574eb69ff343b5ff7dde1bceca9a6c9d01d208fdfe59ec4da14b17031dc8895036a38712f5ee9b1ee42c6a15ec4d3a2695417135e9728b34e62080e6a8686b877de61febd7956c90cfc27a995a94ecbe7e0b63e76e55fae067d3b5a1511f25aa522489542d1ca20276951ffa867c1e2ac6eeeefc6d75db73d36ca81105a0d6b0868320f238c8b4ad039ed11597875c02978b847a2f1173fdd67718fec11a2f32d668fb529ca29d7f471791c6a1229314d11e5244b7deb55244f3c1eea8ca9d643a14cb92ede8f1d9eb87229fb2e9ddfddb42bf28a005f0456343b6900bd03ae50950043f9a0d24472bbd52187b218e505112aa6a34215d172b4388d7934c032877ba3dbc9fafc6aad07f6a107510c25b9353c566912e22c7a03df6c4c76f5100e34edc54ffeebca46c942e69ba90d9d068a3fb9b55b5d070405da377e0c67c510d029136b168ac39f1f23a89c4b8f7994babbe2d09cc844737af9341e65bb29f998a3e43f53e322992800d9adde629c65887135158fca37a37d416aec4a8ffecd1652a9dc6140e1ddae047267afc80752e4ab5422ff08178bc32fc2d681d7aaf289be5346ab4e716587721bbb8b90797b0df467b4d821fa5089cb232c8ff4faaa26c9e898cf52d0a21bb9f3e41ee0fc62e3e954f6498a7beb4205a22ad5acf185d244f37322c5f1cb07764ec5e8f049ea9450412636b347a357f38d0a71b3467b49001269efbf0947b504261e3bb68c9940ee178a5a22a4ca0a2e7cfe84871f63294743304bc4ab9786b2328eebc35eebf1711bc438261d916d98c6d7897d85d0f8a0b70291ca690311012f353319555a0b74d2d739caf36b9c9d4aea0d1a0c6972fcfe812f3c08177207fe4f58809f7d2de37aba804a48b1103b0682529c87687f9f8f53256bcb035066e73f4614261570ced44acb800820a29756e89b90c387155a2ff8135106efbb4d1424dba2e1eada5f70934fad67f17d8651248d21a0ce8dd1192b5ff01d2dffbcef0cb652d404c672e6b99c2312ed6fb8375e04702d66bba5b3d65babcda362da1f6fda2093f61f913e10aebd898841e8bc6d7fef62e3fe808720b2ea80f8a8b08e5700611ef1695b9fb145fa44c1a8f12845ae160809ae3db3470273308a57ea9d0a8e3782c354b5f955ff5c69b1e94898a67a82b06bfd91cd1f91bf74d30da5e57112b44f77045fc83b690c221763c4353fa47898b093c660ec7350c4209dfc0b76df0224c7db9ac041572d6f7fb1220549130646657bdd1ca867cef19a44ef623bd2c0f3fa507a19c017874da5317afba52bf256affacaf7480349ea75a5c422c727a86fc6433e414d1934f8772f5bd16e05a2e52fb28ba0cad552114876b1321c4c3007cb88210bf08b14e3bf3ae96c63a344ab897dfc5d0353013c9c70906236e436c8ed664c62dfb4b5899435af7e9d5b694324eaca3bbecb69d9b120527af2da422c50b6f2d13f26fb1f0c67ee1a685658f2127611a36920cac2e34ecfa713306373ab3c43449528c134265ad81f47c687b91f4da5ef66446bc7a529d6a51dd1baf34bdf1804f7eb8ac7e1867ac120b08edee28dd06d49d41b95f6aa4ff78468dd6e91f92efe86f1d0b247800ce1a1d8e01689f76eac5ce55c4c871a0b9f7b80fcbe8f8e10779cf5d8abb090a49e02b7c460e044c796e3c6134bc3c27a64e96bf9b412dbb2c407ad8e20450cce62e3134a568b355f1d94e9fac1a5f3cf3d27f470c148aedebf5341aa7bf11010755b9ec712b72503e2c6fa5520e249f19b6250d484fafe2f849c0f19ee16d1e234135366b215b5561af78dbb3595838762f3f4244c3cd3100f67b23b5b06f1376871834985266c92fe8956d789a49ad2e55cc7591746685f29c3d325c1a8020c808af5eb7b42cf81cb8cf1c83dd77f8d1c6dce19cd1cbd7eaa94f13601f5468ba775e7d151acc0cf6460969652d70102febcde7bdc30e27fef260ced009afd07bee359e697758fe824f0ab29a9d1140c5bbba19edc82b145560ef70daea94a91c991fbfdf89ef2ee3d8</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">当前文章暂不对外可见，请输入密码后查看！</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>os</tag>
        <tag>private</tag>
      </tags>
  </entry>
  <entry>
    <title>os xv6源码解读(操作系统文件系统)</title>
    <url>/2022/03/27/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/os_day8/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉，您输入的密码错误，请检查后重新输入。" data-whm="抱歉, 当前文章不能被校验, 不过您还是可以看看解密后的内容。">
  <script id="hbeData" type="hbeData" data-hmacdigest="2c04f80e5ed8675ba08fd6cb0f89a1da31d6cad04570dd516f8135df0fda20de">10d79030e8222445804370796b90fca1b3149e2c2a0f36d6b4ea04e548758c2155439d6299057135762aeb6da30282c5c7ef246df515d38038c5a1a8a3b5d59265721c7d99aed975499b4ded7882eb1ec179cbaa8a1bb220236f52e5ad00bae8b7e779ac4e7ac37b3da84159682ef8eb823300021d6f60e608af4ee2393c29b5e13c9f2274d54a22ddbb43ff8a9ebfc85f92fd53ac950301c7960d02b7374b0dfa4b8137a7aac7570de68c241176364a43e1135c458e56eb26400eaf889943b7e6fc484d0d70838c47b74bf22aaf58682fb7b66bc2c1c3eb0ee810c3ca2114ac89ce133631312c8ef0e499b445f6e5ab2ce868a948673f6044ef00ce2ed286df1d57407b0a8190e455d577dc8775c94bebb0151de817e3044072ad9f56cf97a1d46a5592a8f8c4dff815036fd6af3484fc41aa5ef065813c45915ec468c18373f56b07eb12c3101dac12811dc90f522269f521665fd9d6172b1b70288b94662e95a20e31371f61a79f0801911e018699f3be5b1d42d966ef319362cb4a2899a6a372f131192b586ecb29b7d8fc1058720db5406a31a62628b6428cd944c3d879aca32291e314fb7824ad4e00ab982fe075da19f34f5948fef4d0ccd36185cec59d67688699b4f63855cfb98bc2049d562608490230b6e52f25f163d204cd7a88ebd1c37609c34d78682149a1fd64c93ded591f715cccca83faeb2399002b1f4b02eeda44c323a1ce062ac51eea38927e6d78ea22f27c88ec39762ca9f4b244155d8d91449bc4447f1358561082fb372fe72144047f2f5233dc2e2f9854dc68439da3157eec598797cfa4728947fb130bc92569e6b0946da150db0d5ba07e7e81752437c595d7be8801728bea2633788c91643bb72ea3171b5c8f50da6e60bac37f13876977de336d527ef849023de37eacbc74350f1c64788035788ef2feaffee47dad3838b50f9a7a596e9e330b57541a0eb1ba4bfa4772e47817f1f2a15021311087df0fa2c6954c5271a1c7cc9e0bfd79269852783b72d9cc77a572146e660133e32e649ae29066c4f6178b06acfada1c8772706f99b24ff9041bfb2d7eda071c49417cb8a2db95b47d0ca99fe71ad7236a4b4f6d7d24b7ccb0e823f0a476813ab694050bcfb29a994ff9a3f273cf9fdf74e3bef899e88a96115c53938874c91957c31c53f27f5fa6235df678733ef8ed18b4a2515ec1a8ae90f669abd6f34624d1453ea1a9c33307bac7afff35e5f345edbae987cbb46b153106225ce94c0b4a9f97c94e5bc458b18a90817536e3241367e003860a823b729444a4a37701c5137c493a038f076806683f04681c3f3bd2d1edb23e8b6b04a0ddb887f789ae20826a35bf3136313c7f01223972186e623e9140352c53f640aa8942948d845f95f80d712e9cd35bc92acca36900247aa65ccc6796717652784452a268811f41dc6065c94a9e538085a272eb80447c655cf5951355679d24847abdb9c03a0ee4b5e7ab8485db92fbff8c03954bc6b10b0cf137ff364962cc837f06a43141fd98b32b9cc94aa150c06dbedcad1c01f727ca5050a8c778ecf3d3a963620b898f16ebb0758e4a79cf2aeab5c3fd2a3683e05d0fc8b88495c5cad93a1788529d81c4271cf8be2452fd9865145b4518d211f70049e395b2cf7964f7aae08c55517633579b56d4d5829b6b6fbe26937d747e385d5058961f8b7ff21f2d1393c773abee7a61a4e36ffabcf9a4f57da86c77809f4437a07ccd203cc394ee0b0ed86e872afa8612b37eb52c14d570ee92a25d797b3681410493b668e9873c3923a843db957da4382bf8a86565ea0f33cd3086fc8eab37678ea470a0fcbe007b633996cf267dbb3aed6203140030f224a1acd6f02b7709e8c359ad36398e99bf70ea617ed3e093545aa697ea12b75f3ca75343f68585e76fd7cecd15716bb996f1c31c59f33778ca751be350f8b3c8eb799d7cd0ee8a30268ba305b63162ee65f45efe94e90e6b6de7d01a1bc49d4938b92f75e822899e2ef1398e4176c9e59a5a6fd5fda7e1a886c695f8b217d1e997d6b0f2e08450afa75926f0da42b915fe046bbe77a568a13a4f31a9917ef1983116fb564c3034002f1a670f717a8b0a50a588e7e05944da954f83717e469dd648161db71fa6c67d1f187081537388e7f71f82f07369aa75aa27b3147f289d7103ac70ac349a8825f455262ae566aa8f44ebbaeb2044bec905081800dad70f2171d483c5218390185dc68e39316605049f0394d05df7fc6e7d7f538c29d330a2d274c21108bba84b1f396da30640e922cd0aa140717a0f43b345e4a2e9705874df1e894de9ecf37f5b960c13ace0f39e3b3f6c1af75ef3edd67fe6961f1123fcf3022b164514cdb2be692221034e2e1b5a1b73a04cfa2651388a775650edfb884339e0baa912a21b9ac3862f1def5f67359366fd8e242d5529c141a72bc35c044fac4338c4cdf0340e664a625aac575006091d94d6971af4be8db74ed955f8027bfb4037150ab16917f32ec9054fa9b9f00e79c79c4a26aa5eb87efaefe2f6218c38013b77f32029544cdd7d26c10f8232d40f16031d806d3d96f0ff1d0833305ee5ffd20df200b3cc1b2422685180bc4b5520af238eebf878d5c444a4d44ca0bfbffbad20bb7b37049a1d425f145170eeaeefc63adea7d87d80f818524c46db022e15c2adabb39dd49ed7c958d0474dd46663b42550e335a3128c34c335ce6829e2d15a647bcb2c7ca88ab3f401140e3a54e72092093e55feb57fd7f4766661eb0563d1bd9915630528dd2d8ba198e21046fe31f5df1eb3acff85a0702651d7cec78ea45ea00430954b810897ebf817f3e9c5678dc4c357f733d811c55c79904384228553b176aed05788887f44e63bc9b84860fe07ce10b3dbfa642691d1e805822fb1d3cc8e361523fef9679307bdcfb3720829705593dc54dfee11dd82908579503c097c0065885a507b4e2f8a8424df7f302f18dc265c418e0ff0791c44f0f9543d716f5142e0e97e9939b30a851ff466dbef2c5e62907a194917773eb61f9111d5d27dcc24808d11057a44507e68114ae0fde925280b904e6e3bf22c5d4d7816b16c87b3e05df2f41a9d342b1a6beb25ff234a9428867be53b669a41bfc4500c4ef774e01151d12ffa79db306938e3984de5e817c6d7595b4e1cf2e53968b25fbad85a86968bff2a27673c1b0549fd87a358c03835bb203c6d98ab82e3d56fe240b23d1a9a19a78a3265e91a869eb8ba61de147706af9b3fec671fd8b5bd313fd167f7169dd21943fc62c7e9ac01068101ae5f024c06e42e9b598a6a098e69ff442fd9f91e736d06886593660caa7ee18c94e110be9e4ee2dcbe7376bfc30aff30bb47e03b7f9dc75e54efb4ff7c9e150c8bfaea46737347a414bbc04363d55bcc50087e4dd2e7ef7c80c97d17d13899c60578690bfe1b475947b0371177bed16fd840fa6197a691e024d725520996a7c9e86b267782b6cfa19d294e29f4114691a34aaa5b36a35e0880431130514ba0cfc8abb95fb96d7e8ce9256c378aede1f88724202538a4be4e9226360f873de2cd177715cc9fb1287176bfec5a727dc18de978d9114498de427f83716beb3454eb88d383fcb6a0618f40ca47d9ab7448191478a2096bd517699ec76ba66ff162be683b5d3437529a09058bbd506344cdb0c4624ffacf678df42d50b8909648b6650114f39156a007816a89aec1dcde116fcec580fc0bcbbefcaf479d90c49199cb239792e92a0e17ddd27e1b7a89ef520c731e1cd430ca1cf4ecd9f0b309876acf12c30e55c56e586e46a3f842b859e18435edd311c42fe2d2225cea38ea332b18867e667067d2c97ad4e8ed3bf65edc9d219f9105cc91c4541f998ccfaab61cbadab9d327b7e99aa91a362e94a8abec669e42dee67b31a31aad065e9c8caaf30c38dca59c52226ecda46839497865f431c292a6ae04c165131e71f24d7e28b3ea56a817cacb51b1fa23a3d14d03eb6ff2231db859ef464873a6f89bd9e244f0fc1cfbf083ca48a350664719c0cfb95499636c1ac0e663703310bcaf766289dcba5d90524afaf927ec1caec5d5c6fe86beeda58db20e4360f0e8ce4a70ff1908f5668e4edb415c5802fd801413ad7eeda1358b9c6acea76f8a77bcd2cd523c75cf901b13a9398c53f5d30ef0cd3f2967fd96dccaa277203fe8e1e4933a7cabdc56da93f442c512e076a320d866c432fbb28817c8d1add3144c88396403d8bf55280f03a70e48829f9aeef43796cb6ca994953734a3fe9e57186cdcb67390d4b6838b66a650deb2dd48d766eacbfea248dce7ab8721298bd6e628c4a96c282622c8ac7e469747471045baa6e13b998059070b403da361e7354abf03d073ae55b8a636e2ee45d8b131a91e9014544acec86997b341e9dd7ace4d646ac4ea3ae755d5b3d6bfe689e3d1189e166791e1d6d73f439341e168c3b81870879a7d8b1a917a1136f422c6066608373a7ef092a44d39d31ef9e9b01379b9517c104bca200e7c57d20187a6670495148c8476a6031633af12f01de5469b32deea953df0b9fa004da20bbcd3c0b891c79337dacb6c87aebb094e111429c21681a39a95d75c19a53caaa9aabf815eb5bc47518fea557c4ffed71bc97c6076cca2892ea7572ea3f46c0a72613d9d429c86ef11c80a3c9a631a9117a597f9aefadc110122f33589c01e75749209c4a6a220da5495aafd330ad432e4b0a1224743f238fbcea7876ef938438c9b4ea466395518bbffc1235fd1e5662505574ba58c1793a7d400b97400500f591ee05cb4915dfc345cd6d28185d1df4d815fa27fe7980783ca4618e26786d5cff5fdce98abbe1d2b60b0396182223908b74b380e52c220b433353f98eb5d6c8d8af3893396bf1e2e63d9c4aa5564596c2a5b52dbb9a47b1b9dac97fc86b3e3deb008dfca131a3a30feaae495b6e60e0bd2b22c290a01b6f2ae869979087f308ff2c43228693fc23daa30087e87fdfd82c5dc3fa4f1c91fdeeb0161e670c7f50e13d104cf33d9d84647b0fc521321469b6e1fe6c15b93ab0f7fa78dc5f014a3338acd7e51cba3ebe7b63a97307deace2a1a6b447dca92b7f1fed7cf6e784262c2e95e0de28f3a66a4b0f4ffc223ea6cf847bc72f6356b2811f4cf8bd4296aace677ea0c178f5ffaee64180bfa6de053f86923aaac03e8a2f425dcb1723032fecc8208c71ec926222c17944655e2d095211a450ada1cd5b29a2cd070e48404313d69009996279e85ac3c547070029405351b94acd6aca977bb6def730323e26e23647264782aedd94f1acd52b01d6c1fa6a9c37d674b055c1e47e33510f5f14a2b9a2e1a58cad87cef6af2fc0ee58e683e28fe7bffe5e59d974dfc81fb54108359989b00ca5ecb9529efeaf8f90400bec369a481e19619a1251dbd0f4fa18d30868f675573d87f573ea2242519380ed6ae0bd2b079644d26b07ccae20e98be422e851fe6111216bdb4d04e730b6d31d1d72a72dc7d50be441b8d0566c7800dc34e2aadce22787ad86841fda0fe3db47d96949394b727292c05cfcde5b6a7c92ce0362e2bd5b06a33dede0cc608c1404633db0492f2e179e97c17f7bfaf186fb96fd7b7cdb597e834e8f5f1c4155ba50e6de0cacc73d39d58dd8b12d41765a18b65389be1d755a9ddb23ab0b7f826aab5d4ab492e5cadf02f8dd14e9773c6dca8619139aa4688350e89e4446ab4a4baad6ab148c18f4146fb54c42fc4c5d136cbdc3f7db6a077373004183cdc2cf4aa9475a6573767cfcd44ffdb1b354420113f8b84d71d958ab5289bd98c988a356c3f83b00607d73471faf412303016c6bd2c5be1623e5e71d22b47e9f48a2c1745c4f94314f8a07e595a58d1117661f06c75409fe134116f6a3e15e575e4d2e5e2fc788f451bdd44e85860a68032d0b3f4a9bab1acebd8cc66b8a9722fde3cb85be52b478d23dc39013be2043dd15532327a6e0977cb2288f0fb15de8d210f29695a8703b74c4e21fddc46d84f1463f588a5b06c1649f616b22ca674e3cbae95ce2a1abb21c4a78954771bd6f284d82bf3fd47dc3586baaa3c7e8fafef3f56cd78c697c838e5deb7ca0c9557cdda27725388d8086036934e663586cfb896398f34c5c5acf8618e599d1ef5be43383239f8d09ef1de12277b76258254974676c8a1c203f6e4b9e58aa0a50c5740f8afbcc959e67ee13d89fa17882efb428f09f23a1e2817007d70918728d82fdb9206a25f816cca9677e548cf73d746cc74f59360cedb5dfcd5588d4ab0b8c38e8985f39d3f93d19a6cb1367b650a0b51733f9e49e4b8d64a69e3938291117702dd006668c68b109f0a7a9de41604a7fdce8525c07159f19b19e1e816600125a919ca46073b8538f6c4def61bd6f35a8508acfd4704849fc10f2734300818d3843c200621d8c8e77f922aabe259bc7555174c7b32374f1c1a422873034c5d5714bcb7828fb32634a9acc588b722593b3b2b90fdefd95427076bd044b60e4ad97d03696df0bec4ceab66bf57f1faf31e11573092c1887b7e8963f1314ca2727ccb5fe76c2c3b2644c3d8e68efe2cf28bb49854c93bf64632762966c02011231dedb374a34d47d4ccc06cf17fb11f7ce3b6c7c47061be4bf3d60e6ec95b8d573524e128319c53750af7cadadd05506eb604de919e6c19c60da6124ab2aac901a67c22f84766ddb9ce6c3f33105a88bf08d92c69285b4497a291cc78a70d88eaadda63e414b1df9b0ee96b9eb67898963e7c90dd9e1a2b870316f59091adee09953ed358ff918427266d426d0db306e3dd2eca2687b0dabe9de318eede2c5ea410befebfb3534372a749de434cc3116f41c5eb594338a2b2183df6ae72ebf0f0547e72a7fed7a5353caf5aa80dcbf4d72b0b40ad6b4796dc602544eea7827a970200497fad0638cfcd0f947ba2d01cd32272ddfa6245a96b66acbd921769adfa9285db880b52dc20750fe778a52d7d8d8d661eff03b492d26b625f35cd3dd81c34a0c848bfd4b6ce480b2789a0afced5ef8f884cbbb01ea8ef8a0df034581dcd2f9d66bca195556f2a9b8fd546d3045fdf7b350d128553ccf8462fb37d02f750cc6032d84f8e181ba6135fbbe986b73c6481b1423090a2adfab7ec54d7a0b85f9064a97db1f24bb00958a7c02e77a863ffa9fb061f97e260660d17f6049afd3b575cafccdb9bce033ec7008c8367e7f7521ac505ae77f0e20eaf5e510548a17d54b46fb835a98456933c850d6e12f89cdadb087c1ea467842107796e491ca64fdbfbfa96eed6b8025bdd95fda851f62f5bbaf0ceb8f0d9b902ff40f8f92ee89b5f17fa8cc8f80bc896e57fe98de2339edb87b38e10d7e8d3615c1afd15b5e7f9b0c854095b81152a5ac21d220b12a7425e6a936cf87e1e4de3097ab7ecdb35ced47a1378952caf63ca0374c46167618c67ab4108f769c90cc95c42460071cf8543b94689a9f1f99f1147866d1df403814a3e6e593b83d4a462924bffaf388a47eb3ca2803898d2f2cf66d9dc749e352b70f5c9e2442566f05f101828eacf7c89c17f449e74d997b778c81ec3d2b4c97c8f5187be37b602cc36f639d60e52bc15faa5f21962150dd930c4605ab088b9dc4535c460e979ca8fb3961ade806d169b204c53948a7f10ab2febc44e7dc53ece7619a23f627fcbba86a7fa87187d49b33a080ed709ab76a8e654b3fb839fbfccdfa62b037360b7916b387f13d78f73acc2726deacd67354b29fc80f986a72090aa78c7adce1bfec100d8c897b834d8f93ec353b636932542ce49429772d25dc4ac26831cfbe14f9f7527e60912a60e0c9b346ee0e029bf283e3620f5284361872a067dec5f3f706f6c0fa2885294030b4087c03acdeb38b6849bcf09e32e37bd79241897f56fee62799ac3f518cd042712e98984f7a0ab773f8c4e2b7894990a503a0597540a3a8f329c48b24d8f19f2c76dcf4313dca281642d4ecf303029f6534621af9b9f5dfcabd542cfc997bd70b58e00fa89c4314c0cfd67a508f0b7859f0293db1bb3f22b00e4b8f5bc81dc5a40c8d0bcf7483aff64624edcdc323309300e3ecca0731a035181027a18e808762892129430493a5b16b6e1bd6da2a9fc3aa82701b0d14523c537f9cb43868f34474b316d88dc6ebb73061ee0960548195200f1aaf2c9dc2fc46c7f73d6e82eca0fe570d1bd763456a0ce78e8f4e8b0acbbda81d507f8c734b74949fcc04541d5633e6d8f5e99d36fc2062c6f422a0d4543c9a183f61f133ed165547ea50f141214882e75d81a037a016bb6aaeb53d3133e3bea09855780cacdd902613037c5d1a69c445fb99c15183dfa27b9dc1b4cb64172f21f90a0f5a78c4014cef6b22e357ca2a24b4faabeaa8df7ab41475cc2a0c18022a5566789730f4039745d3c257b56876fa0d5f9c61371b9e942538abc22463d61dd0e5d5e4d58be9845bf85a63b7d37a3c1eb192d04cc3fd41f7f0a64c3e638f4c8a2f231936f9d63de56ceb896b5989e17d499d4f1393f111ac1b4d3b758619f1ca3ba01721b916a84467d4023527e9d6f13f8c9dfe30bcbfdbb1b1e43935a077945f777329fac91e62c9cae1584a6d00cd521d1f4e4a5e86f923a79165b67d7ea00cb1532932e9c6960a3c1c0146da3f7ccaa6750f17a6d71049175e099783f202cd1c2fc23dd1793f9f42d249388eee2cbabf21080c7b1a4b53ed538e0043d010eb6dd68372edf14983693bfc1509ff22dff6b47d82bbd30f8472b5ac1dacbe67579d732f7f89192edfa87ea70cfaaac5f2aa6ae16b22c86d6ebcc36adc4e5f72a8d08c2a7b1d80a351efb3e2fc5db30b749a2a4866b36c19dbf777ed28d261d0e13a81daf57c54396216d4a4898bebf41f28740b01449898b2f77803adf956c254ad78cef262ff175b33b9437dbba8a914c3156c7f3721a8a1d81c45cb2633fc59a91000af94effa86e96779dc9e4c10452b5cb3767b7bef1028ec94c43a3e2484415984b365cd13fe8298e2f19a7dca3231c3ead6fdd2085b77a8b4738aaecd40da7be3546116c5a5237569fb9cc0b228de2e60d28a0c46a064867fb4fe40253be3e590596e8517f9e4d9edb8a969b1f68c39650da0b62954cfbe04bf6c14447f234465b4c8c496cd29cde5b330b0791702f759669d37aa04e1d08e72f4f1203293adf67bcb8f785db0f21c525ebe309fb73cdaedd5f0a647536d199bff2d59b3e55ee674f07ad32078208e6187cf4d9350c10ffd2731d59f32e0691f10652334140a63283d990d3b669a5409fa96801b53d71a05b302d38c295f5083539c9f8a78ffea2cc4b5ea4ffa26950977a448ce9a48ec977ba20559743341f1dc6379c9199ef94827980c65fa14f1e355bd6b366378251ef1d8ee3d8b6db3dbfa0bde31741b0edf63c910e6fbaa86a6743a3ae708cb5805eda179512970f42b7394c9c663f877271152d0ef55924c8b34d212ad4c5b1781f2551bb390337b576ca890fabfebea820def3bfbc182ddd800b4c23fcb9cc1e7f31a98353ac83687c1a4a626df1cce5152398c9f9020f67eb5b774c1b7986c6ff237644e14ae854fba1b298def014d56bd3025799d44d1b6e54879ed9384fde84be11a6439fcb86e421f3b4c2f94ef77f1d2c2b3efec51c6f9c10eb03474f42901095bdf8d99183738d4fe0fb77b07cbe0aabcc6e291b8cc12966d6616d0468feb8cc768ee0a3423c7a70a1864e4b92f00b87a73d7a7ec9aefd8be8c5ab99e5033ae4582604108afbe1b7fb4577e9bd13c5253d08c42e8915575f864cea61b8e7a4e8bad6e569731043f8bdac456e3c2eec2001c8a342597e564812062841ea902dd85d0ed7689e55fada474e9483d7874692a8600ce61e6727d5c367c9015c8bf5fd12d4a7d7d642530b703734f68b2d034924d4c412804814983293c2eb53e9b0aaf879f7470b0395aef7188531b0d10482ef65e1800d70a329d0a27dfc4c8f01f33ab75154899fbf364f53f9d13da7c6c0bc81e881f1fec16c8502a2a672a72ee1b28952d65565546047b2cb334f425e76fee26e3a80ea1104fb17a8bdcbcd6cc1b1f2b53a88d9b3c8cdd1248110aff523de4639378fb7dd52bf30619229709017d992467721747a871b81c992d5e3939f0d6e92c998187db6421603372be8f82410093e911b48154456abe3877aead41af3dff24402259876a0c643e7709b95955215ef5e8d462efe950e063e69bfe7ea8bab4e00864dae8a2dc9e09035cd75c7703c69e6d02adc0237efbddd7bfe9ca2dd7f6faba30173013e0d2ab9ba11a71dbd824e34cc25b87c037ef7715e8b4a8a7888c27011a7f5c82c7f26dcba5978f2c07f5bc911ccf8d867ecd1b4446774bb9422b1da3694e75587a2c1894db3e0e6ad63d8cc0c872449e18425c2637d218f8b139811fa1b1de064d95445c65464ddaa6f60fc6a7e8f9777b7b600120627f91529f3ac06a7ed517b9a3fda3c3e641cfed750e8a314c174e3b9dac65e5b355d2f1981e4868a9976cda8a42cb0438038f1203c5fa26298b7933ba84c4e1aae57d4468e579bfc1f58db00fe04537b79cc94c4e8d1f5b1f1b5f09e4602b12c8851d010b7a0b066dd6166ded6cbc805283e7b141673522a41f40dcb0732f130164f5bf3611786d7a04820f80ebfbb4055f906169aeb8453d8334930cb019f7622ab0f7c7f0d9c2ea0530a8a3eb42c3b8ffc176eec0abd606bc8f29be031df3e608bb315f654ef47ae81b7806db2a28b40aebaf61b78474c2a717cfd094a7daf05d39dbff21952a2e68951540fe3b64021ab2e0de211fae2992f98fac777f937821893aa612a4e8a37531a67ef899abaec8a155dab3bffd45d5efccfa12e894a096f62a74a30c1e8826956a3127b4ceb12f1c84a0aa0df8cf9479a6ff8b089e0f1925ef075aae9620e58054c18224ff7350fbd642e6a9a59e107387495a03d2d0836a812335002d861ce95fa3d1d657bf973499ee2094d291cdda9eb46ffdda8bda9d00f72be560a4b234faf5c565fe178219b32f17b27ee70cbc4984504a74ecdda9e73ea710c2c22d9f1e2510b5a2fd4832ecdca33182e3f38b44c2ac2ef5050be66632729e436634ed03c724200848880dad27de1de46acc95c54f504741aa0f892ceb552388011f614981f3931eabb07bd2727b6296c019262f333e54c9b4f95185c1165a8795492b563e857f1ef776b80e5c7dce9395d9e3dd5870decb3a62084db0f2ecf00175980b1f9d44b8b14d5261aed0b5bb4e49624417aa11298304eda1359c5611c2bc9ec3b472078c0db8d7cce7f624ec0353f3d215c34b3d6e38366e01e19b9853a0d38de2c5cfebd39d24012c64cad13cf94d744efa1bad16064da210ca135eaad817b1b6ddc26fb3778097b3ce5e41a906327b59f1272e6dcc0215de5ebfda499c927d6bef6fc2707acfb8f7f81285fdf545cf2a920dc520be19c8395e9f6617d5914a34a755bdfd596a8bba804a76d4d8996c14862d1f70f5761f2a4ecb012b69a2e954d9bf5686226139abe95f7b23996f6f5277db8df496b64e9da3a07bb01c7e8eea622e6015dd7948ab038c24339dff2152e5e490fad80c94d2ce7f63e07c7757d55eee7b7773ef88c3b9d7df466acd7b71cff2d22d1612647e4745fc7282175c37d801566b8832df85642ceb63a96217316fe13f97addb911968353dceb6bd79a279f8f236e10146a964c5feb094e743c69cf6c1d872b61954756e80b4f82278759902b8d0c6d22d6b0d1ffb158f08afaa98d6deb15a20087fae5556d2cd3db17ca988906eaa71375f210517af44955b77064504fe12345e8a3dd5503cddd0e6d83fab8984f541cf4dcc09793c75ecd650dda03bcf2b6e957e547b6a734321640ca84a6464322415badb0997b456a727a9f7b00be91510066ef3831a34a9b687079739a4a2c426bdfda3f26d34534d0157b2960891977267e989f185599afddbc1ec6546e435a9be407349b14d49210507b727c3d58af2dc4c74b6c3ee6f8aa9fd922cedcc652fc861eca435ec0124a3b1aa6424766ea74c715b7f5848cc37136084842d78506eb7d31547578dc8dc9a74bfde5af501b9f09fd075d047aa6446c1eeb145cc332a5f1c75c98f06b676acf15d41f6a04b514ef1ce89b482e88ecf880af4ac8c9c0bd56d86fd92005a881393986e98ef77053377869a5c81c4d41d8ee99bf06efcdffb50379cceceb4406faeebce18563456a3d143953507a113d52fe0ea339dbc37493f6b32afa6090c7822809694c99d07b25ee06b31616cb07c6e1fdd2fe4ad09ee4119f12b813a2d21884958a2ddee85153a09ee215410dddaff0b5488d292b184485f95c509003d13e46a1dd119137cf3d6fd2cc93672e71a319e275ef6d57d8504bda16189f08283d5c1f993b9a55ed81b2c1a4874b18e020ccb9d80beea4e6948e0bd050ff68fc82e54dcde0dacbbf7c6db992f8e8a87892cfad537986721e31b3bbed10d8a0180e5705afe196a4dc9c2126857f9c9e81490195a2daafb12ae8b37f24ab8af27db9359fbfae6260def418f4a1d82f4009472430fad352d2aceb5aaadf8e182ea9d26d25747803eb45ad9c461ed905aa0162cae6f20ba4e10402528dcbebe7aa309a818393edb7b4330809a66fa57de36672b7bf18581d1c23518592356f44c78cfdc5f5e86b5165e9536cb002bde02f29572e544e1d5144b984111ae3264c84fe3584a23529276b612d733a1a8e6308484fb4781f838b2e0fec05a92ce74378846c854d84991ad528953e02f739a3efbfae433d75f0faba74b43063620fefd4ffb3ebe27f4c1891f56246355dbd934ec640c9e0efa1ad60a3dbfb7f7009dcbf56d77982615412171eaf71df3351f67500f7cc194c9c26bb2734ffcde4a9bbbb43dda5e05357bf83914c1b5001cbb81c00cf26b6bc98d7d814fc8aea82df633bb2290b8238238f0b8da4389a95f52752a17ca8f20d7e9b2457fd2a31ab3862aecca01c2d1328bcc2aa37c82e8c7b42caf642eede2093c84297e72035c81d19d58b2539abf3dcab7ad15f2b902fbea9e265d67d2bbefe27b0039de1d6fa10f9ff8e56316bfa827407dd559a179f8276ab67890dc6be72f74babdec6755ae5170a9eb9b201d9240c1233379312d56ed616295f4b9742fb2ef4e379239fc93a6a0630c2aa8c4d1d628c3071864d95c0280091421f29fa58aa7aa03852ee29fda2fc9b4593b6cbef2e978a93960aca076e23719dc20c76786ab43c611688038a03e7332aa50e714cb36ff4f77925ddbc280fee0144d3b7a6f13aae8911cd78dbfcf51c5a2fd5d4b2022a109610bd632f9d38885e2368edd39f7f5238a8d4a2715c6edaa06b6fe644cf0ec372e29980deb915f50b989d09901f41ffbbd9470da532fe40cf7ccb810a727530350b5ef8f8311cb361b72f2e782cc23af6ea43df0f43a0782717c6b4d7e55df1ba441246694ad7bdf7973bbb45906529387d28894f47d26378ae0305c6b7a9e47035b4732a8faab0843a13b09e63c33d226ffc6489253a3885cfc7b0d0b43fcf7908c11ff2bf80a1d3e9d39605e66c27c1de545284872676ea035ffa4f5b5a5a16de7aa0cab03a9198c97216f7f5a8bb105f7ae915f6917c724334d5a592b96d2ab7174d9170de43e50fc3413fd45c2441c3f94eab63ddcca7467a3a580d1062702809d88a05cdd4ffcc8ef97c5d6f43393ffd414a18582eefe24c2f2b01d770c1b8a3431eebe6c7977236ea10204e4bdce328669e81163f9ffddb36bc30cd269c17c4f6a5947b029a468e2eabd33e5aa9d7f0a8fcdc33ff6696e3043209a3054a66c026a11e5876277f69d6de9042db1d23fbde4fff1f7c36061f3d19fbefccdd69f0eb3059f98203e193d503185257c83ca70009d250151c56353ddc89bdc6b8456ba58dd80cf0775e1ba53b3b8cba7985505f5caed9822b6d3d8be7a2ccc5abaef3145434537137917b6ce4b112b702f4b14567d42bcbf515eb86027ff4b6a7b3fac1cb0d3f5d8db3530ac98c76abed7136d3a23b7a9bde6363f06d7104951717fb87abd41240bd46d58245affcf3bbc98d1eca63347708acff84001fb0dee4fba3e3ed8d28a5d96e780d03a24697e25b5b353b5da42f65d1d854048e88978556c92ecf4d78002aa152807f319446370275241286bb06da2b9076e14f06775d4edf26519d6ed3ee65df85c22fae31aea0b58c488aae518c28763a25c1cb37130c694e6add1c5148bc5e921a8bab073ab0b95d56658b35363def3b769d00fbec30112a91b4603aaf1dd8a9402db9df956a052b8730d8bbf8a03160fd121c95f927f72cf242e283b6fbca86a96e79bb28f0e623adbc0c5f66471064f29d57a8fcac5eb2ac145cefcdaf587c9dc206fb11dc2cb159a9ef48e9e48f5431bce1d431b5dc2366efaa9aa194f1e771e7de6381c760108a5eef70434a86c8b91cf0498158fbccce59b3b7ee9c8a2cc575b24cdec7dc72a67a4743c23db842e31b3a244df0f7f12922858a7f5ec11cad48a64d40b83cdcdd3c2deb1bd465640c5c4261a6c773d3e2055eea0ae9de1415b532f1a7b56164fa96bbcf6183944f324a2369834262e4b4bc4c2d58f72b914255a6e6f1ed5b3a147cdd553e0a97b7eac85a4e419fcd8a6821096bfafe0df86c885e38c84dc01a11afa2ea0990640e640d398e855e6ac3c07e630cb227e63620ef860c067a36914a25ddc9a815ddf03ada8ef900849b1b8dae8bfbd27ccc9fb65e3a7fdd1f3891ee0cc034280c59ce6a070ebec6853d0a781d00734c7f423e02cc984d4485a0cd4d2ed5a37607be9134e49b941e70d9d880ce3d8315e0a13560de515850657c16341ab87051fb015557dc1eacf2b6f98c9d4bcb26659dc03e8618a1dd078c594e1ac609aa401e7a39c7c28f7fea694da941e1aad085a0</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">当前文章暂不对外可见，请输入密码后查看！</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>操作系统</category>
      </categories>
      <tags>
        <tag>os</tag>
        <tag>private</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编第一天</title>
    <url>/2022/02/08/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96_Day1/</url>
    <content><![CDATA[<h2 id="1-General-Purpose-Registers"><a href="#1-General-Purpose-Registers" class="headerlink" title="1. General Purpose Registers"></a>1. General Purpose Registers</h2><p>1.1. 32bit寄存器为4bytes，即xxxxh。</p>
<p>1.2. 以32位寄存器eax举例，内部还有低16bit[ax]，在ax内还分为高八位ah与低八位al</p>
<p>1.3. 对于64bit-Processors，将前面的e改成r或删去最后的D</p>
<p><a href="https://imgtu.com/i/H1pd6e"><img src="https://s4.ax1x.com/2022/02/08/H1pd6e.png" alt="寄存器" style="zoom: 80%;" /></a></p>
<p>1.3. 之所以为general purpose register，作用如下：</p>
<p><a href="https://imgtu.com/i/H19F1O"><img src="https://s4.ax1x.com/2022/02/08/H19F1O.png" alt="H19F1O.png"></a></p>
<h2 id="2-计算地址偏移量"><a href="#2-计算地址偏移量" class="headerlink" title="2. 计算地址偏移量"></a>2. 计算地址偏移量</h2><p>example:  08F1:0100的实际地址为08F10+0100=09010，即起始地址*16</p>
<p>？可能是由于地址范围大，需要用更少的位数表达更大的地址</p>
<h2 id="3-汇编程序的一般格式"><a href="#3-汇编程序的一般格式" class="headerlink" title="3. 汇编程序的一般格式"></a>3. 汇编程序的一般格式</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.386</span><br><span class="line">.model flat, stdcall</span><br><span class="line">.stack 4096</span><br><span class="line">ExitProcess PROTO, dwExitCode:DWORD</span><br><span class="line"></span><br><span class="line">.data</span><br><span class="line">; declare variables here, ; leads comment</span><br><span class="line">COMMENT !</span><br><span class="line">	;multi-lines comments</span><br><span class="line">!</span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">	; write your code here</span><br><span class="line">	INVOKE ExitProcess, 0</span><br><span class="line">main ENDP</span><br><span class="line"></span><br><span class="line">; insert additional procedures here</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>

<h2 id="4-汇编的常见元素"><a href="#4-汇编的常见元素" class="headerlink" title="4. 汇编的常见元素"></a>4. 汇编的常见元素</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; 进制</span><br><span class="line">h hexadecimal</span><br><span class="line">d decimal</span><br><span class="line">b binary</span><br><span class="line">o octal</span><br><span class="line"></span><br><span class="line">; 操作</span><br><span class="line">stc ; set carry flag, no operands</span><br><span class="line"></span><br><span class="line">inc eax ; register</span><br><span class="line">inc myByte ; memory one operand</span><br><span class="line"></span><br><span class="line">add ebx, ecx ; register register</span><br><span class="line">sub myByte, 25 ; memory constant</span><br><span class="line">add eax, 36*25 ; register constant-expression</span><br></pre></td></tr></table></figure>

<h2 id="5-一个简单汇编例子"><a href="#5-一个简单汇编例子" class="headerlink" title="5. 一个简单汇编例子"></a>5. 一个简单汇编例子</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TITLE add and subtract</span><br><span class="line"></span><br><span class="line">.386</span><br><span class="line">.model flat, stdcall</span><br><span class="line">.stack 4096</span><br><span class="line"></span><br><span class="line">ExitProcess PROTO. dwExitCode:DWORD</span><br><span class="line">DumpRegs PROTO</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">	mov eax, 10000h	; eax = 10000h</span><br><span class="line">	add eax, 40000h ; eax = 50000h</span><br><span class="line">	sub eax, 20000h ; eax = 30000h</span><br><span class="line">	call DumpRegs</span><br><span class="line">	INVOKE ExitProcess, 0</span><br><span class="line">main ENDP</span><br><span class="line">END main</span><br></pre></td></tr></table></figure>

<h2 id="6-汇编过程"><a href="#6-汇编过程" class="headerlink" title="6.汇编过程"></a>6.汇编过程</h2><p><a href="https://imgtu.com/i/H1Pq9P"><img src="https://s4.ax1x.com/2022/02/08/H1Pq9P.png" alt="H1Pq9P.png"></a></p>
<h2 id="7-数据类型"><a href="#7-数据类型" class="headerlink" title="7. 数据类型"></a>7. 数据类型</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; integer</span><br><span class="line">BYTE, SBYTE ; 8bit unsigned and signed</span><br><span class="line">WORD, SWORD ; 16it</span><br><span class="line">DWORD, SDWORD ; 32bit</span><br><span class="line">QWORD ; 64bit</span><br><span class="line">TBYTE ; 80bit integer</span><br><span class="line"></span><br><span class="line">; real</span><br><span class="line">REAL4 ; 4byte IEEE short real</span><br><span class="line">REAL8 ; 8byte long</span><br><span class="line">REAL10 ; 10byte extended</span><br><span class="line"></span><br><span class="line">; define variables</span><br><span class="line">val1 BYTE &#x27;A&#x27;</span><br><span class="line">val2 SBYTE +127 ; largest signed byte</span><br><span class="line">list1 BYTE 10, 20, 30, 40 ; list</span><br><span class="line">str1 BYTE &quot;enter your name&quot;, 0 ; null-terminated</span><br><span class="line"></span><br><span class="line">; 如果想实现回车，需要在末尾加入0dh,0ah</span><br><span class="line">; 0dh = carriage return</span><br><span class="line">; 0ah = line feed</span><br><span class="line">; 一个是回车，一个是换行</span><br><span class="line"></span><br><span class="line">; Using DUP operator</span><br><span class="line">var1 BYTE 20 DUP(0) ; 20 bytes, all equal to 0</span><br><span class="line">var2 BYTE 20 DUP(?) ; 20 bytes, uninitialized</span><br></pre></td></tr></table></figure>

<h2 id="8-小端法与大端法"><a href="#8-小端法与大端法" class="headerlink" title="8. 小端法与大端法"></a>8. 小端法与大端法</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">little endian order means least significant to low memory address</span><br><span class="line">big endian order is the opposite</span><br><span class="line"></span><br><span class="line">val1 DWORD 12345678h</span><br></pre></td></tr></table></figure>

<h2 id="9-Symbolic-Constants"><a href="#9-Symbolic-Constants" class="headerlink" title="9. Symbolic Constants"></a>9. Symbolic Constants</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; calculating the size of a byte array</span><br><span class="line">list BYTE 10, 20, 30, 40</span><br><span class="line">ListSize = ($ - list)</span><br><span class="line">; if it&#x27;s a word, listSize should be divided by 2</span><br><span class="line"></span><br><span class="line">; EQU Directive that can&#x27;t be redefined</span><br><span class="line">PI EQU &lt;3.1416&gt;</span><br><span class="line">pressKey EQU &lt;&quot;press any key to continue..&quot;,0&gt;</span><br><span class="line">.data</span><br><span class="line">prompt BYTE pressKey</span><br><span class="line"></span><br><span class="line">; TEXTEQU Directive that can be redefined</span><br><span class="line">continueMsg TEXTEQU &lt;&quot;Do you wish to continue (Y/N)?&quot;&gt;</span><br><span class="line">rowSize = 5</span><br><span class="line">.data</span><br><span class="line">prompt1 BYTE continueMsg</span><br><span class="line">count TEXTEQU %(rowSize * 2)</span><br><span class="line">setupAL TEXTEQU &lt;mov al, count&gt;</span><br><span class="line">.code</span><br><span class="line">	setupAL</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>汇编</category>
      </categories>
      <tags>
        <tag>汇编</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编第Ⅹ天</title>
    <url>/2022/02/22/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96_Day10/</url>
    <content><![CDATA[<h2 id="1-concept"><a href="#1-concept" class="headerlink" title="1. concept"></a>1. concept</h2><h4 id="1-1-Compilation"><a href="#1-1-Compilation" class="headerlink" title="1.1    Compilation"></a>1.1    Compilation</h4><p>translation from one language to simpler and more low-level one.</p>
<p>for example, C to assembly language.</p>
<span id="more"></span>

<h4 id="1-2-Compiler"><a href="#1-2-Compiler" class="headerlink" title="1.2    Compiler"></a>1.2    Compiler</h4><p>the program that does the translation is known as compiler.</p>
<h4 id="1-3-Preprocessor"><a href="#1-3-Preprocessor" class="headerlink" title="1.3    Preprocessor"></a>1.3    Preprocessor</h4><p>produce input to compilers and perform the following functions</p>
<p>Macro inclusion</p>
<p>File inclusion</p>
<p>Rational preprocessor</p>
<p>Language extension</p>
<h4 id="1-4-Assemblers"><a href="#1-4-Assemblers" class="headerlink" title="1.4    Assemblers"></a>1.4    Assemblers</h4><p>assembly code is passed to an assembler for further processing</p>
<p>Relation?</p>
<p>Assembly code is mnemonic version of machine code</p>
<p>names are used instead of binary codes for operations</p>
<p>names are also given to memory address.</p>
<h4 id="1-5-Loaders-and-Link-Editors"><a href="#1-5-Loaders-and-Link-Editors" class="headerlink" title="1.5    Loaders and Link-Editors"></a>1.5    Loaders and Link-Editors</h4><p><a href="https://imgtu.com/i/HvgTXj"><img src="https://s4.ax1x.com/2022/02/21/HvgTXj.png" alt="HvgTXj.png"></a></p>
<h4 id="1-6-编译程序和解释程序"><a href="#1-6-编译程序和解释程序" class="headerlink" title="1.6    编译程序和解释程序"></a>1.6    编译程序和解释程序</h4><p>编译程序先将程序翻译再执行，即先编译后运行，独立分开的过程。</p>
<p>解释程序接受某个语言的程序并立即运行，适合交互</p>
<h4 id="1-7-Syntax-Tree"><a href="#1-7-Syntax-Tree" class="headerlink" title="1.7    Syntax Tree"></a>1.7    Syntax Tree</h4><p>make Operations into a hierachical structure.</p>
<p><a href="https://imgtu.com/i/Hv2LKH"><img src="https://s4.ax1x.com/2022/02/21/Hv2LKH.png" alt="Hv2LKH.png"></a></p>
<h4 id="1-8-Symbol-Table"><a href="#1-8-Symbol-Table" class="headerlink" title="1.8    Symbol-Table"></a>1.8    Symbol-Table</h4><p>it’s a data-structure</p>
<p><a href="https://imgtu.com/i/HvhVZd"><img src="https://s4.ax1x.com/2022/02/21/HvhVZd.png" alt="HvhVZd.png"></a></p>
<h4 id="1-9-句型与句子"><a href="#1-9-句型与句子" class="headerlink" title="1.9    句型与句子"></a>1.9    句型与句子</h4><p>句型仅仅要求v -*&gt; w; 句子要求v -*&gt; w 且 w $\in V_T^*$ </p>
<p>因此，句子也是句型。</p>
]]></content>
      <categories>
        <category>汇编</category>
      </categories>
      <tags>
        <tag>汇编</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编第二天</title>
    <url>/2022/02/08/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96_Day2/</url>
    <content><![CDATA[<h2 id="1-Direct-Memory-Operand"><a href="#1-Direct-Memory-Operand" class="headerlink" title="1. Direct Memory Operand"></a>1. Direct Memory Operand</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">var1 BYTE 10h</span><br><span class="line">.code</span><br><span class="line">mov al, var1</span><br><span class="line">mov al, [var1]</span><br></pre></td></tr></table></figure>

<h4 id="1-1-mov-instruction"><a href="#1-1-mov-instruction" class="headerlink" title="1.1 mov instruction"></a>1.1 mov instruction</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">count BYTE 100</span><br><span class="line">wVal WORD 2</span><br><span class="line">.code</span><br><span class="line">	mov bl, count</span><br><span class="line">	mov ax, wVal</span><br><span class="line">	mov count, al</span><br><span class="line">; 需要控制大小</span><br></pre></td></tr></table></figure>

<p>为解决以上需要控制大小的问题，引入了以下两种操作：</p>
<ol>
<li>movzx 用0填补空缺</li>
<li>movsx 用1填补空缺</li>
</ol>
<h4 id="1-2-xchg-instruction"><a href="#1-2-xchg-instruction" class="headerlink" title="1.2 xchg instruction"></a>1.2 xchg instruction</h4><p>至少有一个register</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">var1 WORD 1000h</span><br><span class="line">var2 WORD 2000h</span><br><span class="line">.code</span><br><span class="line">xchg ax, bx</span><br><span class="line">xchg var1, bx</span><br><span class="line">xchg ah, al</span><br></pre></td></tr></table></figure>

<h2 id="2-Direct-Offset-Operands"><a href="#2-Direct-Offset-Operands" class="headerlink" title="2. Direct-Offset Operands"></a>2. Direct-Offset Operands</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">arrayB BYTE 10h, 20h, 30h, 40h</span><br><span class="line">.code</span><br><span class="line">mov al, arrayB+1 ; al = 20h</span><br><span class="line">mov al, [arrayB + 1] ; al = 20h</span><br></pre></td></tr></table></figure>

<h2 id="3-addition-and-subtraction"><a href="#3-addition-and-subtraction" class="headerlink" title="3. addition and subtraction"></a>3. addition and subtraction</h2><h4 id="3-1-inc-and-dec"><a href="#3-1-inc-and-dec" class="headerlink" title="3.1    inc and dec"></a>3.1    inc and dec</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">	myWord WORD 1000h</span><br><span class="line">	myDword DWORD 10000000h</span><br><span class="line">.code</span><br><span class="line">	inc myWord	;1001h</span><br><span class="line">	dec myWord	;1000h</span><br><span class="line">	inc myDword ;10000001h</span><br><span class="line">	</span><br><span class="line">	mov ax, 00FFh</span><br><span class="line">	inc ax ; ax = 0100h</span><br><span class="line">	mov ax, 00FFh</span><br><span class="line">	inc al ; ax = 0000h</span><br></pre></td></tr></table></figure>

<h4 id="3-2-add-and-sub"><a href="#3-2-add-and-sub" class="headerlink" title="3.2    add and sub"></a>3.2    add and sub</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">	var1 DWORD 10000h</span><br><span class="line">	var2 DWORD 20000h</span><br><span class="line">.code				; ---EAX---</span><br><span class="line">	mov eax, var1	; 10000h</span><br><span class="line">	add eax, var2	; 30000h</span><br><span class="line">	add ax, 0FFFFh	; 3FFFFh</span><br><span class="line">	add eax, 1		; 40000h</span><br><span class="line">	sub ax, 1		; 4FFFFh</span><br></pre></td></tr></table></figure>

<h4 id="3-3-neg-instruction"><a href="#3-3-neg-instruction" class="headerlink" title="3.3    neg instruction"></a>3.3    neg instruction</h4><p>to reverse the sign of an operand</p>
<h4 id="3-4-flags"><a href="#3-4-flags" class="headerlink" title="3.4    flags"></a>3.4    flags</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; zero flag (ZF), when ans = 0, ZF = 1</span><br><span class="line">; sign flag (SF), When ans &lt; 0, SF = 1</span><br><span class="line">; carry flag (CF), when ans generates an unsigned value that&#x27;s out of range.</span><br><span class="line">; overflow flag (OF), change above unsigned to signed</span><br><span class="line">; parity flag (PF), when the number of &#x27;1&#x27; is even, PF = 1</span><br><span class="line">; auxiliary carry flag(AF), when a carry out of bit3 to bit4, AF = 1</span><br><span class="line"></span><br><span class="line">overflow flag changes when two positives or negatives add together.</span><br></pre></td></tr></table></figure>

<h2 id="4-Data-Related-Operators-and-Directives"><a href="#4-Data-Related-Operators-and-Directives" class="headerlink" title="4. Data-Related Operators and Directives"></a>4. Data-Related Operators and Directives</h2><h4 id="4-1-offset-operator"><a href="#4-1-offset-operator" class="headerlink" title="4.1    offset operator"></a>4.1    offset operator</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; example of offset</span><br><span class="line">.data</span><br><span class="line">bVal BYTE ?</span><br><span class="line">wVal BYTE ?</span><br><span class="line">dVal BYTE ?</span><br><span class="line">dVal2 BYTE ?</span><br><span class="line">.code</span><br><span class="line">mov esi, OFFSET bVal	; ESI = 00404000h</span><br><span class="line">mov esi, OFFSET wVal	; ESI = 00404001h</span><br><span class="line">mov esi, OFFSET dVal	; ESI = 00404003h</span><br><span class="line">mov esi, OFFSET dVal2	; ESI = 00404007h</span><br></pre></td></tr></table></figure>

<h4 id="4-2-PTR-Operator"><a href="#4-2-PTR-Operator" class="headerlink" title="4.2    PTR Operator"></a>4.2    PTR Operator</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">myDouble DWORD 12345678h</span><br><span class="line">.code</span><br><span class="line">mov ax, myDouble	; error</span><br><span class="line">mov ax, WORD PTR myDouble	; loads 5678h</span><br><span class="line">mov WORD PTR myDouble, 4321h; saves 4321h</span><br><span class="line"></span><br><span class="line">.data</span><br><span class="line">myDouble DWORD 12345678h</span><br><span class="line">,code</span><br><span class="line">mov al, BYTE PTR myDouble	; AL = </span><br><span class="line">mov al, BYTE PTR [myDouble + 1] ; +1是按byte加的, 与array区分开来</span><br></pre></td></tr></table></figure>

<h4 id="4-3-LENGTHOF-Operator"><a href="#4-3-LENGTHOF-Operator" class="headerlink" title="4.3    LENGTHOF Operator"></a>4.3    LENGTHOF Operator</h4><p>计算元素的个数，而非字节数</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">byte1 BYTE 10,20,30</span><br><span class="line">array1 WORD 30 DUP(?), 0, 0</span><br><span class="line">.code</span><br><span class="line">mov ecx, LENGTHOF array1 ;32</span><br></pre></td></tr></table></figure>

<h4 id="4-4-SIZEOF-Operator"><a href="#4-4-SIZEOF-Operator" class="headerlink" title="4.4    SIZEOF Operator"></a>4.4    SIZEOF Operator</h4><p>计算的字节数大小</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">byte1 BYTE 10,20,30</span><br><span class="line">array1 WORD 30 DUP(?), 0, 0</span><br><span class="line">.code</span><br><span class="line">mov ecx, SIZEOF array1 ;64</span><br></pre></td></tr></table></figure>

<h4 id="4-5-LABEL-Directive"><a href="#4-5-LABEL-Directive" class="headerlink" title="4.5 LABEL Directive"></a>4.5 LABEL Directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">dwList LABEL DWORD</span><br><span class="line">wordList LABEL WORD</span><br><span class="line">intList BYTE 00h, 10h, 00h, 20h</span><br><span class="line">.code</span><br><span class="line">mov eax, dwList</span><br><span class="line">mov cx, wordList</span><br><span class="line">mov dl, intList</span><br></pre></td></tr></table></figure>

<h2 id="5-Indirect-Addressing"><a href="#5-Indirect-Addressing" class="headerlink" title="5. Indirect Addressing"></a>5. Indirect Addressing</h2><h4 id="5-1-使用-来间接寻址"><a href="#5-1-使用-来间接寻址" class="headerlink" title="5.1 使用[]来间接寻址"></a>5.1 使用[]来间接寻址</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">val1 BYTE 10h, 20h, 30h</span><br><span class="line">.code</span><br><span class="line">mov esi, OFFSET val1</span><br><span class="line">mov al, [esi]</span><br><span class="line">inc esi</span><br><span class="line">mov al, [esi]</span><br><span class="line">inc esi</span><br><span class="line">mov al, [esi]</span><br></pre></td></tr></table></figure>

<h4 id="5-2-使用PTR来确定"><a href="#5-2-使用PTR来确定" class="headerlink" title="5.2 使用PTR来确定"></a>5.2 使用PTR来确定</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">myCount WORD 0</span><br><span class="line">.code</span><br><span class="line">mov esi, OFFSET myCount</span><br><span class="line">inc [esi] ;error: ambiguous</span><br><span class="line">inc WORD PTR [esi] ;ok</span><br></pre></td></tr></table></figure>

<p>example</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">arrayW WORD 1000h, 2000h, 3000h</span><br><span class="line">.code</span><br><span class="line">mov esi, 0</span><br><span class="line">mov ax, [arrayW + esi]</span><br><span class="line">mov ax, arrayW[esi]		;alternate format</span><br></pre></td></tr></table></figure>

<h4 id="5-3-Index-Scaling"><a href="#5-3-Index-Scaling" class="headerlink" title="5.3 Index Scaling"></a>5.3 Index Scaling</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">arrayB BYTE 0,1,2,3,4,5</span><br><span class="line">arrayW WORD 0,1,2,3,4,5</span><br><span class="line">arrayD DWORD 0,1,2,3,4,5</span><br><span class="line">.code</span><br><span class="line">mov esi, 4</span><br><span class="line">mov al, arrayB[esi * TYPE arrayB]</span><br><span class="line">mov ax, arrayW[esi * TYPE arrayW]</span><br><span class="line">mov eax, arrayD[esi * TYPE arrayD]</span><br></pre></td></tr></table></figure>

<h4 id="5-4-pointers"><a href="#5-4-pointers" class="headerlink" title="5.4 pointers"></a>5.4 pointers</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">arrayW WORD 1000h, 2000h, 3000h</span><br><span class="line">ptrW DWORD arrayD ; ptrW DWORD OFFSET arrayD an alternate format</span><br><span class="line">.code</span><br><span class="line">mov esi, ptrW</span><br><span class="line">mov ax, [esi]</span><br></pre></td></tr></table></figure>

<h2 id="6-JMP-and-Loop-Instructions"><a href="#6-JMP-and-Loop-Instructions" class="headerlink" title="6. JMP and Loop Instructions"></a>6. JMP and Loop Instructions</h2><h4 id="6-1-JMP-Instruction"><a href="#6-1-JMP-Instruction" class="headerlink" title="6.1 JMP Instruction"></a>6.1 JMP Instruction</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">top:</span><br><span class="line">	.</span><br><span class="line">	.</span><br><span class="line">	jmp top</span><br></pre></td></tr></table></figure>

<h4 id="6-2-Loop-Instruction"><a href="#6-2-Loop-Instruction" class="headerlink" title="6.2 Loop Instruction"></a>6.2 Loop Instruction</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">	mov ax, 0</span><br><span class="line">	mov ecx, 5</span><br><span class="line">L1: add ax, cx</span><br><span class="line">	loop L1</span><br></pre></td></tr></table></figure>

<p>关注ecx寄存器，当其为0时退出</p>
<h4 id="6-3-Nested-Loop"><a href="#6-3-Nested-Loop" class="headerlink" title="6.3 Nested Loop"></a>6.3 Nested Loop</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">count DWORD ?</span><br><span class="line">.code</span><br><span class="line">	mov ecx, 100</span><br><span class="line">L1:</span><br><span class="line">	mov count, ecx</span><br><span class="line">	mov ecx, 20</span><br><span class="line">L2:	.</span><br><span class="line">	.</span><br><span class="line">	loop L2</span><br><span class="line">	mov ecx, count</span><br><span class="line">	loop L1</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>汇编</category>
      </categories>
      <tags>
        <tag>汇编</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编第三天</title>
    <url>/2022/02/08/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96_Day3/</url>
    <content><![CDATA[<h2 id="1-Stack-Operation"><a href="#1-Stack-Operation" class="headerlink" title="1. Stack Operation"></a>1. Stack Operation</h2><h4 id="1-1-Runtime-Stack"><a href="#1-1-Runtime-Stack" class="headerlink" title="1.1    Runtime Stack"></a>1.1    Runtime Stack</h4><ol>
<li>top的地址大于buttom的地址</li>
<li>受两个register管控，ss（stack segment）、esp（stack pointer）</li>
</ol>
<h4 id="1-2-Push-Operation"><a href="#1-2-Push-Operation" class="headerlink" title="1.2    Push Operation"></a>1.2    Push Operation</h4><p><a href="https://imgtu.com/i/H10nZ8"><img src="https://s4.ax1x.com/2022/02/08/H10nZ8.png" alt="H10nZ8.png"></a></p>
<p>减4，即4*8=32，再÷4=8，即剩余8位，正好32位。乘8是因为1byte=8bit</p>
<h4 id="1-3-Pop-Operation"><a href="#1-3-Pop-Operation" class="headerlink" title="1.3    Pop Operation"></a>1.3    Pop Operation</h4><p>add n to esp, 2 or 4 depends on the attribute of the operand</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">push esi</span><br><span class="line">push ecx</span><br><span class="line">push ebx</span><br><span class="line"></span><br><span class="line">mov esi, OFFSET dwordVal	; display some memory</span><br><span class="line">mov ecx, LENGTHOF dwordVal</span><br><span class="line">mov ebx, TYPE dwordVal</span><br><span class="line">call DumpMem</span><br><span class="line"></span><br><span class="line">pop	ebx</span><br><span class="line">pop exc</span><br><span class="line">pop esi</span><br></pre></td></tr></table></figure>

<h2 id="2-defining-and-using-procedures"><a href="#2-defining-and-using-procedures" class="headerlink" title="2. defining and using procedures"></a>2. defining and using procedures</h2><h4 id="2-1-creating-procedure"><a href="#2-1-creating-procedure" class="headerlink" title="2.1    creating procedure"></a>2.1    creating procedure</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sample PROC</span><br><span class="line">	.</span><br><span class="line">	.</span><br><span class="line">	ret</span><br><span class="line">sample ENDP</span><br><span class="line"></span><br><span class="line">; EXAMPLE: SUM OF PROCEDURE</span><br><span class="line">SumOf PROC</span><br><span class="line">	add eax, ebx</span><br><span class="line">	add eax, ecx</span><br><span class="line">	ret</span><br><span class="line">SumOf ENDP</span><br><span class="line">COMMENT !</span><br><span class="line">    mov eax, 10</span><br><span class="line">    mov ebx, 20</span><br><span class="line">    mov ecx, 30</span><br><span class="line">    call SumOf</span><br><span class="line">    WriteDec</span><br><span class="line">!</span><br></pre></td></tr></table></figure>

<h4 id="2-2-Call-and-Ret-Instruction"><a href="#2-2-Call-and-Ret-Instruction" class="headerlink" title="2.2    Call and Ret Instruction"></a>2.2    Call and Ret Instruction</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">main PROC</span><br><span class="line">	00000020 call MySub</span><br><span class="line">	00000025 mov eax, ebx</span><br><span class="line">	.</span><br><span class="line">	.</span><br><span class="line">main ENDP</span><br><span class="line">MySub PROC</span><br><span class="line">	00000040 mov eax, edx</span><br><span class="line">	.</span><br><span class="line">	.</span><br><span class="line">	ret</span><br><span class="line">MySub ENDP</span><br></pre></td></tr></table></figure>

<h4 id="2-3-USES-Operator"><a href="#2-3-USES-Operator" class="headerlink" title="2.3 USES Operator"></a>2.3 USES Operator</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ArraySum PROC</span><br><span class="line">	push esi</span><br><span class="line">	push ecx</span><br><span class="line">	.</span><br><span class="line">	.</span><br><span class="line">	pop ecx</span><br><span class="line">	pop esi</span><br><span class="line">	ret</span><br><span class="line">ArraySum ENDP</span><br></pre></td></tr></table></figure>

<p><a href="https://imgtu.com/i/H1Im1x"><img src="https://s4.ax1x.com/2022/02/08/H1Im1x.png" alt="H1Im1x.png"></a></p>
<h2 id="3-linking-to-an-external-library"><a href="#3-linking-to-an-external-library" class="headerlink" title="3. linking to an external library"></a>3. linking to an external library</h2><p><a href="https://imgtu.com/i/H17fDf"><img src="https://s4.ax1x.com/2022/02/08/H17fDf.png" alt="H17fDf.png"></a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">include Irvine32.inc</span><br><span class="line">.code</span><br><span class="line">	mov eax, 1234h</span><br><span class="line">	call WriteHex</span><br><span class="line">	call Crlf</span><br></pre></td></tr></table></figure>

<h2 id="4-64bit-assembly-programming"><a href="#4-64bit-assembly-programming" class="headerlink" title="4. 64bit assembly programming"></a>4. 64bit assembly programming</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ExitProcess PROTO</span><br><span class="line">WriteHex64 PROTO</span><br></pre></td></tr></table></figure>

<h2 id="5-boolean-and-comparison-instruction"><a href="#5-boolean-and-comparison-instruction" class="headerlink" title="5. boolean and comparison instruction"></a>5. boolean and comparison instruction</h2><p>AND, OR, XOR, NOT,</p>
<h4 id="5-1-Using-Bit-Mapped-Sets"><a href="#5-1-Using-Bit-Mapped-Sets" class="headerlink" title="5.1    Using Bit-Mapped Sets"></a>5.1    Using Bit-Mapped Sets</h4><p>like bit vectors</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; set complement</span><br><span class="line">mov eax, SetX</span><br><span class="line">not eax</span><br><span class="line">; set Intersection</span><br><span class="line">mov eax, SetX</span><br><span class="line">and eax, SetY</span><br><span class="line">; set Union</span><br><span class="line">mov eax, setX</span><br><span class="line">or eax, setY</span><br></pre></td></tr></table></figure>

<h4 id="5-2-Test-Instruction"><a href="#5-2-Test-Instruction" class="headerlink" title="5.2    Test Instruction"></a>5.2    Test Instruction</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">test al, 00000011b</span><br><span class="line">jz ValueNotFound</span><br><span class="line">; neither bit0 and bit1 is set</span><br></pre></td></tr></table></figure>

<h4 id="5-3-CMP-Instruction"><a href="#5-3-CMP-Instruction" class="headerlink" title="5.3    CMP Instruction"></a>5.3    CMP Instruction</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; nondestructive subtraction of source from destination</span><br><span class="line">mov al, 5</span><br><span class="line">cmp al, 5 ; zero flag is set</span><br><span class="line"></span><br><span class="line">mov al, 4</span><br><span class="line">cmp al, 5 ; carry flag is set</span><br></pre></td></tr></table></figure>

<h2 id="6-Conditional-Jumps"><a href="#6-Conditional-Jumps" class="headerlink" title="6. Conditional Jumps"></a>6. Conditional Jumps</h2><p>jumps based on specific flags, equality, unsigned comparisons, signed comparisons</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; JB, JC jumps to a label if carry flag is set</span><br><span class="line">; JE, JZ jumps to a label if zero flag is set</span><br><span class="line">; JS jumps to a label if sign flag is set</span><br><span class="line">; JNE, JNZ jump to a label if zero flag is clear</span><br><span class="line">; JECXZ jumps to a label if ECX equals to zero</span><br><span class="line">; Example BT Instruction</span><br><span class="line">; copy bit n to the carry flag</span><br><span class="line">; Task: jump to label L1 if bit 9 is set</span><br><span class="line"></span><br><span class="line">bt ax, 9</span><br><span class="line">jc L1</span><br></pre></td></tr></table></figure>

<h2 id="7-Conditional-Loop-Instruction"><a href="#7-Conditional-Loop-Instruction" class="headerlink" title="7. Conditional Loop Instruction"></a>7. Conditional Loop Instruction</h2><h4 id="LOOPZ-and-LOOPE"><a href="#LOOPZ-and-LOOPE" class="headerlink" title="LOOPZ and LOOPE"></a>LOOPZ and LOOPE</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; if ecx &gt; 0 and ZF = 1, jump to destination</span><br><span class="line">LOOPE destination</span><br><span class="line">LOOPZ destination</span><br><span class="line">; if ecx &gt; 0 and ZF = 0, jump to destination</span><br><span class="line">LOOPNE destination</span><br><span class="line">LOOPNZ destination</span><br><span class="line"></span><br><span class="line">; Example</span><br><span class="line">.data</span><br><span class="line">array SWORD -3,-6,-1,-10,10,30,4-,4</span><br><span class="line">sentinel SWORD 0</span><br><span class="line">.code</span><br><span class="line">	mov esi, OFFSET array</span><br><span class="line">	mov ecx, LENGTHOF array</span><br><span class="line">next:</span><br><span class="line">	test WORD PTR [esi], 8000h</span><br><span class="line">	pushfd</span><br><span class="line">	add esi, TYPE array</span><br><span class="line">	popfd</span><br><span class="line">	loopnz next</span><br><span class="line">	jecxz quit</span><br><span class="line">	sub esi, TYPE array</span><br><span class="line">quit:</span><br></pre></td></tr></table></figure>

<h2 id="8-Conditional-Structures"><a href="#8-Conditional-Structures" class="headerlink" title="8. Conditional Structures"></a>8. Conditional Structures</h2><h4 id="8-1-Block-Structured-IF-Statement"><a href="#8-1-Block-Structured-IF-Statement" class="headerlink" title="8.1    Block-Structured IF Statement"></a>8.1    Block-Structured IF Statement</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if (op1 == op2)			</span><br><span class="line">	x = 1;					</span><br><span class="line">else						</span><br><span class="line">	x = 2;					</span><br><span class="line">.code</span><br><span class="line">	mov eax, op1</span><br><span class="line">	cmp eax, op2</span><br><span class="line">	jne L1</span><br><span class="line">	mov x, 1</span><br><span class="line">	jmp L2</span><br><span class="line">L1: mov x, 2</span><br><span class="line">L2:</span><br></pre></td></tr></table></figure>

<h4 id="8-2-Compound-Expression-with-AND"><a href="#8-2-Compound-Expression-with-AND" class="headerlink" title="8.2    Compound Expression with AND"></a>8.2    Compound Expression with AND</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if (al &gt; bl) and (bl &gt; cl)</span><br><span class="line">	x = 1;</span><br><span class="line">; one implementation</span><br><span class="line">	cmp al, bl</span><br><span class="line">	ja L1</span><br><span class="line">	jmp next</span><br><span class="line">L1:</span><br><span class="line">	cmp bl, cl</span><br><span class="line">	ja L2</span><br><span class="line">	jmp next</span><br><span class="line">L2:</span><br><span class="line">	mov x, 1</span><br><span class="line">next:</span><br><span class="line"></span><br><span class="line">; the other implementation</span><br><span class="line">	cmp al, bl</span><br><span class="line">	jbe next</span><br><span class="line">	cmp bl, cl</span><br><span class="line">	jbe next</span><br><span class="line">	mov x, 1</span><br><span class="line">next:</span><br></pre></td></tr></table></figure>

<h2 id="9-Creating-IF-Statement"><a href="#9-Creating-IF-Statement" class="headerlink" title="9. Creating IF Statement"></a>9. Creating IF Statement</h2><h4 id="9-1-Runtime-Expression"><a href="#9-1-Runtime-Expression" class="headerlink" title="9.1    Runtime Expression"></a>9.1    Runtime Expression</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.if eax &gt; ebx &amp;&amp; eax &gt; ecx</span><br><span class="line">	mov edx, 1</span><br><span class="line">.else</span><br><span class="line">	mov edx, 2</span><br><span class="line">.endif</span><br><span class="line"></span><br><span class="line">; if 自动生成相反的命令jmp</span><br><span class="line">.data</span><br><span class="line">result DWORD ?</span><br><span class="line">.code</span><br><span class="line">mov ebx, 5</span><br><span class="line">mov eax, 6</span><br><span class="line">.if eax &gt; ebx</span><br><span class="line">	mov result, 1</span><br><span class="line">.endif</span><br><span class="line"></span><br><span class="line">	mov ebx, 5</span><br><span class="line">	mov eax, 6</span><br><span class="line">	cmp eax, ebx</span><br><span class="line">	jle @c0001</span><br><span class="line">	mov result, 1</span><br><span class="line">@c0001:</span><br><span class="line"></span><br><span class="line">; you can also prefix one of your register with the SDWORD PTR operator.</span><br></pre></td></tr></table></figure>

<h4 id="9-2-repeat-directive"><a href="#9-2-repeat-directive" class="headerlink" title="9.2    .repeat directive"></a>9.2    .repeat directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; Display integers 1 - 10</span><br><span class="line">mov eax, 0</span><br><span class="line">.repeat</span><br><span class="line">	inc eax</span><br><span class="line">	call WriteDec</span><br><span class="line">	call Crlf</span><br><span class="line">.until eax == 10</span><br></pre></td></tr></table></figure>

<h4 id="9-3-while-directive"><a href="#9-3-while-directive" class="headerlink" title="9.3    .while directive"></a>9.3    .while directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov eax, 0</span><br><span class="line">.while eax &lt; 10</span><br><span class="line">	inc eax</span><br><span class="line">	call WriteDec</span><br><span class="line">	call Crlf</span><br><span class="line">.endw</span><br></pre></td></tr></table></figure>















]]></content>
      <categories>
        <category>汇编</category>
      </categories>
      <tags>
        <tag>汇编</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编第四天</title>
    <url>/2022/02/09/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96_Day4/</url>
    <content><![CDATA[<h2 id="1-Shift-and-Rotate-Instruction"><a href="#1-Shift-and-Rotate-Instruction" class="headerlink" title="1. Shift and Rotate Instruction"></a>1. Shift and Rotate Instruction</h2><h4 id="1-1-Logical-Shift-vs-Arithmetic-Shifts"><a href="#1-1-Logical-Shift-vs-Arithmetic-Shifts" class="headerlink" title="1.1    Logical Shift vs Arithmetic Shifts"></a>1.1    Logical Shift vs Arithmetic Shifts</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; logical shift fills with 0</span><br><span class="line">; arithmetic shift fills with 1</span><br><span class="line"></span><br><span class="line">; SHL Instruction perform a logical left shift to fasten multiplication</span><br><span class="line">shl reg, imm8</span><br><span class="line">shl mem, imm8</span><br><span class="line">shl reg, cl</span><br><span class="line">shl mem, cl</span><br><span class="line"></span><br><span class="line">mov dl, 5</span><br><span class="line">shl dl, 2	; 5 * 2^2 = 20</span><br><span class="line"></span><br><span class="line">; SHR Instruction perform a logical right shift to fasten division</span><br><span class="line">mov dl, 80</span><br><span class="line">shr dl, 1</span><br><span class="line">shr dl, 2</span><br><span class="line"></span><br><span class="line">; SAL is identical to SHL</span><br><span class="line">; SAR perform a arithmetic shift</span><br></pre></td></tr></table></figure>

<p><a href="https://imgtu.com/i/H8oazn"><img src="https://s4.ax1x.com/2022/02/09/H8oazn.png" alt="H8oazn.png"></a></p>
<h4 id="1-2-Rotation-Instruction"><a href="#1-2-Rotation-Instruction" class="headerlink" title="1.2    Rotation Instruction"></a>1.2    Rotation Instruction</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; ROL Instruction no bits are lost</span><br><span class="line">; ROR Instruction is as above</span><br></pre></td></tr></table></figure>

<p><a href="https://imgtu.com/i/H87D5F"><img src="https://s4.ax1x.com/2022/02/09/H87D5F.png" alt="H87D5F.png"></a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; RCL Instruction copy the most significant to CF and CF to least significant</span><br><span class="line">; RCR Instruction reverse the RCL Instruction</span><br></pre></td></tr></table></figure>

<h4 id="1-3-SHLD-Instruction-shift-left-double"><a href="#1-3-SHLD-Instruction-shift-left-double" class="headerlink" title="1.3    SHLD Instruction(shift left double)"></a>1.3    SHLD Instruction(shift left double)</h4><p><a href="https://imgtu.com/i/HGidSI"><img src="https://s4.ax1x.com/2022/02/09/HGidSI.png" alt="HGidSI.png"></a></p>
<p><a href="https://imgtu.com/i/HGiImT"><img src="https://s4.ax1x.com/2022/02/09/HGiImT.png" alt="HGiImT.png"></a></p>
<h4 id="1-4-SHRD-Instruction"><a href="#1-4-SHRD-Instruction" class="headerlink" title="1.4    SHRD Instruction"></a>1.4    SHRD Instruction</h4><p>just the reverse version of SHLD</p>
<h2 id="2-Multiplication-and-Division-Instruction"><a href="#2-Multiplication-and-Division-Instruction" class="headerlink" title="2. Multiplication and Division Instruction"></a>2. Multiplication and Division Instruction</h2><h4 id="2-1-MUL-Instruction"><a href="#2-1-MUL-Instruction" class="headerlink" title="2.1    MUL Instruction"></a>2.1    MUL Instruction</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mul r/m8</span><br><span class="line">; mul instruction multiplies an 8-, 16-. 32-bit operand by either AL,AX,EAX</span><br></pre></td></tr></table></figure>

<p><a href="https://imgtu.com/i/HGkRs0"><img src="https://s4.ax1x.com/2022/02/09/HGkRs0.png" alt="HGkRs0.png"></a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">val1 WORD 2000h</span><br><span class="line">val2 WORD 100h</span><br><span class="line">.code</span><br><span class="line">mov ax, val1</span><br><span class="line">mul val2	; DX:AX = 0020 0000h, CF = 1</span><br><span class="line"></span><br><span class="line">mov eax, 12345h</span><br><span class="line">mov ebx, 1000h</span><br><span class="line">mul ebx	; EDX:EAX = 00000000 12345000h, CF = 0 </span><br><span class="line">; CF indicates whether the upper half has significant digits</span><br></pre></td></tr></table></figure>

<h4 id="2-2-IMUL-Instruction"><a href="#2-2-IMUL-Instruction" class="headerlink" title="2.2    IMUL Instruction"></a>2.2    IMUL Instruction</h4><p><a href="https://imgtu.com/i/HGVFVf"><img src="https://s4.ax1x.com/2022/02/09/HGVFVf.png" alt="HGVFVf.png"></a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov al, 48</span><br><span class="line">mov bl, 4</span><br><span class="line">imul bl ; AX = 00C0h, 0F = 1, because AH is not a sign extension of AL</span><br></pre></td></tr></table></figure>

<h4 id="2-3-DIV-Instruction"><a href="#2-3-DIV-Instruction" class="headerlink" title="2.3    DIV Instruction"></a>2.3    DIV Instruction</h4><p><a href="https://imgtu.com/i/HGZFyR"><img src="https://s4.ax1x.com/2022/02/09/HGZFyR.png" alt="HGZFyR.png"></a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov dx, 0000h ; clear dividend, high</span><br><span class="line">mov ax, 8003h</span><br><span class="line">mov cx, 100h</span><br><span class="line">div cx ; AX = 0080h, DX = 0003h</span><br><span class="line"></span><br><span class="line">.data</span><br><span class="line">dividend_hi QWORD 00000208h</span><br><span class="line">dividend_lo QWORD 33300020h</span><br><span class="line">divisor QWORD 00010000h</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">mov rdx, dividend_hi</span><br><span class="line">mov rax, dividend_lo</span><br><span class="line">div divisor</span><br></pre></td></tr></table></figure>

<h4 id="2-4-Signed-Integer-Division"><a href="#2-4-Signed-Integer-Division" class="headerlink" title="2.4    Signed Integer Division"></a>2.4    Signed Integer Division</h4><p><a href="https://imgtu.com/i/HGuzRS"><img src="https://s4.ax1x.com/2022/02/09/HGuzRS.png" alt="HGuzRS.png"></a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; CBW, CWD, CDQ Instructions</span><br><span class="line">; CBW extends AL to AH</span><br><span class="line">; CWD extends AX to DX</span><br><span class="line">; CDQ extends eax to edx</span><br><span class="line"></span><br><span class="line">mov eax, 0FFFFFF9B</span><br><span class="line">cdq		; EDX:EAX = FFFFFFFFFFFFFF9Bh</span><br><span class="line"></span><br><span class="line">; example</span><br><span class="line">mov al, -48</span><br><span class="line">cbw</span><br><span class="line">mov bl, 5</span><br><span class="line">idiv bl</span><br></pre></td></tr></table></figure>

<h2 id="3-Extended-Addition-and-Subtraction"><a href="#3-Extended-Addition-and-Subtraction" class="headerlink" title="3. Extended Addition and Subtraction"></a>3. Extended Addition and Subtraction</h2><h4 id="3-1-adc-instruction"><a href="#3-1-adc-instruction" class="headerlink" title="3.1    adc instruction"></a>3.1    adc instruction</h4><h4 id="3-2-extended-precision-addition"><a href="#3-2-extended-precision-addition" class="headerlink" title="3.2    extended precision addition"></a>3.2    extended precision addition</h4><h4 id="3-3-sbb-instruction"><a href="#3-3-sbb-instruction" class="headerlink" title="3.3    sbb instruction"></a>3.3    sbb instruction</h4><h4 id="3-4-extended-precision-subtraction"><a href="#3-4-extended-precision-subtraction" class="headerlink" title="3.4    extended precision subtraction"></a>3.4    extended precision subtraction</h4><h2 id="4-Multimodule-Programs"><a href="#4-Multimodule-Programs" class="headerlink" title="4. Multimodule Programs"></a>4. Multimodule Programs</h2><p>source code has been divided up into separate ASM files</p>
<p>each ASM file is assembled into a separate OBJ file</p>
<p>all OBJ files belonging to the same program are linked using the link utility into a single exe</p>
<p>this process is called static linking</p>
<h2 id="5-Stack-Frames"><a href="#5-Stack-Frames" class="headerlink" title="5. Stack Frames"></a>5. Stack Frames</h2><p>also known as an activation record(活动记录)</p>
<p>created by the following steps:</p>
<ol>
<li><p>call program pushed arguments on the stack and calls the procedure</p>
</li>
<li><p>the called procedure pushed ebp on the stack, and set ebp to esp</p>
</li>
<li><p>if local var are needed, a constant is subtracted from ESP to make room on the stack</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pushad</span><br><span class="line">mov esi, OFFSET array</span><br><span class="line">mov ecx, LENGTHOF array</span><br><span class="line">mov ebx, TYPE array</span><br><span class="line">call DumpMem</span><br><span class="line">popad</span><br></pre></td></tr></table></figure>

<p><a href="https://imgtu.com/i/HJFbwT"><img src="https://s4.ax1x.com/2022/02/09/HJFbwT.png" alt="HJFbwT.png"></a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; C Call: caller releases stack</span><br><span class="line">AddTwo_C PROC</span><br><span class="line">	push ebp</span><br><span class="line">	mov ebp, esp</span><br><span class="line">	mov eax, [ebp + 12]</span><br><span class="line">	add eax, [ebp + 8]</span><br><span class="line">	pop ebp</span><br><span class="line">	ret</span><br><span class="line">AddTwo_C ENDP</span><br><span class="line"></span><br><span class="line">_Example1 PROC</span><br><span class="line">	push 6</span><br><span class="line">	push 5</span><br><span class="line">	call AddTwo_C</span><br><span class="line">	add esp, 8</span><br><span class="line">	call DumpRegs</span><br><span class="line">	ret</span><br><span class="line">_Example1 ENDP</span><br><span class="line">; STDCall: procedure releases stack</span><br><span class="line">AddTwo PROC</span><br><span class="line">	push ebp</span><br><span class="line">	mov ebp, esp</span><br><span class="line">	mov eax, [ebp + 12]</span><br><span class="line">	add eax, [ebp + 8]</span><br><span class="line">	pop ebp</span><br><span class="line">	ret 8</span><br><span class="line">AddTwo ENDP</span><br><span class="line">_Example2 PROC</span><br><span class="line">	push 6</span><br><span class="line">	push 5</span><br><span class="line">	call AddTwo</span><br><span class="line">	call DumpRegs</span><br><span class="line">	ret</span><br><span class="line">_Example2 ENDP</span><br></pre></td></tr></table></figure>

<h4 id="5-1-Local-Variables"><a href="#5-1-Local-Variables" class="headerlink" title="5.1. Local Variables"></a>5.1. Local Variables</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">void MySub()&#123;</span><br><span class="line">	int X = 10;</span><br><span class="line">	int Y = 20;</span><br><span class="line">&#125;</span><br><span class="line">;	LocalVars.asm</span><br><span class="line">MySub PROC</span><br><span class="line">	push ebp</span><br><span class="line">	mov ebp, esp</span><br><span class="line">	sub esp, 8</span><br><span class="line">	mov DWORD PTR [ebp - 4], 10</span><br><span class="line">	mov DWORD PTR [ebp - 8], 20</span><br><span class="line">	; Do Something</span><br><span class="line">	mov esp, ebp	; remove local vars</span><br><span class="line">	pop ebp</span><br><span class="line">MySub ENDP</span><br></pre></td></tr></table></figure>

<h4 id="5-2-ENTER-and-LEAVE"><a href="#5-2-ENTER-and-LEAVE" class="headerlink" title="5.2. ENTER and LEAVE"></a>5.2. ENTER and LEAVE</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; ENTER Instruction</span><br><span class="line">; push ebp on the stack						push ebp</span><br><span class="line">; steps ebp to the base of stack frame		mov ebp, esp</span><br><span class="line">; reserves space for local variables		sub esp, n</span><br><span class="line">; syntax: ENTER numBytesReserverd, nestingLevel</span><br><span class="line"></span><br><span class="line">; LEAVE instruction</span><br><span class="line">; restores esp to release local variables	mov esp, ebp</span><br><span class="line">; pops ebp for the caller					pop ebp</span><br><span class="line"></span><br><span class="line">MySub PROC</span><br><span class="line">	enter 8,0</span><br><span class="line">	;push ebp</span><br><span class="line">	;mov ebp, esp</span><br><span class="line">	;sub esp,8</span><br><span class="line">	...</span><br><span class="line">	...</span><br><span class="line">	leave</span><br><span class="line">	;mov esp,ebp</span><br><span class="line">	;pop ebp</span><br><span class="line">	ret</span><br><span class="line">MySub ENDP</span><br></pre></td></tr></table></figure>

<h4 id="5-3-LOCAL-Directive"><a href="#5-3-LOCAL-Directive" class="headerlink" title="5.3. LOCAL Directive"></a>5.3. LOCAL Directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MySub PROC</span><br><span class="line">	LOCAL var1:BYTE, var2:WORD, var3:SDWORD</span><br><span class="line">	LOCAL flagVals[20]:BYTE</span><br><span class="line">	LOCAL pArray:PTR WORD</span><br><span class="line">	LOCAL t1:BYTE</span><br><span class="line">MySub ENDP</span><br><span class="line">BubbleSort PROC</span><br><span class="line">	LOCAL temp:DWORD, SwapFlag:BYTE</span><br><span class="line">	...</span><br><span class="line">	ret</span><br><span class="line">BubbleSort ENDP</span><br><span class="line">; masm generates</span><br><span class="line">BubbleSort PROC</span><br><span class="line">	push ebp</span><br><span class="line">	mov ebp, esp</span><br><span class="line">	add esp, 0FFFFFFF8h		; add -8 to ESP</span><br><span class="line">	...</span><br><span class="line">	mov esp, ebp</span><br><span class="line">	pop ebp</span><br><span class="line">	ret</span><br><span class="line">BubbleSort ENDP</span><br></pre></td></tr></table></figure>

<h4 id="5-4-LEA-Instruction"><a href="#5-4-LEA-Instruction" class="headerlink" title="5.4. LEA Instruction"></a>5.4. LEA Instruction</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; compared to OFFSET, LEA returns offsets of direct and indirect operands</span><br><span class="line">CopyString PROC</span><br><span class="line">	count:DWORD</span><br><span class="line">	LOCAL temp[20]:BYTE</span><br><span class="line">	</span><br><span class="line">	mov edi, OFFSET count			; invalid</span><br><span class="line">	mov esi, OFFSET temp			; invalid</span><br><span class="line">	lea edi, count					; ok</span><br><span class="line">	lea esi, temp					; ok</span><br><span class="line">	</span><br><span class="line">	lea esi, [ebp - 8]</span><br></pre></td></tr></table></figure>

<h2 id="6-Invoke-Addr-PROC-PROTO"><a href="#6-Invoke-Addr-PROC-PROTO" class="headerlink" title="6. Invoke, Addr, PROC, PROTO"></a>6. Invoke, Addr, PROC, PROTO</h2><h4 id="6-1-INVOKE-Directive"><a href="#6-1-INVOKE-Directive" class="headerlink" title="6.1    INVOKE Directive"></a>6.1    INVOKE Directive</h4><p>not in 64bit model</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; syntax:  INVOKE precedureName, [, argumentList]</span><br><span class="line">; arguments can be:</span><br><span class="line">; immediate values and integer expressions</span><br><span class="line">; var names</span><br><span class="line">; address and ADDR expression</span><br><span class="line">; register names</span><br><span class="line">.data</span><br><span class="line">byteVal BYTE 10</span><br><span class="line">wordVal WORD 1000h</span><br><span class="line">.code</span><br><span class="line">	invoke Sub1, byteVal, wordVal</span><br><span class="line">	invoke Sub2, ADDR byteVal</span><br><span class="line">	invoke Sub3, eax, (10 * 20)</span><br><span class="line">	invoke Sub4, [ebx]</span><br></pre></td></tr></table></figure>

<h4 id="6-2-ADDR-Operator"><a href="#6-2-ADDR-Operator" class="headerlink" title="6.2    ADDR Operator"></a>6.2    ADDR Operator</h4><p>not in 64bit model</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">myWord WORD ?</span><br><span class="line">.code</span><br><span class="line">	invoke mySub, ADDR myWord</span><br></pre></td></tr></table></figure>

<h4 id="6-3-PROC-Directive"><a href="#6-3-PROC-Directive" class="headerlink" title="6.3    PROC Directive"></a>6.3    PROC Directive</h4><p>not in 64bit model</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">label PROC [attributes][USES regList], paramList</span><br><span class="line">AddTWo PROC</span><br><span class="line">	val1:DWORD, val2:DWORD</span><br><span class="line">	</span><br><span class="line">	mov eax, val1</span><br><span class="line">	add eax, val2</span><br><span class="line">	ret</span><br><span class="line">AddTwo ENDP</span><br><span class="line">; example</span><br><span class="line">MySub PROTO</span><br><span class="line">.code</span><br><span class="line">invoke mySub</span><br><span class="line"></span><br><span class="line">MySub PROC</span><br><span class="line">	.</span><br><span class="line">MySub ENDP</span><br><span class="line"></span><br><span class="line">; example</span><br><span class="line">ArraySum PROTO</span><br><span class="line">	ptrArray:PTR DWORD</span><br><span class="line">	szArray:DWORD</span><br></pre></td></tr></table></figure>

<h2 id="7-Multimodule-Programs"><a href="#7-Multimodule-Programs" class="headerlink" title="7. Multimodule Programs"></a>7. Multimodule Programs</h2><h4 id="7-1-Creating-a-multimodule-program"><a href="#7-1-Creating-a-multimodule-program" class="headerlink" title="7.1 Creating a multimodule program"></a>7.1 Creating a multimodule program</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; 1. create the main module</span><br><span class="line">; 2. create a separate source code module for each procedure or set of related procedure</span><br><span class="line">; 3. create an include file that contains procedure prototypes for external procedures</span><br><span class="line">; 4. use the include directive to make your procedure prototypes available to each module</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>汇编</category>
      </categories>
      <tags>
        <tag>汇编</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编第五天</title>
    <url>/2022/02/11/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96_Day5/</url>
    <content><![CDATA[<h2 id="1-String-Primitive-Instruction"><a href="#1-String-Primitive-Instruction" class="headerlink" title="1. String Primitive Instruction"></a>1. String Primitive Instruction</h2><h4 id="1-1-MOVSB-MOVSW-MOVSD"><a href="#1-1-MOVSB-MOVSW-MOVSD" class="headerlink" title="1.1.    MOVSB, MOVSW, MOVSD"></a>1.1.    MOVSB, MOVSW, MOVSD</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; copy data from [esi] to [edi]</span><br><span class="line">.data</span><br><span class="line">source DWORD 0FFFFFFFFh</span><br><span class="line">target DWORD ?</span><br><span class="line">.code</span><br><span class="line">mov esi, OFFSET source</span><br><span class="line">mov edi, OFFSET target</span><br><span class="line">movsd</span><br><span class="line">; esi and edi are automatically inc or dec depending on B,W,D</span><br><span class="line"></span><br><span class="line">; Direction Flag</span><br><span class="line">; DF = 0, inc esi and edi</span><br><span class="line">; DF = 1, dec esi and edi</span><br><span class="line">; that can be explicitly changed by cld and std</span><br><span class="line"></span><br><span class="line">; Using a Repeat Prefix</span><br><span class="line">.data</span><br><span class="line">source DWORD 20 DUP(&#x27;z&#x27;)</span><br><span class="line">target DWORD 20 DUP(?)</span><br><span class="line">.code</span><br><span class="line">cld</span><br><span class="line">mov ecx, LENGTHOF source</span><br><span class="line">mov esi, OFFSET source</span><br><span class="line">mov edi, OFFSET target</span><br><span class="line">rep movsw</span><br><span class="line">; wait till ecx == 0</span><br></pre></td></tr></table></figure>

<h4 id="1-2-CMPSB-CMPSW-CMPSD"><a href="#1-2-CMPSB-CMPSW-CMPSD" class="headerlink" title="1.2.    CMPSB, CMPSW, CMPSD"></a>1.2.    CMPSB, CMPSW, CMPSD</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; compare data from [esi] to [edi]</span><br><span class="line">; repeat prefix often used: repe(repz), repne(repnz)</span><br><span class="line">.data</span><br><span class="line">source DWORD 1234h</span><br><span class="line">target DWORD 5678h</span><br><span class="line">.code</span><br><span class="line">mov esi, OFFSET source</span><br><span class="line">mov edi, OFFSET target</span><br><span class="line">CMPSD</span><br><span class="line">ja L1</span><br><span class="line">jmp L2</span><br><span class="line"></span><br><span class="line">; repeat</span><br><span class="line">.data</span><br><span class="line">source DWORD COUNT DUP(?)</span><br><span class="line">target DWORD COUNT DUP(?)</span><br><span class="line">.code</span><br><span class="line">mov ecx, COUNT</span><br><span class="line">mov esi, OFFSET source</span><br><span class="line">mov edi, OFFSET target</span><br><span class="line">cld</span><br><span class="line">repe cmpsd</span><br></pre></td></tr></table></figure>

<h4 id="1-3-SCASB-SCASW-SCASD"><a href="#1-3-SCASB-SCASW-SCASD" class="headerlink" title="1.3.    SCASB, SCASW, SCASD"></a>1.3.    SCASB, SCASW, SCASD</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; compare a value in AL/AX/EAX to [edi]</span><br><span class="line">.data</span><br><span class="line">alpha BYTE &quot;ABCDEFGH&quot;, 0</span><br><span class="line">.code</span><br><span class="line">mov edi, OFFSET alpha</span><br><span class="line">mov al, &#x27;F&#x27;</span><br><span class="line">mov ecx, LENGTHOF alpha</span><br><span class="line">cld</span><br><span class="line">repne scasb</span><br><span class="line">jnz quit</span><br><span class="line">dec edi</span><br></pre></td></tr></table></figure>

<h4 id="1-4-STOSB-STOSW-STOSD"><a href="#1-4-STOSB-STOSW-STOSD" class="headerlink" title="1.4.    STOSB, STOSW, STOSD"></a>1.4.    STOSB, STOSW, STOSD</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; store content of al/ax/eax to [edi]</span><br><span class="line">.data</span><br><span class="line">Count = 100</span><br><span class="line">string1 BYTE Count DUP(?)</span><br><span class="line">.code</span><br><span class="line">mov al, OFFh</span><br><span class="line">mov edi, OFFSET string1</span><br><span class="line">mov ecx, Count</span><br><span class="line">cld</span><br><span class="line">rep stosb</span><br></pre></td></tr></table></figure>

<h4 id="1-5-LODSB-LODSW-LODSD"><a href="#1-5-LODSB-LODSW-LODSD" class="headerlink" title="1.5.    LODSB, LODSW, LODSD"></a>1.5.    LODSB, LODSW, LODSD</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; load from [esi] to al/ax/eax</span><br><span class="line">.data</span><br><span class="line">array BYTE 1,2,3,4,5,6,7,8,9</span><br><span class="line">.code</span><br><span class="line">	mov esi, OFFSET array</span><br><span class="line">	mov ecx, LENGTHOF array</span><br><span class="line">	cld</span><br><span class="line">L1:	lodsb</span><br><span class="line">	or al, 30h</span><br><span class="line">	call WriteChar</span><br><span class="line">	loop L1</span><br></pre></td></tr></table></figure>

<h2 id="2-Selected-String-Procedures"><a href="#2-Selected-String-Procedures" class="headerlink" title="2. Selected String Procedures"></a>2. Selected String Procedures</h2><h4 id="2-1-Two-Dimensional-Arrays"><a href="#2-1-Two-Dimensional-Arrays" class="headerlink" title="2.1 Two-Dimensional Arrays"></a>2.1 Two-Dimensional Arrays</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; Structure Application</span><br><span class="line">COORD STRUCT</span><br><span class="line">	X WORD ?</span><br><span class="line">	Y WORD ?</span><br><span class="line">COORD ENDS</span><br><span class="line">.data</span><br><span class="line">setOfCoordinates COORD 10 DUP(&lt;&gt;)</span><br><span class="line">.code</span><br><span class="line">	mov ebx, OFFSET setOfCoordinates</span><br><span class="line">	mov esi, 2</span><br><span class="line">	mov eax, 0</span><br><span class="line">	mov ecx, LENGTHOF setOfCoordinates</span><br><span class="line">L1: mov ax, [ebx + esi]</span><br><span class="line">	call WriteDec</span><br><span class="line">	add ebx, SIZEOF COORD</span><br><span class="line">	loop L1</span><br><span class="line">; common formats</span><br><span class="line">;	[base + index + displacement]</span><br><span class="line">;	displacement[base + index]</span><br><span class="line">table BYTE 10h, 20h, 30h, 40h, 50h</span><br><span class="line">	  BYTE 60h, 70h, 80h, 90h, 0A0h</span><br><span class="line">	  BYTE 0B0h, 0C0h, 0D0h, 0E0h, 0F0h</span><br><span class="line">NumCols = 5</span><br><span class="line">; alternate formats</span><br><span class="line">table BYTE 10h, 20h, 30h, 40h, 50h, 60h, 70h, 80h, 90h, 0A0h, OB0h, 0C0h, 0D0h, 0E0h, 0F0h</span><br><span class="line">NumCols = 5</span><br><span class="line"></span><br><span class="line">RowNumber = 1</span><br><span class="line">ColumnNumber = 2</span><br><span class="line"></span><br><span class="line">mov ebx, NumCols * RowNumber</span><br><span class="line">mov esi, ColumnNumber</span><br><span class="line">mov al, table[ebx + esi]</span><br></pre></td></tr></table></figure>

<h4 id="2-2-Searching-and-Sorting-Integer-Arrays"><a href="#2-2-Searching-and-Sorting-Integer-Arrays" class="headerlink" title="2.2.    Searching and Sorting Integer Arrays"></a>2.2.    Searching and Sorting Integer Arrays</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; pseudocode</span><br><span class="line">cx1 = N - 1</span><br><span class="line">while(cx1 &gt; 0)&#123;</span><br><span class="line">	esi = addr(array)</span><br><span class="line">	cx2 = cx1</span><br><span class="line">	while(cx2 &gt; 0)&#123;</span><br><span class="line">		if(array[esi] &lt; array[esi + 4])&#123;</span><br><span class="line">			exchange(array[esi], array[esi + 4])</span><br><span class="line">		&#125;</span><br><span class="line">		add esi, 4</span><br><span class="line">		dec cx2</span><br><span class="line">	&#125;</span><br><span class="line">	dec cx2</span><br><span class="line">&#125;</span><br><span class="line">; assembly code</span><br><span class="line">BubbleSort PROC USES eax, ecx, esi, pArray:PTR DWORD, Count:DWORD</span><br><span class="line">	mov ecx, Count</span><br><span class="line">	dec ecx</span><br><span class="line">L1:</span><br><span class="line">	push ecx</span><br><span class="line">	mov esi, pArray</span><br><span class="line">L2:</span><br><span class="line">	mov eax, [esi]</span><br><span class="line">	cmp [esi + 4], eax</span><br><span class="line">	jge L3</span><br><span class="line">	xchg eax, [esi + 4]</span><br><span class="line">	mov [esi], eax</span><br><span class="line">L3:</span><br><span class="line">	add esi, 4</span><br><span class="line">	loop L2</span><br><span class="line">	pop ecx</span><br><span class="line">	loop L1</span><br><span class="line">L4:</span><br><span class="line">	ret</span><br><span class="line">BubbleSort ENDP</span><br></pre></td></tr></table></figure>

<h2 id="3-Structure"><a href="#3-Structure" class="headerlink" title="3. Structure"></a>3. Structure</h2><h4 id="3-1-Structure-Definition-Syntax"><a href="#3-1-Structure-Definition-Syntax" class="headerlink" title="3.1    Structure Definition Syntax"></a>3.1    Structure Definition Syntax</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">name STRUCT</span><br><span class="line">	field-declarations</span><br><span class="line">name ENDS</span><br><span class="line"></span><br><span class="line">Employee STRUCT</span><br><span class="line">	IdNum BYTE &quot;000000000&quot;</span><br><span class="line">	LastName BYTE 30 DUP(0)</span><br><span class="line">	Years WORD 0</span><br><span class="line">	SalaryHistory DWORD 0,0,0,0</span><br><span class="line">Employee ENDS</span><br></pre></td></tr></table></figure>

<h4 id="3-2-Declaring-Structure-Variables"><a href="#3-2-Declaring-Structure-Variables" class="headerlink" title="3.2    Declaring Structure Variables"></a>3.2    Declaring Structure Variables</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">point1 COORD &lt;5,10&gt;</span><br><span class="line">point2 COORD &lt;&gt;</span><br><span class="line">worker Employee &lt;&gt;</span><br><span class="line"></span><br><span class="line">; initializing Array Fields</span><br><span class="line">.data</span><br><span class="line">emp Employee &lt;,,,2 DUP(20000)&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-Array-of-Structure"><a href="#3-3-Array-of-Structure" class="headerlink" title="3.3    Array of Structure"></a>3.3    Array of Structure</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">NumPoints = 3</span><br><span class="line">AllPoints COORD NumPoints DUP(&lt;0,0&gt;)</span><br><span class="line"></span><br><span class="line">RD_Dept Employee 20 DUP(&lt;&gt;)</span><br><span class="line"></span><br><span class="line">accounting Employee 10 DUP(&lt;,,,4 DUP(20000)&gt;)</span><br></pre></td></tr></table></figure>

<h4 id="3-4-Reference-Structure-Variables"><a href="#3-4-Reference-Structure-Variables" class="headerlink" title="3.4    Reference Structure Variables"></a>3.4    Reference Structure Variables</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Employee STRUCT								; BYTES</span><br><span class="line">	IdNum BYTE &quot;000000000&quot;					; 9</span><br><span class="line">	LastName BYTE 30 DUP(0)					; 30</span><br><span class="line">	Years WORD 0							; 2</span><br><span class="line">	SalaryHistory DWORD 0,0,0,0				; 16</span><br><span class="line">Employee ENDS								; 57</span><br><span class="line">.data</span><br><span class="line">worker Employee &lt;&gt;</span><br><span class="line"></span><br><span class="line">mov eax, TYPE Employee</span><br><span class="line">mov eax, SIZEOF Employee</span><br><span class="line">mov eax, SIZEOF worker</span><br><span class="line">mov eax, TYPE Employee.SalaryHistory</span><br><span class="line">mov eax, LENGTHOF Employee.SalaryHistory</span><br><span class="line">mov eax, SIZEOF Employee.SalaryHistory</span><br><span class="line">;</span><br><span class="line">mov dx, worker.Years</span><br><span class="line">mov worker.SalaryHistory, 20000</span><br><span class="line">mov worker.SalaryHistory+4, 30000</span><br><span class="line">mov edx, OFFSET worker.LastName</span><br><span class="line">;</span><br><span class="line">mov esi, OFFSET worker</span><br><span class="line">mov ax, (Employee PTR [esi]).Years</span><br><span class="line">;</span><br><span class="line">mov ax, [esi].Years	; invalid operand</span><br></pre></td></tr></table></figure>

<h4 id="3-5-Nested-Structure"><a href="#3-5-Nested-Structure" class="headerlink" title="3.5    Nested Structure"></a>3.5    Nested Structure</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Rectangle STRUCT</span><br><span class="line">	UpperLeft COORD &lt;&gt;</span><br><span class="line">	LowerRight COORD &lt;&gt;</span><br><span class="line">Rectangle ENDS</span><br><span class="line">.data</span><br><span class="line">rect1 Rectangle &#123;&#123;10,10&#125;,&#123;50,20&#125;&#125;</span><br><span class="line">rect2 Rectangle &lt; &lt;10,10&gt;, &lt;50,20&gt; &gt;</span><br><span class="line"></span><br><span class="line">mov rect1.UpperLeft.X, 10</span><br><span class="line">mov esi, OFFSET rect1</span><br><span class="line">mov (Rectangle PTR [esi]).UpperLeft.Y, 10</span><br><span class="line"></span><br><span class="line">mov edi, OFFSET rect2.LowerRight</span><br><span class="line">mov (COORD PTR [edi]).X, 50</span><br><span class="line">mov edi, OFFSET rect2.LowerRight</span><br><span class="line">mov WORD PTR [edi], 50</span><br></pre></td></tr></table></figure>

<h2 id="4-Declaring-and-Using-Union"><a href="#4-Declaring-and-Using-Union" class="headerlink" title="4. Declaring and Using Union"></a>4. Declaring and Using Union</h2><h4 id="4-1-union-definition-syntax"><a href="#4-1-union-definition-syntax" class="headerlink" title="4.1    union definition syntax"></a>4.1    union definition syntax</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">name UNION</span><br><span class="line">	union-fields</span><br><span class="line">name ENDS</span><br><span class="line"></span><br><span class="line">; Integer Union Example</span><br><span class="line">Integer UNION</span><br><span class="line">	D DWORD 0</span><br><span class="line">	W WORD 0</span><br><span class="line">	B BYTE 0</span><br><span class="line">Integer ENDS</span><br><span class="line">.data</span><br><span class="line">val1 Integer &lt;12345678h&gt;</span><br><span class="line">val2 Integer &lt;100h&gt;</span><br><span class="line">val3 Integer &lt;&gt;</span><br><span class="line"></span><br><span class="line">mov val3.B, al</span><br><span class="line">mov ax, val3.W</span><br><span class="line">add val3.D, eax</span><br></pre></td></tr></table></figure>

<h4 id="4-2-Union-inside-a-structure"><a href="#4-2-Union-inside-a-structure" class="headerlink" title="4.2    Union inside a structure"></a>4.2    Union inside a structure</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Integer UNION</span><br><span class="line">	D DWORD 0</span><br><span class="line">	W WORD 0</span><br><span class="line">	B BYTE 0</span><br><span class="line">Integer ENDS</span><br><span class="line"></span><br><span class="line">FileInfo STRUCT</span><br><span class="line">	FileID Integer &lt;&gt;</span><br><span class="line">	FileName BYTE 64 DUP(?)</span><br><span class="line">FileInfo ENDS</span><br><span class="line"></span><br><span class="line">.data</span><br><span class="line">myFile FileInfo &lt;&gt;</span><br><span class="line">.code</span><br><span class="line">mov myFile.FileID.W, ax</span><br></pre></td></tr></table></figure>

<h2 id="5-Macro"><a href="#5-Macro" class="headerlink" title="5. Macro"></a>5. Macro</h2><p><a href="https://imgtu.com/i/HDZwJH"><img src="https://s4.ax1x.com/2022/02/13/HDZwJH.png" alt="HDZwJH.png"></a></p>
<h4 id="5-1-Defining-Macros"><a href="#5-1-Defining-Macros" class="headerlink" title="5.1    Defining Macros"></a>5.1    Defining Macros</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">macroname MACRO [param1, param2,...]</span><br><span class="line">	statement-list</span><br><span class="line">ENDM</span><br><span class="line"></span><br><span class="line">; example 1</span><br><span class="line">mNewLine MACRO</span><br><span class="line">	call Crlf</span><br><span class="line">ENDM</span><br><span class="line">.data</span><br><span class="line">.code</span><br><span class="line">mNewLine	; invoke the macro</span><br><span class="line"></span><br><span class="line">; example 2</span><br><span class="line">mPutChar MACRO char</span><br><span class="line">	push eax</span><br><span class="line">	mov al, char</span><br><span class="line">	call WriteChar</span><br><span class="line">	pop eax</span><br><span class="line">ENDM</span><br><span class="line">.code</span><br><span class="line">mPutChar &#x27;A&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-Invoking-Macros"><a href="#5-2-Invoking-Macros" class="headerlink" title="5.2    Invoking Macros"></a>5.2    Invoking Macros</h4><p><a href="https://imgtu.com/i/HDekkD"><img src="https://s4.ax1x.com/2022/02/13/HDekkD.png" alt="HDekkD.png"></a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mWriteStr MACRO buffer</span><br><span class="line">	push edx</span><br><span class="line">	mov edx, OFFSET buffer</span><br><span class="line">	call WriteString</span><br><span class="line">	pop edx</span><br><span class="line">ENDM</span><br><span class="line">.data</span><br><span class="line">str1 BYTE &quot;welcome!&quot;, 0</span><br><span class="line">.code</span><br><span class="line">mWriteStr str1</span><br><span class="line"></span><br><span class="line">; if you pass a blank argument, the error is also caught</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>汇编</category>
      </categories>
      <tags>
        <tag>汇编</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编第六天</title>
    <url>/2022/02/13/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96_Day6/</url>
    <content><![CDATA[<h2 id="1-Conditional-Assembly-Directives"><a href="#1-Conditional-Assembly-Directives" class="headerlink" title="1. Conditional-Assembly Directives"></a>1. Conditional-Assembly Directives</h2><h4 id="1-1-Checking-for-Missing-Arguments"><a href="#1-1-Checking-for-Missing-Arguments" class="headerlink" title="1.1    Checking for Missing Arguments"></a>1.1    Checking for Missing Arguments</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; IFB directive returns true if its argument is blank</span><br><span class="line">IFB &lt;row&gt;</span><br><span class="line">	EXITM</span><br><span class="line">ENDIF</span><br><span class="line"></span><br><span class="line">; example</span><br><span class="line">mWriteStr MACRO string</span><br><span class="line">	IFB &lt;string&gt;</span><br><span class="line">		ECHO -----------------------------</span><br><span class="line">		ECHO * Error: parameter missing in mWriteStr</span><br><span class="line">		ECHO * (no code generated)</span><br><span class="line">		ECHO -----------------------------</span><br><span class="line">		EXITM</span><br><span class="line">	ENDIF</span><br><span class="line">	push edx</span><br><span class="line">	mov edx, OFFSET string</span><br><span class="line">	call WriteString</span><br><span class="line">	pop edx</span><br><span class="line">ENDM</span><br></pre></td></tr></table></figure>

<h4 id="1-2-Default-Argument-Initializers"><a href="#1-2-Default-Argument-Initializers" class="headerlink" title="1.2    Default Argument Initializers"></a>1.2    Default Argument Initializers</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mWriteLn MACRO text:=&lt;&quot; &quot;&gt;</span><br><span class="line">	mWrite text</span><br><span class="line">	call Crlf</span><br><span class="line">ENDM</span><br><span class="line">.code</span><br><span class="line">mWriteLn &quot;line one&quot;</span><br><span class="line">mWriteLn</span><br><span class="line">mWriteLn &quot;line three&quot;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-Boolean-Expressions"><a href="#1-3-Boolean-Expressions" class="headerlink" title="1.3    Boolean Expressions"></a>1.3    Boolean Expressions</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; LT - less than</span><br><span class="line">; GT - greater than</span><br><span class="line">; EQ - equal to</span><br><span class="line">; NE - not equal to</span><br><span class="line">; LE - less than or equal</span><br><span class="line">; GE - Greater than or equal to</span><br></pre></td></tr></table></figure>

<h4 id="1-4-IF-ELSE-and-ENDIF-Directives"><a href="#1-4-IF-ELSE-and-ENDIF-Directives" class="headerlink" title="1.4    IF, ELSE and ENDIF Directives"></a>1.4    IF, ELSE and ENDIF Directives</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">IF boolean-expression</span><br><span class="line">	statements</span><br><span class="line">[ELSE</span><br><span class="line">	statements]</span><br><span class="line">ENDIF</span><br><span class="line"></span><br><span class="line">IF RealMode EQ 1</span><br><span class="line">	mov ax, @data</span><br><span class="line">	mov ds, ax</span><br><span class="line">ENDIF</span><br><span class="line">; RealMode can be defined in following ways:</span><br><span class="line">RealMode = 1</span><br><span class="line">RealMode EQU 1</span><br><span class="line">RealMode TEXTEQU 1</span><br></pre></td></tr></table></figure>

<h4 id="1-5-IFIDN-and-IFIDNI-Directive"><a href="#1-5-IFIDN-and-IFIDNI-Directive" class="headerlink" title="1.5    IFIDN and IFIDNI Directive"></a>1.5    IFIDN and IFIDNI Directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">IFIDNI &lt;symbol&gt;, &lt;symbol&gt;</span><br><span class="line">	statements</span><br><span class="line">ENDIF</span><br><span class="line">; example</span><br><span class="line">mReadBuf MACRO bufferPtr, maxChars</span><br><span class="line">	IFIDNI &lt;maxChars&gt;, &lt;EDX&gt;</span><br><span class="line">		ECHO Warning: Second argument cannot be EDX</span><br><span class="line">		ECHO **************************************</span><br><span class="line">		EXITM</span><br><span class="line">	ENDIF</span><br><span class="line">ENDM</span><br></pre></td></tr></table></figure>

<h4 id="1-6-Special-Operators"><a href="#1-6-Special-Operators" class="headerlink" title="1.6    Special Operators"></a>1.6    Special Operators</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; substitution &amp; operator resolves ambiguous reference</span><br><span class="line">; expansion % operator converts constant expression into text representation</span><br><span class="line">; literal-text &lt;&gt; operator groups one or two characters</span><br><span class="line">; literal-character ! operator forces the preprocessor to treat a predefined operator as an ordinary character</span><br><span class="line"></span><br><span class="line">ShowRegister MACRO regName</span><br><span class="line">.data</span><br><span class="line">	tempStr BYTE &quot; &amp;regName=&quot;, 0</span><br><span class="line">	.</span><br><span class="line">	.</span><br><span class="line">.code</span><br><span class="line">ShowRegister EDX</span><br><span class="line"></span><br><span class="line">mGotoXY %(5 * 10),%(3 + 4)</span><br><span class="line">The preprocessor generates the following code:</span><br><span class="line">push edx</span><br><span class="line">mov dl, 50</span><br><span class="line">mov dh, 7</span><br><span class="line">call Gotoxy</span><br><span class="line">pop edx</span><br><span class="line"></span><br><span class="line">mWrite &quot;Line three&quot;, 0dh, 0ah	; passes three arguments</span><br><span class="line">mWrite &lt;&quot;Line three&quot;, 0dh, 0ah&gt;	; passes a single argument</span><br><span class="line"></span><br><span class="line">BadYValue	TEXTEQU Warning: &lt;Y-coordinate is &gt; 24 &gt; ; ends when first &gt;</span><br><span class="line">BadYValue	TEXTEQU Warning: &lt;Y-coordinate is !&gt; 24 &gt; ; continues</span><br></pre></td></tr></table></figure>

<h4 id="1-7-Macro-Function"><a href="#1-7-Macro-Function" class="headerlink" title="1.7    Macro Function"></a>1.7    Macro Function</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">IsDefined MACRO symbol</span><br><span class="line">	IFDEF symbol</span><br><span class="line">		EXITM &lt;-1&gt;</span><br><span class="line">	ELSE</span><br><span class="line">		EXITM &lt;0&gt;</span><br><span class="line">	ENDIF</span><br><span class="line">ENDM</span><br><span class="line"></span><br><span class="line">IF IsDefined( RealMode )</span><br><span class="line">	mov ax, @data</span><br><span class="line">	mov ds, ax</span><br><span class="line">ENDIF</span><br></pre></td></tr></table></figure>

<h2 id="2-Defining-Repeat-Blocks"><a href="#2-Defining-Repeat-Blocks" class="headerlink" title="2. Defining Repeat Blocks"></a>2. Defining Repeat Blocks</h2><h4 id="2-1-WHILE-Directive"><a href="#2-1-WHILE-Directive" class="headerlink" title="2.1    WHILE Directive"></a>2.1    WHILE Directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WHILE constExpression</span><br><span class="line">	statements</span><br><span class="line">ENDM</span><br><span class="line">.data</span><br><span class="line">val1 = 1</span><br><span class="line">val2 = 1</span><br><span class="line">DWORD val1</span><br><span class="line">DWORD val2</span><br><span class="line">val3 = val1 + val2</span><br><span class="line"></span><br><span class="line">WHILE val3 LT 0F0000000h</span><br><span class="line">	DWORD val3</span><br><span class="line">	val1 = val2</span><br><span class="line">	val2 = val3</span><br><span class="line">	val3 = val1 + val2</span><br><span class="line">ENDM</span><br></pre></td></tr></table></figure>

<h4 id="2-2-REPEAT-Directive"><a href="#2-2-REPEAT-Directive" class="headerlink" title="2.2    REPEAT Directive"></a>2.2    REPEAT Directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REPEAT constExpression</span><br><span class="line">	statements</span><br><span class="line">ENDM</span><br><span class="line"></span><br><span class="line">iVal = 10</span><br><span class="line">REPEAT 100</span><br><span class="line">	DWORD iVal</span><br><span class="line">	iVal = iVal + 10</span><br><span class="line">ENDM</span><br></pre></td></tr></table></figure>

<h4 id="2-3-FOR-Directive"><a href="#2-3-FOR-Directive" class="headerlink" title="2.3    FOR Directive"></a>2.3    FOR Directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FOR parameter, &lt;arg1, arg2, arg3&gt;</span><br><span class="line">	statements</span><br><span class="line">ENDM</span><br><span class="line"></span><br><span class="line">Window STRUCT</span><br><span class="line">	FOR color, &lt;frame, titlebar, background, foreground&gt;</span><br><span class="line">		color DWORD ?</span><br><span class="line">	ENDM</span><br><span class="line">Window ENDS</span><br><span class="line">; generated code:</span><br><span class="line">Window STRUCT</span><br><span class="line">	frame DWORD ?</span><br><span class="line">	titlebar DWORD ?</span><br><span class="line">	background DWORD ?</span><br><span class="line">	foreground DWORD ?</span><br><span class="line">Window ENDS</span><br></pre></td></tr></table></figure>

<h4 id="2-4-FORC-Directive"><a href="#2-4-FORC-Directive" class="headerlink" title="2.4    FORC Directive"></a>2.4    FORC Directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FORC parameter, &lt;string&gt;</span><br><span class="line">	statements</span><br><span class="line">ENDM</span><br><span class="line"></span><br><span class="line">FORC code, &lt;ABCDEFG&gt;</span><br><span class="line">	Group_&amp;code WORD ?</span><br><span class="line">ENDM</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>汇编</category>
      </categories>
      <tags>
        <tag>汇编</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编第七天</title>
    <url>/2022/02/14/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96_Day7/</url>
    <content><![CDATA[<h2 id="1-Win32-Console-Programming"><a href="#1-Win32-Console-Programming" class="headerlink" title="1. Win32 Console Programming"></a>1. Win32 Console Programming</h2><h4 id="1-1-Translating-Windows-Data-Types"><a href="#1-1-Translating-Windows-Data-Types" class="headerlink" title="1.1    Translating Windows Data Types"></a>1.1    Translating Windows Data Types</h4><table>
<thead>
<tr>
<th>Windows Types</th>
<th>MASM Type</th>
</tr>
</thead>
<tbody><tr>
<td>BOOL</td>
<td>DWORD</td>
</tr>
<tr>
<td>LONG</td>
<td>SWORD</td>
</tr>
<tr>
<td>COLORREF, HANDLE, LPARAM, LPCTSTR, LPTSTR, LPVOID, LRESULT, UINT, WNDPROC, WPARAM</td>
<td>DWORD</td>
</tr>
<tr>
<td>BSTR, LPCSTR, LPSTR</td>
<td>PTR BYTE</td>
</tr>
<tr>
<td>WORD</td>
<td>WORD</td>
</tr>
<tr>
<td>LPCRECT</td>
<td>PTR RECT</td>
</tr>
</tbody></table>
<h4 id="1-2-Standard-Console-Handles"><a href="#1-2-Standard-Console-Handles" class="headerlink" title="1.2    Standard Console Handles"></a>1.2    Standard Console Handles</h4><p>A handle is an unsigned 32-bit integer.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">STD_INPUT_HANDLE</span><br><span class="line">	; standard input</span><br><span class="line">STD_OUTPUT_HANDLE</span><br><span class="line">	; standard output</span><br><span class="line">STD_ERROR_HANDLE</span><br><span class="line">	; standard error output</span><br><span class="line"></span><br><span class="line">; GetStdHandle, the handle is returned in eax</span><br><span class="line">GetStdHandle PROTO,</span><br><span class="line">	nStdHandle:DWORD</span><br><span class="line"></span><br><span class="line">INVOKE GetStdHandle, STD_OUTPUT_HANDLE</span><br><span class="line">mov myHandle, eax</span><br><span class="line"></span><br><span class="line">ReadConsole PROTO,</span><br><span class="line">	handle:DWORD					; input handle</span><br><span class="line">	pBuffer:PTR BYTE				; pointer to buffer</span><br><span class="line">	maxBytes:DWORD					; number of chars to read</span><br><span class="line">	pBytesRead:PTR DWORD			; ptr to num bytes read</span><br><span class="line">	notUsed:DWORD					; (not used)</span><br><span class="line"></span><br><span class="line">WriteConsole PROTO,</span><br><span class="line">	handle:DWORD					; output handle</span><br><span class="line">	pBuffer:PTR BYTE				; pointer to buffer</span><br><span class="line">	bufsize:DWORD					; size of buffer</span><br><span class="line">	pCount:PTR DWORD				; output count</span><br><span class="line">	lpReserved:DWORD				; (not used)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-Example"><a href="#1-3-Example" class="headerlink" title="1.3    Example"></a>1.3    Example</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mainc1 PROC</span><br><span class="line">; get the console output handle</span><br><span class="line">	INVOKE GetStdHandle, STD_OUTPUT_HANDLE</span><br><span class="line">	mov consoleHandle, eax</span><br><span class="line">	mov ebx, messageSize</span><br><span class="line">	</span><br><span class="line">	INVOKE WriteConsole, consoleHandle, ADDR message, ebx, ADDR bytesWriiten,0</span><br><span class="line">	INVOKE ExitProcess, 0</span><br><span class="line">mainc1 ENDP</span><br></pre></td></tr></table></figure>

<h2 id="2-Console-Window-Manipulation"><a href="#2-Console-Window-Manipulation" class="headerlink" title="2. Console Window Manipulation"></a>2. Console Window Manipulation</h2><h4 id="2-1-Screen-Buffer-and-Console-Window"><a href="#2-1-Screen-Buffer-and-Console-Window" class="headerlink" title="2.1    Screen Buffer and Console Window"></a>2.1    Screen Buffer and Console Window</h4><p>the active screen buffer includes data displayed by the console window</p>
<p><a href="https://imgtu.com/i/HLU6SS"><img src="https://s4.ax1x.com/2022/02/20/HLU6SS.png" alt="HLU6SS.png"></a></p>
<h4 id="2-2-SetConsoleTitle"><a href="#2-2-SetConsoleTitle" class="headerlink" title="2.2    SetConsoleTitle"></a>2.2    SetConsoleTitle</h4><p>SetConsoleTitle changes the console window’s title</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">titleStr BYTE &quot;Console title&quot;, 0</span><br><span class="line">.code</span><br><span class="line">INVOKE SetConsoleTitle, ADDR titleStr</span><br></pre></td></tr></table></figure>

<h4 id="2-3-GetConsoleScreenBufferInfo"><a href="#2-3-GetConsoleScreenBufferInfo" class="headerlink" title="2.3    GetConsoleScreenBufferInfo"></a>2.3    GetConsoleScreenBufferInfo</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">outHandlw DWORD ?</span><br><span class="line">consoleInfo CONSOLE_SCREEN_BUFFER_INFO &lt;&gt;</span><br><span class="line">.code</span><br><span class="line">	INVOKE GetConsoleScreenBufferInfo, outHandle, ADDR consoleInfo</span><br><span class="line"></span><br><span class="line">CONSOLE_SCREEN_BUFFER_INFO STRUCT</span><br><span class="line">	dwSize	COORD &lt;&gt;</span><br><span class="line">	dwCursorPos	COORD &lt;&gt;</span><br><span class="line">	wAttributes	WORD ?</span><br><span class="line">	srWindow	SMALL_RECT &lt;&gt;</span><br><span class="line">	maxWinSize	COORD &lt;&gt;</span><br><span class="line">CONSOLE_SCREEN_BUFFER_INFO ENDS</span><br><span class="line">; dwSize: size of the screen buffer(char columns and rows)</span><br><span class="line">; dwCursorPos: cursor location</span><br><span class="line">; wAttributes: colors of characters in console buffer</span><br><span class="line">; srWindow: coords of console window relative to screen buffer</span><br><span class="line">; maxWinSize: maximum size of the console window</span><br><span class="line">COORD STRUCT</span><br><span class="line">	X WORD ?</span><br><span class="line">	Y WORD ?</span><br><span class="line">COORD ENDS</span><br><span class="line">SMALL_RECT STRUCT</span><br><span class="line">	Left WORD ?</span><br><span class="line">	Top WORD ?</span><br><span class="line">	Right WORD ?</span><br><span class="line">	Bottom WORD ?</span><br><span class="line">SMALL_RECT ENDS</span><br></pre></td></tr></table></figure>

<h4 id="2-4-SetConsoleWindowInfo"><a href="#2-4-SetConsoleWindowInfo" class="headerlink" title="2.4    SetConsoleWindowInfo"></a>2.4    SetConsoleWindowInfo</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SetConsoleWindowInfo PROTO,</span><br><span class="line">	nStdHandle:DWORD,			; screen buffer handle</span><br><span class="line">	bAbsolute:DWORD,			; coordinate type</span><br><span class="line">	pConsoleRect:PTR SMALL_RECT ; window rectangle</span><br><span class="line"></span><br><span class="line">SetConsoleScreenBufferSize PROTO,</span><br><span class="line">	outHandle:DWORD,			; handle to screen buffer</span><br><span class="line">	dwSize:COORD 				; new screen buffer size</span><br></pre></td></tr></table></figure>

<h2 id="3-Controlling-the-cursor"><a href="#3-Controlling-the-cursor" class="headerlink" title="3. Controlling the cursor"></a>3. Controlling the cursor</h2><h4 id="3-1-CONSOLE-CURSOR-INFO"><a href="#3-1-CONSOLE-CURSOR-INFO" class="headerlink" title="3.1    CONSOLE_CURSOR_INFO"></a>3.1    CONSOLE_CURSOR_INFO</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CONSOLE_CURSOR_INFO STRUCT</span><br><span class="line">	dwSize	DWORD ?		; percentage 1 to 100 of the char cell</span><br><span class="line">	bVisible DWORD ?	; true or false</span><br><span class="line">CONSOLE_CURSOR_INFO ENDS</span><br></pre></td></tr></table></figure>

<h4 id="3-2-SetConsoleTextAttribute"><a href="#3-2-SetConsoleTextAttribute" class="headerlink" title="3.2    SetConsoleTextAttribute"></a>3.2    SetConsoleTextAttribute</h4><p>sets the foreground and background colors of all subsequent text written to the console</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SetConsoleTextAttribute	PROTO,</span><br><span class="line">	hConsoleOutput:HANDLE,		; console output handle</span><br><span class="line">	wAttributes:WORD 			; color attribute</span><br></pre></td></tr></table></figure>

<h4 id="3-3-WriteConsoleOutputAttribute"><a href="#3-3-WriteConsoleOutputAttribute" class="headerlink" title="3.3    WriteConsoleOutputAttribute"></a>3.3    WriteConsoleOutputAttribute</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WriteConsoleOutputAttribute PROTO,</span><br><span class="line">	hConsoleOutput:DWORD,		; output handle</span><br><span class="line">	lpAttribute:PTR WORD,       ; write attributes</span><br><span class="line">	nLength:DWORD, 				; number of cells</span><br><span class="line">	dwWriteCoord:COORD,			; first cell coordinates</span><br><span class="line">	lpNumberOfAttrsWritten:PTR DWORD	; output count</span><br></pre></td></tr></table></figure>

<h4 id="3-4-WriteConsoleOutputCharacter"><a href="#3-4-WriteConsoleOutputCharacter" class="headerlink" title="3.4    WriteConsoleOutputCharacter"></a>3.4    WriteConsoleOutputCharacter</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WriteConsoleOutputCharacter PROTO,</span><br><span class="line">	hConsoleOutput:HANDLE,		; console output handle</span><br><span class="line">	lpCharacter:PTR BYTE,		; pointer to buffer</span><br><span class="line">	nLength:DWORD,				; size of buffer</span><br><span class="line">	dwWriteCoord:COORD,			; first cell coordinates</span><br><span class="line">	lpNumberOfCharsWritten:PTR DWORD	; output count</span><br></pre></td></tr></table></figure>

<h2 id="4-File-Manipulation"><a href="#4-File-Manipulation" class="headerlink" title="4. File Manipulation"></a>4. File Manipulation</h2><h4 id="4-1-CreateFile"><a href="#4-1-CreateFile" class="headerlink" title="4.1    CreateFile"></a>4.1    CreateFile</h4><p>either creates a new file or opens an existing file.</p>
<p>if successful, returns a handle to the open file; otherwise, returns INVALID_HANDLE_VALUE</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CreateFile PROTO,</span><br><span class="line">	pFilename:PTR BYTE,			; ptr to filename</span><br><span class="line">	desireAccess:DWORD,			; access mod</span><br><span class="line">	shareMode:DWORD,			; share mode</span><br><span class="line">	lpSecurity:DWORD,			; ptr to security attribs</span><br><span class="line">	creationDisposition:DWORD,  ; file creation options</span><br><span class="line">	flagsAndAttributes:DWORD,	; file attributes</span><br><span class="line">	htemplate:DWORD				; handle to template file</span><br><span class="line"></span><br><span class="line">; opens an existing file for reading</span><br><span class="line">INVOKE CreateFile,</span><br><span class="line">	ADDR filename,				; ptr to filename</span><br><span class="line">	GENERIC_READ,				; access mode &quot;GENERIC_WRITE&quot;	</span><br><span class="line">	DO_NOT_SHARE,				; share mode</span><br><span class="line">	NULL,						; ptr to security attributes</span><br><span class="line">	OPEN_EXISTING,				; file creation options</span><br><span class="line">	FILE_ATTRIBUTE_NORMAL,		; file attributes</span><br><span class="line">	0							; handle to template file</span><br><span class="line"></span><br><span class="line">INVOKE CreateFile,</span><br><span class="line">	ADDR filename,				; ptr to filename</span><br><span class="line">	GENERIC_WRITE,				; access mode</span><br><span class="line">	DO_NOT_SHARE,				; share mode</span><br><span class="line">	NULL,						; ptr to security attributes</span><br><span class="line">	CREATE_ALWAYS,				; file creation options</span><br><span class="line">	FILE_ATTRIBUTE_NORMAL,		; file attributes</span><br><span class="line">	0							; handle to template file</span><br></pre></td></tr></table></figure>

<h4 id="4-2-ReadFile"><a href="#4-2-ReadFile" class="headerlink" title="4.2    ReadFile"></a>4.2    ReadFile</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ReadFile PROTO,</span><br><span class="line">	handle:DWORD,				; handle to file</span><br><span class="line">	pBuffer:PTR BYTE,			; ptr to buffer</span><br><span class="line">	nBufSize:DWORD,				; num bytes to read</span><br><span class="line">	pBytesRead:PTR DWORD,		; bytes actually read</span><br><span class="line">	pOverlapped:PTR DWORD		; ptr to asynch info</span><br></pre></td></tr></table></figure>

<h4 id="4-3-WriteFile"><a href="#4-3-WriteFile" class="headerlink" title="4.3    WriteFile"></a>4.3    WriteFile</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WriteFile PROTO</span><br><span class="line">	fileHandle:DWORD,			; output handle</span><br><span class="line">	pBuffer:PTR BYTE,			; pointer to buffer</span><br><span class="line">	nBufSize:DWORD,				; size of buffer</span><br><span class="line">	pBytesWritten:PTR DWORD,	; num bytes written</span><br><span class="line">	pOverlapped:PTR DWORD		; ptr to asynch info</span><br></pre></td></tr></table></figure>

<h4 id="4-4-SetFilePointer"><a href="#4-4-SetFilePointer" class="headerlink" title="4.4    SetFilePointer"></a>4.4    SetFilePointer</h4><p>SetFilePointer moves the position pointer of an open file. </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SetFilePointer PROTO,</span><br><span class="line">	handle:DWORD,				; file handle</span><br><span class="line">	nDistanceLo:SDWORD,			; bytes to move pointer</span><br><span class="line">	pDistanceHi:PTR SDWORD,		; ptr to bytes to move</span><br><span class="line">	moveMethod:DWORD			; starting point</span><br><span class="line">INVOKE SetFilePointer, fileHandle, 0,0, FILE_END</span><br></pre></td></tr></table></figure>

<h4 id="4-5-GetLocalTime-SetLocalTime"><a href="#4-5-GetLocalTime-SetLocalTime" class="headerlink" title="4.5    GetLocalTime, SetLocalTime"></a>4.5    GetLocalTime, SetLocalTime</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GetLocalTime PROTO,</span><br><span class="line">	pSystemTime:PTR SYSTEMTIME</span><br><span class="line">SetLocalTime PROTO,</span><br><span class="line">	pSystemTime:PTR SYSTEMTIME</span><br><span class="line"></span><br><span class="line">SYSTEMTIME STRUCT</span><br><span class="line">	wYear WORD ?</span><br><span class="line">	wMonth WORD ?</span><br><span class="line">	wDayOfWeek WORD ?</span><br><span class="line">	wDay WORD ?</span><br><span class="line">	wHour WORD ?</span><br><span class="line">	wMinute WORD ?</span><br><span class="line">	wSecond WORD ?</span><br><span class="line">	wMilliseconds ?</span><br><span class="line">SYSTEMTIME ENDS</span><br></pre></td></tr></table></figure>

<h4 id="4-6-GetTickCount-Sleep"><a href="#4-6-GetTickCount-Sleep" class="headerlink" title="4.6    GetTickCount, Sleep"></a>4.6    GetTickCount, Sleep</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GetTickCount PROTO, ; return value in eax</span><br><span class="line">Sleep PROTO,</span><br><span class="line">	dwMilliseconds:DWORD</span><br></pre></td></tr></table></figure>

<h2 id="5-Writing-a-Graphic-Windows-Application"><a href="#5-Writing-a-Graphic-Windows-Application" class="headerlink" title="5. Writing a Graphic Windows Application"></a>5. Writing a Graphic Windows Application</h2><h4 id="5-1-MessageBox-Function"><a href="#5-1-MessageBox-Function" class="headerlink" title="5.1    MessageBox Function"></a>5.1    MessageBox Function</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MessageBox PROTO,</span><br><span class="line">	hWnd:DWORD,					; a handle to the current window</span><br><span class="line">	lpText:PTR BYTE,			; ptr to string inside the box</span><br><span class="line">    lpCaption:PTR BYTE,			; ptr to string	in caption&#x27;s bar</span><br><span class="line">	uTyle:DWORD					; describe icon</span><br><span class="line"></span><br><span class="line">.data</span><br><span class="line">hMainWnd DWORD ?</span><br><span class="line">QuestionText BYTE &quot;Register this program now?&quot;, 0</span><br><span class="line">QuestionTitle BYTE &quot;Trial Period Has Expired&quot;, 0</span><br><span class="line">.code</span><br><span class="line">INVOKE MessageBox, hMainWnd, ADDR QuestionText, ADDR QuestionTitle,</span><br><span class="line">	MB_OK + MB_ICONQUESTION</span><br></pre></td></tr></table></figure>

<h4 id="5-2-Required-Files"><a href="#5-2-Required-Files" class="headerlink" title="5.2    Required Files"></a>5.2    Required Files</h4><p><a href="https://imgtu.com/i/HL4YpF"><img src="https://s4.ax1x.com/2022/02/20/HL4YpF.png" alt="HL4YpF.png"></a></p>
<h4 id="5-3-Structures"><a href="#5-3-Structures" class="headerlink" title="5.3    Structures"></a>5.3    Structures</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MSGStruct STRUCT</span><br><span class="line">	msgWnd DWORD ?</span><br><span class="line">	msgMessage DWORD ?</span><br><span class="line">	msgWparam DWORD ?</span><br><span class="line">	msgLparam DWORD ?</span><br><span class="line">	msgTime DWORD ?</span><br><span class="line">	msgPt POINT &lt;&gt;</span><br><span class="line">MSGStruct ENDS</span><br><span class="line"></span><br><span class="line">; each window belongs to a class and each program defines a window class for its main window</span><br><span class="line">WNDCLASS STRUCT</span><br><span class="line">	style DWORD ?				; window style options	</span><br><span class="line">	lpfnWndProc DWORD ?			; winproc function pointer</span><br><span class="line">	cbClsExtra DWORD ?			; shared memory</span><br><span class="line">	cbWndExtra DWORD ?			; number of extra bytes</span><br><span class="line">	hInstance DWORD ?			; handle to current program</span><br><span class="line">	hIcon DWORD ?				; handle to icon</span><br><span class="line">	hCursor DWORD ?				; handle to cursor</span><br><span class="line">	hbrBackground DWORD ?		; handle to background brush</span><br><span class="line">	lpszMenuName DWORD ?		; pointer to menu name</span><br><span class="line">	lpszClassName DWORD ?		; pointer ro winclass name</span><br><span class="line">WNDCLASS ENDS</span><br></pre></td></tr></table></figure>

<p><a href="https://imgtu.com/i/HL52CT"><img src="https://s4.ax1x.com/2022/02/20/HL52CT.png" alt="HL52CT.png"></a></p>
<h4 id="5-4-WinMain-Procedure"><a href="#5-4-WinMain-Procedure" class="headerlink" title="5.4    WinMain Procedure"></a>5.4    WinMain Procedure</h4><p>every windows application needs a startup procedure named WinMain</p>
<p>Get a handle to the current program</p>
<p>Load the program’s icon and mouse cursor</p>
<p>Register the program’s main window class and identify the procedure that will process event messages for the window</p>
<p>Create the main window</p>
<p>Show and update the main window</p>
<p>Begin a loop that receives and dispatches messages</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">WindProc PROC,</span><br><span class="line">	hWnd:DWORD,			; handle to the window</span><br><span class="line">	localMsg:DWORD,     ; message ID</span><br><span class="line">	wParam:DWORD, 		; parameter 1</span><br><span class="line">	lParam:DWORD		; parameter 2</span><br></pre></td></tr></table></figure>

<h4 id="5-5-ErrorHandler-Procedure"><a href="#5-5-ErrorHandler-Procedure" class="headerlink" title="5.5    ErrorHandler Procedure"></a>5.5    ErrorHandler Procedure</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GetLastError: retrieve the system error number</span><br><span class="line">FormatMessage: retrieve the appropriate system-formatted error message string</span><br><span class="line">MessageBox: display a popup message box</span><br><span class="line">LocalFree: free the memory used by the error message string</span><br><span class="line"></span><br><span class="line">INVOKE GetLastError	; return message ID in eax</span><br><span class="line">mov messageID, eax</span><br><span class="line"></span><br><span class="line">INVOKE FormatMessage, FORMAT_MESSAGE_ALLOCATION_BUFFER + \</span><br><span class="line"> FORMAT_MESSAGE_FROM_SYSTEM, NULL, messageID, NULL, ADDR pErrorMsg, NULL, NULL</span><br><span class="line"></span><br><span class="line">INVOKE MessageBox, NULL, pErrorMsg, ADDR ErrorTitle, MB_ICONERROR + MB_OK</span><br><span class="line"></span><br><span class="line">INVOKE LocalFree, pErrorMsg</span><br><span class="line"></span><br><span class="line">Message_Loop:</span><br><span class="line">	INVOKE GetMessage, ADDR msg, NULL, NULL, NULL</span><br><span class="line">	.IF eax == 0</span><br><span class="line">		jmp Exit_Program</span><br><span class="line">	.ENDIF</span><br><span class="line">	INVOKE DispatchMessage, ADDR msg</span><br><span class="line">	jmp Message_Loop</span><br><span class="line"></span><br><span class="line">WinProc PROC, hWnd:DWORD, localMsg:DWORD,</span><br><span class="line">	wParam:WORD, lParam:DWORD</span><br><span class="line">	mov eax, localMsg</span><br><span class="line">	.IF eax == WM_LBUTTOMDOWN</span><br><span class="line">		INVOKE MessageBox, hWnd, ADDR PopupText, ADDR PopupTitle, MB_OK</span><br><span class="line">		jmp WinProcExit</span><br><span class="line">	.ELSEIF eax == WM_CREATE</span><br><span class="line">		INVOKE MessageBox, hWnd,ADDR AppLoadMsgText,ADDR AppLoadMsgTitle,MB_OK</span><br><span class="line">		jmp WinProcExit</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h2 id="6-Dynamic-Memory-Allocation"><a href="#6-Dynamic-Memory-Allocation" class="headerlink" title="6. Dynamic Memory Allocation"></a>6. Dynamic Memory Allocation</h2><p><a href="https://imgtu.com/i/HO9pc9"><img src="https://s4.ax1x.com/2022/02/20/HO9pc9.png" alt="HO9pc9.png"></a></p>
<h4 id="6-1-sample-create"><a href="#6-1-sample-create" class="headerlink" title="6.1 sample create"></a>6.1 sample create</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HEAP_START = 2000000	; 2MB</span><br><span class="line">HEAP_MAX = 400000000	; 400MB</span><br><span class="line">.data</span><br><span class="line">hHeap HANDLE ?</span><br><span class="line">.code</span><br><span class="line">INVOKE HeapCreate, 0, HEAP_START, HEAP_MAX</span><br><span class="line">.IF eax == NULL</span><br><span class="line">	jmp quit</span><br><span class="line">.ELSE</span><br><span class="line">	mov hHeap, eax</span><br><span class="line">.ENDIF</span><br></pre></td></tr></table></figure>

<h4 id="6-2-sample-free"><a href="#6-2-sample-free" class="headerlink" title="6.2    sample free"></a>6.2    sample free</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">hHeap HANDLE ?</span><br><span class="line">pArray DWORD ?</span><br><span class="line">.code</span><br><span class="line">INVOKE HeapFree, hHeap, 0, pArray</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>汇编</category>
      </categories>
      <tags>
        <tag>汇编</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编第八天</title>
    <url>/2022/02/20/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96_Day8/</url>
    <content><![CDATA[<h2 id="1-MS-DOS-and-the-IBM-PC"><a href="#1-MS-DOS-and-the-IBM-PC" class="headerlink" title="1. MS-DOS and the IBM-PC"></a>1. MS-DOS and the IBM-PC</h2><h4 id="1-1-Real-Address-Mode"><a href="#1-1-Real-Address-Mode" class="headerlink" title="1.1    Real-Address Mode"></a>1.1    Real-Address Mode</h4><p><a href="https://imgtu.com/i/HOCUPO"><img src="https://s4.ax1x.com/2022/02/20/HOCUPO.png" alt="HOCUPO.png"></a></p>
<span id="more"></span>

<h4 id="1-2-MS-DOS-Memory-Organization"><a href="#1-2-MS-DOS-Memory-Organization" class="headerlink" title="1.2    MS-DOS Memory Organization"></a>1.2    MS-DOS Memory Organization</h4><p><a href="https://imgtu.com/i/HO1g2j"><img src="https://s4.ax1x.com/2022/02/20/HO1g2j.png" alt="HO1g2j.png"></a></p>
<h4 id="1-3-Redirecting-Input-Output"><a href="#1-3-Redirecting-Input-Output" class="headerlink" title="1.3    Redirecting Input-Output"></a>1.3    Redirecting Input-Output</h4><p><a href="https://imgtu.com/i/HO1qz9"><img src="https://s4.ax1x.com/2022/02/20/HO1qz9.png" alt="HO1qz9.png"></a></p>
<h4 id="1-4-INT-Instructions"><a href="#1-4-INT-Instructions" class="headerlink" title="1.4    INT Instructions"></a>1.4    INT Instructions</h4><p>this instruction executes a software interrupt, which is called an interrupt handler.</p>
<p>The Interrupt Vector Table holds a 32-bit segment-offset address for each possible interrupt handler.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INT number</span><br><span class="line">; (number = 0..FFh)</span><br></pre></td></tr></table></figure>

<p><a href="https://imgtu.com/i/HO81hD"><img src="https://s4.ax1x.com/2022/02/20/HO81hD.png" alt="HO81hD.png"></a></p>
<h4 id="1-5-Common-Interrupts"><a href="#1-5-Common-Interrupts" class="headerlink" title="1.5     Common Interrupts"></a>1.5     Common Interrupts</h4><p><a href="https://imgtu.com/i/HOGtGF"><img src="https://s4.ax1x.com/2022/02/20/HOGtGF.png" alt="HOGtGF.png"></a></p>
<h2 id="2-MS-DOS-Function-Calls"><a href="#2-MS-DOS-Function-Calls" class="headerlink" title="2. MS-DOS Function Calls"></a>2. MS-DOS Function Calls</h2><h4 id="2-1-INT-21h-Function-4Ch-Terminate-Process"><a href="#2-1-INT-21h-Function-4Ch-Terminate-Process" class="headerlink" title="2.1    INT 21h Function 4Ch: Terminate Process"></a>2.1    INT 21h Function 4Ch: Terminate Process</h4><p>Ends the current process, returns an optional 8-bit return code to the calling process.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ah, 4Ch</span><br><span class="line">mov al, 0</span><br><span class="line">int 21h</span><br><span class="line">; same as:</span><br><span class="line">.EXIT 0</span><br></pre></td></tr></table></figure>

<h4 id="2-2-ASCII-Control-Characters"><a href="#2-2-ASCII-Control-Characters" class="headerlink" title="2.2    ASCII Control Characters"></a>2.2    ASCII Control Characters</h4><p><a href="https://imgtu.com/i/HOJjpD"><img src="https://s4.ax1x.com/2022/02/20/HOJjpD.png" alt="HOJjpD.png"></a></p>
<p><a href="https://imgtu.com/i/HOJhpF"><img src="https://s4.ax1x.com/2022/02/20/HOJhpF.png" alt="HOJhpF.png"></a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ah, 02h</span><br><span class="line">mov dl, &#x27;A&#x27;</span><br><span class="line">int 21h</span><br><span class="line"></span><br><span class="line">mov ah, 06h</span><br><span class="line">mov dl, 08h</span><br><span class="line">int 21h</span><br></pre></td></tr></table></figure>

<h4 id="2-3-Function-09h"><a href="#2-3-Function-09h" class="headerlink" title="2.3    Function 09h"></a>2.3    Function 09h</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">string BYTE &quot;This is a string$&quot;</span><br><span class="line">.code</span><br><span class="line">mov ah, 9</span><br><span class="line">mov dx, OFFSET string</span><br><span class="line">int 21h</span><br></pre></td></tr></table></figure>

<h4 id="2-4-Function-40h"><a href="#2-4-Function-40h" class="headerlink" title="2.4    Function 40h"></a>2.4    Function 40h</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">message BYTE &quot;Writing a string to the console&quot;</span><br><span class="line">bytesWritten WORD ?</span><br><span class="line">.code</span><br><span class="line">	mov ah, 40h</span><br><span class="line">	mov bx, 1</span><br><span class="line">	mov cx, LENGTHOF message</span><br><span class="line">	mov dx, OFFSET message</span><br><span class="line">	int 21h</span><br><span class="line">	mov bytesWritten, ax</span><br></pre></td></tr></table></figure>

<h4 id="2-5-Function-01h"><a href="#2-5-Function-01h" class="headerlink" title="2.5    Function 01h"></a>2.5    Function 01h</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">char BYTE ?</span><br><span class="line">.code</span><br><span class="line">mov ah, 01h</span><br><span class="line">int 21h</span><br><span class="line">mov char, al</span><br></pre></td></tr></table></figure>

<h4 id="2-6-Function-06h"><a href="#2-6-Function-06h" class="headerlink" title="2.6    Function 06h"></a>2.6    Function 06h</h4><p>Does not echo the input character</p>
<p>Does not wait for input(use the zero flag to check for an input character)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">char BYTE ?</span><br><span class="line">.code</span><br><span class="line">L1:</span><br><span class="line">	mov ah, 06h</span><br><span class="line">	mov dl, 0FFh</span><br><span class="line">	int 21h</span><br><span class="line">	jz L1</span><br><span class="line">	mov char, al</span><br><span class="line">	call DumpRegs</span><br></pre></td></tr></table></figure>

<h4 id="2-7-Function-0Ah"><a href="#2-7-Function-0Ah" class="headerlink" title="2.7    Function 0Ah"></a>2.7    Function 0Ah</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">count = 80</span><br><span class="line"></span><br><span class="line">KEYBOARD STRUCT</span><br><span class="line">	maxInput BYTE count				; max chars to input</span><br><span class="line">	inputCount BYTE ?				; actual input count</span><br><span class="line">	buffer BYTE count DUP(?)		; holds input chars</span><br><span class="line">KEYBOARD ENDS</span><br><span class="line"></span><br><span class="line">.data</span><br><span class="line">kybdData KEYBOARD &lt;&gt;</span><br><span class="line">.code</span><br><span class="line">	mov ah, 0Ah</span><br><span class="line">	mov dx, OFFSET kybdData</span><br><span class="line">	int 21h</span><br></pre></td></tr></table></figure>

<h4 id="2-8-Function-0Bh"><a href="#2-8-Function-0Bh" class="headerlink" title="2.8    Function 0Bh"></a>2.8    Function 0Bh</h4><p>get status of std input buffer</p>
<p>can be interrupted by ctrl+c</p>
<p>loop until a key is pressed. save it in a variable</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">L1:</span><br><span class="line">	mov ah, 0Bh</span><br><span class="line">	int 21h</span><br><span class="line">	cmp al, 0</span><br><span class="line">	je L1</span><br><span class="line">	mov ah, 1</span><br><span class="line">	int 21h</span><br><span class="line">	mov char, al</span><br><span class="line"></span><br><span class="line">; example: String Encryption</span><br><span class="line">XORVAL = 239</span><br><span class="line">.code</span><br><span class="line">main PROC</span><br><span class="line">	mov ax, @data</span><br><span class="line">	mov ds, ax</span><br><span class="line">L1:</span><br><span class="line">	mov ah, 6</span><br><span class="line">	mov dl, 0FFh		; don&#x27;t wait for character</span><br><span class="line">	int 21h	</span><br><span class="line">	jz L2				; quit if zf = 1</span><br><span class="line">	xor al, XORVAL</span><br><span class="line">	mov ah, 6</span><br><span class="line">	mov dl, al</span><br><span class="line">	int 21h				; write to output</span><br><span class="line">	jmp L1</span><br><span class="line">L2: EXIT</span><br></pre></td></tr></table></figure>

<h4 id="2-9-Function-3Fh"><a href="#2-9-Function-3Fh" class="headerlink" title="2.9    Function 3Fh"></a>2.9    Function 3Fh</h4><p>Reads a block of bytes</p>
<p>can be interrupted by ctrl+c</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">inputBuffer BYTE 127 DUP(0)</span><br><span class="line">bytesRead WORD ?</span><br><span class="line">.code</span><br><span class="line">mov ah, 3Fh</span><br><span class="line">mov bx, 0</span><br><span class="line">mov cx, 127</span><br><span class="line">mov dx, OFFSET inputBuffer</span><br><span class="line">int 21h</span><br><span class="line">mov bytesRead, ax</span><br></pre></td></tr></table></figure>

<h4 id="2-10-Function-2Ah"><a href="#2-10-Function-2Ah" class="headerlink" title="2.10    Function 2Ah"></a>2.10    Function 2Ah</h4><p>returns year in cx, month in dh, day in dl, and aday of week in al</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ah, 2Ah</span><br><span class="line">int 21h</span><br><span class="line">mov year, cx</span><br><span class="line">mov month, dh</span><br><span class="line">mov day, dl</span><br><span class="line">mov dayOfWeek, al</span><br></pre></td></tr></table></figure>

<h4 id="2-11-Function-2Bh"><a href="#2-11-Function-2Bh" class="headerlink" title="2.11    Function 2Bh"></a>2.11    Function 2Bh</h4><p>sets the system date.</p>
<p>AL = 0 if function was successful</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ah, 2Bh</span><br><span class="line">mov cx, year</span><br><span class="line">mov dh, month</span><br><span class="line">mov dl, day</span><br><span class="line">int 21h</span><br><span class="line">cmp al, 0</span><br><span class="line">jne failed</span><br></pre></td></tr></table></figure>

<h4 id="2-12-Function-2Ch"><a href="#2-12-Function-2Ch" class="headerlink" title="2.12    Function 2Ch"></a>2.12    Function 2Ch</h4><p>returns hours in ch, minutes in cl, seconds in dh, hundredth in dl</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ah, 2Ch</span><br><span class="line">int 21h</span><br><span class="line">mov hours, ch</span><br><span class="line">mov minutes, cl</span><br><span class="line">mov seconds, dh</span><br></pre></td></tr></table></figure>

<h4 id="2-13-Function-2Dh"><a href="#2-13-Function-2Dh" class="headerlink" title="2.13 Function 2Dh"></a>2.13 Function 2Dh</h4><p>sets the system date. AL = 0 if function was successful</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ah, 2Dh</span><br><span class="line">mov ch, hours</span><br><span class="line">mov cl, minutes</span><br><span class="line">mov dh, seconds</span><br><span class="line">int 21h</span><br><span class="line">cmp al, 0</span><br><span class="line">jne failed</span><br></pre></td></tr></table></figure>

<h2 id="3-File-Function"><a href="#3-File-Function" class="headerlink" title="3. File Function"></a>3. File Function</h2><h4 id="3-1-Function-716Ch"><a href="#3-1-Function-716Ch" class="headerlink" title="3.1 Function 716Ch"></a>3.1 Function 716Ch</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ax, 716Ch</span><br><span class="line">mov bx, 2</span><br><span class="line">mov cx, 0</span><br><span class="line">mov dx, 10h + 02h</span><br><span class="line">mov si, OFFSET Filename</span><br><span class="line">int 21h</span><br><span class="line">jc failed</span><br><span class="line">mov handle, ax</span><br><span class="line">mov actionTaken, cx</span><br></pre></td></tr></table></figure>

<h4 id="3-2-Function-3Eh"><a href="#3-2-Function-3Eh" class="headerlink" title="3.2    Function 3Eh"></a>3.2    Function 3Eh</h4><p>use the same file handle that was returned by int21h when the file was opened</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">filehandle WORD ?</span><br><span class="line">.code</span><br><span class="line">mov ah, 3Eh</span><br><span class="line">mov bx, filehandle</span><br><span class="line">int 21h</span><br><span class="line">jc failed</span><br></pre></td></tr></table></figure>

<h4 id="3-3-Function-42h"><a href="#3-3-Function-42h" class="headerlink" title="3.3    Function 42h"></a>3.3    Function 42h</h4><p>permits random access to a file</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ah, 42h</span><br><span class="line">mov al, 0</span><br><span class="line">mov bx, handle</span><br><span class="line">mov cx, offsetHi</span><br><span class="line">mov dx, offsetLo</span><br><span class="line">int 21h</span><br></pre></td></tr></table></figure>

<h4 id="3-4-Function-5706h"><a href="#3-4-Function-5706h" class="headerlink" title="3.4    Function 5706h"></a>3.4    Function 5706h</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ax, 5706h</span><br><span class="line">mov bx, handle		; handle of open file</span><br><span class="line">int 21h</span><br><span class="line">jc error</span><br><span class="line">mov date, dx</span><br><span class="line">mov time, cx</span><br><span class="line">mov millisecconds, si</span><br></pre></td></tr></table></figure>

<h2 id="4-BIOS-Introduction"><a href="#4-BIOS-Introduction" class="headerlink" title="4. BIOS Introduction"></a>4. BIOS Introduction</h2><p><a href="https://imgtu.com/i/HOxIxA"><img src="https://s4.ax1x.com/2022/02/20/HOxIxA.png" alt="HOxIxA.png"></a></p>
<p><a href="https://imgtu.com/i/HOzez9"><img src="https://s4.ax1x.com/2022/02/20/HOzez9.png" alt="HOzez9.png"></a></p>
<h2 id="5-Keyboard-Input-with-INT-16h"><a href="#5-Keyboard-Input-with-INT-16h" class="headerlink" title="5. Keyboard Input with INT 16h"></a>5. Keyboard Input with INT 16h</h2><p><a href="https://imgtu.com/i/HXSd1J"><img src="https://s4.ax1x.com/2022/02/20/HXSd1J.png" alt="HXSd1J.png"></a></p>
<p><a href="https://imgtu.com/i/HXSXcj"><img src="https://s4.ax1x.com/2022/02/20/HXSXcj.png" alt="HXSXcj.png"></a></p>
<p><a href="https://imgtu.com/i/HXpEv9"><img src="https://s4.ax1x.com/2022/02/20/HXpEv9.png" alt="HXpEv9.png"></a></p>
<h4 id="5-1-Function-10h"><a href="#5-1-Function-10h" class="headerlink" title="5.1    Function 10h"></a>5.1    Function 10h</h4><p>if a key is in buffer, returns it immediately. Or, pauses and waits for user input</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">scanCode BYTE ?</span><br><span class="line">ASCIICode BYTE ?</span><br><span class="line"></span><br><span class="line">.code</span><br><span class="line">mov ah, 10h</span><br><span class="line">int 16h</span><br><span class="line">mov scanCode, ah</span><br><span class="line">mov ASCIICode, al</span><br></pre></td></tr></table></figure>

<h4 id="5-2-Function-12h"><a href="#5-2-Function-12h" class="headerlink" title="5.2    Function 12h"></a>5.2    Function 12h</h4><p>retrieves a copy of the keyboard status flags from the BIOS data area</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">keyFlags WORD ?</span><br><span class="line">.code</span><br><span class="line">mov ah, 12h</span><br><span class="line">int 16h</span><br><span class="line">mov keyFlags, ax</span><br></pre></td></tr></table></figure>

<h4 id="5-3-Function-11h"><a href="#5-3-Function-11h" class="headerlink" title="5.3    Function 11h"></a>5.3    Function 11h</h4><p>clear the zero flag if a key is waiting in the buffer</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">L1:</span><br><span class="line">	mov ah, 11h</span><br><span class="line">	int 16h</span><br><span class="line">	jz noKey</span><br><span class="line">	mov ah, 10h</span><br><span class="line">	int 16h</span><br><span class="line">	cmp ah, scanCode</span><br><span class="line">	je quit</span><br><span class="line">	jmp L1</span><br><span class="line">noKey:</span><br><span class="line">	or al, 1</span><br><span class="line">quit:</span><br></pre></td></tr></table></figure>

<h2 id="6-VIDEO-Programming-with-INT-10h"><a href="#6-VIDEO-Programming-with-INT-10h" class="headerlink" title="6. VIDEO Programming with INT 10h"></a>6. VIDEO Programming with INT 10h</h2><h4 id="6-1-Three-levels-of-Video-Access"><a href="#6-1-Three-levels-of-Video-Access" class="headerlink" title="6.1    Three levels of Video Access"></a>6.1    Three levels of Video Access</h4><p><a href="https://imgtu.com/i/HjMyGQ"><img src="https://s4.ax1x.com/2022/02/21/HjMyGQ.png" alt="HjMyGQ.png"></a></p>
<p><a href="https://imgtu.com/i/HjQpJe"><img src="https://s4.ax1x.com/2022/02/21/HjQpJe.png" alt="HjQpJe.png"></a></p>
<h4 id="6-2-Displaying-a-Color-String"><a href="#6-2-Displaying-a-Color-String" class="headerlink" title="6.2    Displaying a Color String"></a>6.2    Displaying a Color String</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov si, OFFSET string</span><br><span class="line">...</span><br><span class="line">mov ah, 9				; write character</span><br><span class="line">mov al, [si]			; character to display</span><br><span class="line">mov bh, 0				; video page 0</span><br><span class="line">mov bl, color			; attribute</span><br><span class="line">or bl, 10000000b		; set blink/intensity bit</span><br><span class="line">mov cx, 1				; display it one time</span><br><span class="line">int 10h</span><br></pre></td></tr></table></figure>

<h4 id="6-3-DrawLine-Program"><a href="#6-3-DrawLine-Program" class="headerlink" title="6.3    DrawLine Program"></a>6.3    DrawLine Program</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ah, 0Ch					; white graphics pixel</span><br><span class="line">mov al, color				; pixel color</span><br><span class="line">mov bh, 0					; video page 0</span><br><span class="line">mov cx, currentX</span><br><span class="line">int 10h</span><br></pre></td></tr></table></figure>

<h4 id="6-4-Memory-Mapped-Graphics"><a href="#6-4-Memory-Mapped-Graphics" class="headerlink" title="6.4    Memory-Mapped Graphics"></a>6.4    Memory-Mapped Graphics</h4><p><a href="https://imgtu.com/i/HjwA3t"><img src="https://s4.ax1x.com/2022/02/21/HjwA3t.png" alt="HjwA3t.png"></a></p>
<h4 id="6-5-OUT-Instruction"><a href="#6-5-OUT-Instruction" class="headerlink" title="6.5    OUT Instruction"></a>6.5    OUT Instruction</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov dx, 3c8h		; port address</span><br><span class="line">mov al, 20h			; value to be sent</span><br><span class="line">out dx, al			; send to the port</span><br></pre></td></tr></table></figure>

<h2 id="7-Mouse-Programming"><a href="#7-Mouse-Programming" class="headerlink" title="7. Mouse Programming"></a>7. Mouse Programming</h2><h4 id="7-1-INT-33h"><a href="#7-1-INT-33h" class="headerlink" title="7.1    INT 33h"></a>7.1    INT 33h</h4><p>ax = 0, reset mouse and get status</p>
<p>ax = 1, show mouse</p>
<p>ax = 2, hide mouse</p>
<p>ax = 3, get mouse position &amp; status</p>
<p>ax = 4, set mouse position</p>
<p>ax = 5, get button press information</p>
<p>ax = 6, get button release information</p>
<p>ax = 7, set horizontal limits</p>
<p>ax = 8, set vertical limits</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ax, 0</span><br><span class="line">int 33h</span><br><span class="line">cmp ax, 0</span><br><span class="line">je MouseNotAvailable</span><br><span class="line">mov numberOfButtons, bx</span><br><span class="line"></span><br><span class="line">mov ax, 1</span><br><span class="line">int 33h</span><br><span class="line">mov ax, 2</span><br><span class="line">int 33h</span><br><span class="line"></span><br><span class="line">mov ax, 3</span><br><span class="line">int 33h</span><br><span class="line">test bx, 1</span><br><span class="line">jne Left_Button_Down</span><br><span class="line">text bx, 2</span><br><span class="line">jne Right_Button_Down</span><br><span class="line">text bx,4</span><br><span class="line">jne Center_Button_Down</span><br><span class="line">mov xCoord, cx</span><br><span class="line">mov yCoord, dx</span><br><span class="line"></span><br><span class="line">mov ax, 4</span><br><span class="line">mov cx, 200</span><br><span class="line">mov dx, 100</span><br><span class="line">int 33h</span><br><span class="line"></span><br><span class="line">mov ax, 5</span><br><span class="line">mov bx, 0</span><br><span class="line">int 33h</span><br><span class="line">test ax, 1		; left button down?</span><br><span class="line">jz skip			; no - skip</span><br><span class="line">mov X_coord, cx</span><br><span class="line">mov Y_coord, dx	; save coordinates</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>汇编</category>
      </categories>
      <tags>
        <tag>汇编</tag>
      </tags>
  </entry>
  <entry>
    <title>汇编第Ⅸ天</title>
    <url>/2022/02/20/%E6%B1%87%E7%BC%96/%E6%B1%87%E7%BC%96_Day9/</url>
    <content><![CDATA[<h2 id="1-Defining-Segments"><a href="#1-Defining-Segments" class="headerlink" title="1.    Defining Segments"></a>1.    Defining Segments</h2><p><a href="https://imgtu.com/i/HjgpHx"><img src="https://s4.ax1x.com/2022/02/21/HjgpHx.png" alt="HjgpHx.png"></a></p>
<span id="more"></span>

<p><a href="https://imgtu.com/i/HjgPUK"><img src="https://s4.ax1x.com/2022/02/21/HjgPUK.png" alt="HjgPUK.png"></a></p>
<h4 id="1-1-NEAR-and-FAR-Segment"><a href="#1-1-NEAR-and-FAR-Segment" class="headerlink" title="1.1    NEAR and FAR Segment"></a>1.1    NEAR and FAR Segment</h4><p><a href="https://imgtu.com/i/HjgKVP"><img src="https://s4.ax1x.com/2022/02/21/HjgKVP.png" alt="HjgKVP.png"></a></p>
<h4 id="1-2-MODEL-Directive"><a href="#1-2-MODEL-Directive" class="headerlink" title="1.2    .MODEL Directive"></a>1.2    .MODEL Directive</h4><p><a href="https://imgtu.com/i/HjgWa6"><img src="https://s4.ax1x.com/2022/02/21/HjgWa6.png" alt="HjgWa6.png"></a></p>
<p><a href="https://imgtu.com/i/HjgHsA"><img src="https://s4.ax1x.com/2022/02/21/HjgHsA.png" alt="HjgHsA.png"></a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">;	syntax:</span><br><span class="line">		.MODEL type, language, stackdistance</span><br><span class="line">;	StackDistance can be NEARSTACK, FARSTACK(stack and data aren&#x27;t together)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-STACK-Directive"><a href="#1-3-STACK-Directive" class="headerlink" title="1.3    .STACK Directive"></a>1.3    .STACK Directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; Syntax: .STACK [stacksize]</span><br><span class="line">; default 1024</span><br><span class="line">; example</span><br><span class="line">.stack 2048</span><br></pre></td></tr></table></figure>

<h4 id="1-4-CODE-Directive"><a href="#1-4-CODE-Directive" class="headerlink" title="1.4    .CODE Directive"></a>1.4    .CODE Directive</h4><p><a href="https://imgtu.com/i/HjRGBn"><img src="https://s4.ax1x.com/2022/02/21/HjRGBn.png" alt="HjRGBn.png"></a></p>
<h4 id="1-5-Near-Data-Segments"><a href="#1-5-Near-Data-Segments" class="headerlink" title="1.5    Near Data Segments"></a>1.5    Near Data Segments</h4><p><a href="https://imgtu.com/i/HjRBjJ"><img src="https://s4.ax1x.com/2022/02/21/HjRBjJ.png" alt="HjRBjJ.png"></a></p>
<h4 id="1-6-Far-Data-Segments"><a href="#1-6-Far-Data-Segments" class="headerlink" title="1.6    Far Data Segments"></a>1.6    Far Data Segments</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.FARDATA</span><br><span class="line">myVar</span><br><span class="line">.CODE</span><br><span class="line">	mov ax, SEG myVar		; SEG operator returns the segment value of a lab.</span><br><span class="line">	mov ds, ax</span><br></pre></td></tr></table></figure>

<h4 id="1-7-SEGMENT-Directive"><a href="#1-7-SEGMENT-Directive" class="headerlink" title="1.7    SEGMENT Directive"></a>1.7    SEGMENT Directive</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">name SEGMENT [align][combine][&#x27;class&#x27;]</span><br><span class="line">	statements</span><br><span class="line">name ENDS</span><br><span class="line">; name: ExtraData</span><br><span class="line">; paragraph align type (starts on 16-byte boundary)</span><br><span class="line">; public combine type</span><br><span class="line">; &#x27;DATA&#x27;</span><br><span class="line">ExtraData SEGMENT PARA PUBLIC &#x27;DATA&#x27;</span><br><span class="line">	var1 BYTE 1</span><br><span class="line">	var2 WORD 2</span><br><span class="line">ExtraData ENDS</span><br></pre></td></tr></table></figure>

<h4 id="1-8-ASSUME-Directive"><a href="#1-8-ASSUME-Directive" class="headerlink" title="1.8    ASSUME Directive"></a>1.8    ASSUME Directive</h4><p>tells the assembler how to calculate the offsets of labels</p>
<p>associates a segment register with a segment name</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; syntax:</span><br><span class="line">	ASSUME segreg:segname [,segreg:segname]</span><br><span class="line">; example</span><br><span class="line">	ASSUME cs:myCode, ds:Data, ss:myStack</span><br><span class="line">	ASSUME es:ExtraData</span><br></pre></td></tr></table></figure>

<h4 id="1-9-Multiple-Data-Segments"><a href="#1-9-Multiple-Data-Segments" class="headerlink" title="1.9    Multiple Data Segments"></a>1.9    Multiple Data Segments</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; example 1</span><br><span class="line">cseg SEGMENT &#x27;CODE&#x27;</span><br><span class="line">ASSUME cs:cseg, ds:data1, es:data2, ss:mystack</span><br><span class="line"></span><br><span class="line">main PROC</span><br><span class="line">	mov ax, data1			; ds points to data1</span><br><span class="line">	mov ds, ax</span><br><span class="line">	mov ax, SEG val2		; es points to data2</span><br><span class="line">	mov es, ax</span><br><span class="line">	mov ax, val1</span><br><span class="line">	mov bx, val2</span><br><span class="line">	mov ax, 4C00h			; same as .exit</span><br><span class="line">	int 21h</span><br><span class="line">main ENDP</span><br><span class="line">cseg ENDS</span><br><span class="line"></span><br><span class="line">; example 2</span><br><span class="line">data1 SEGMENT &#x27;DATA&#x27;</span><br><span class="line">	var1 WORD 1001h</span><br><span class="line">data1 ENDS</span><br><span class="line"></span><br><span class="line">data2 SEGMENT &#x27;DATA&#x27;</span><br><span class="line">	var2 WORD 1002h</span><br><span class="line">data2 ENDS</span><br><span class="line"></span><br><span class="line">myStack SEGMENT PARA STACK &#x27;STACK&#x27;</span><br><span class="line">	BYTE 100h DUP(&#x27;S&#x27;)</span><br><span class="line">myStack ENDS</span><br><span class="line">END MAIN</span><br></pre></td></tr></table></figure>

<h2 id="2-Interrupt-Handling"><a href="#2-Interrupt-Handling" class="headerlink" title="2. Interrupt Handling"></a>2. Interrupt Handling</h2><h4 id="2-1-Interrupt-Vector-Table"><a href="#2-1-Interrupt-Vector-Table" class="headerlink" title="2.1    Interrupt Vector Table"></a>2.1    Interrupt Vector Table</h4><p><a href="https://imgtu.com/i/HjjMdK"><img src="https://s4.ax1x.com/2022/02/21/HjjMdK.png" alt="HjjMdK.png"></a></p>
<h4 id="2-2-Hardware-Interrupt"><a href="#2-2-Hardware-Interrupt" class="headerlink" title="2.2    Hardware Interrupt"></a>2.2    Hardware Interrupt</h4><p><a href="https://imgtu.com/i/HjjvFO"><img src="https://s4.ax1x.com/2022/02/21/HjjvFO.png" alt="HjjvFO.png"></a></p>
<h4 id="2-3-Common-IRQ-Assignments"><a href="#2-3-Common-IRQ-Assignments" class="headerlink" title="2.3    Common IRQ Assignments"></a>2.3    Common IRQ Assignments</h4><p><a href="https://imgtu.com/i/HjvPOI"><img src="https://s4.ax1x.com/2022/02/21/HjvPOI.png" alt="HjvPOI.png"></a></p>
<p><a href="https://imgtu.com/i/HjvATf"><img src="https://s4.ax1x.com/2022/02/21/HjvATf.png" alt="HjvATf.png"></a></p>
<h4 id="2-4-Interrupt-Control-Instructions"><a href="#2-4-Interrupt-Control-Instructions" class="headerlink" title="2.4    Interrupt Control Instructions"></a>2.4    Interrupt Control Instructions</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">; STI = set interrupt flag</span><br><span class="line">- enable external interrupts</span><br><span class="line">- executed at beginning of an interrupt handler</span><br><span class="line">; CLI = clear interrupt flag</span><br><span class="line">- disable external interrupts</span><br><span class="line">- used before critical code sections that can&#x27;t be interrupt</span><br><span class="line">- suspends the system timer</span><br></pre></td></tr></table></figure>

<h4 id="2-5-Writing-a-Custom-Interrupt-Handler"><a href="#2-5-Writing-a-Custom-Interrupt-Handler" class="headerlink" title="2.5    Writing a Custom Interrupt Handler"></a>2.5    Writing a Custom Interrupt Handler</h4><p><a href="https://imgtu.com/i/HjxpNT"><img src="https://s4.ax1x.com/2022/02/21/HjxpNT.png" alt="HjxpNT.png"></a></p>
<p>-tip0: Function 35h get interrupt vector, returns segment offset addr of handler in es:bx</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.data</span><br><span class="line">int9Save LABEL WORD</span><br><span class="line">vector DWORD ?</span><br><span class="line">.code</span><br><span class="line">mov ah, 35h				; get interrupt</span><br><span class="line">mov al, 9				; for int 9</span><br><span class="line">int 21h					; call MS-DOS</span><br><span class="line">mov int9Save, bx		; store the offset</span><br><span class="line">mov [int9Save+2],es		; store the segment</span><br></pre></td></tr></table></figure>

<p>-tip1: Function 25h, set interrupt vector installs new interrupt handler, pointed to by ds:dx</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mov ax, SEG kybd_rtn</span><br><span class="line">mov ds, ax</span><br><span class="line">mov dx, OFFSET kybd_rtn</span><br><span class="line">mov ah, 25h</span><br><span class="line">mov al, 9h</span><br><span class="line">int 25h</span><br></pre></td></tr></table></figure>

<h4 id="2-6-Keyboard-Processing-Steps"><a href="#2-6-Keyboard-Processing-Steps" class="headerlink" title="2.6    Keyboard Processing Steps"></a>2.6    Keyboard Processing Steps</h4><p><a href="https://imgtu.com/i/HvyQYD"><img src="https://s4.ax1x.com/2022/02/21/HvyQYD.png" alt="HvyQYD.png"></a></p>
<p><a href="https://imgtu.com/i/HvywtS"><img src="https://s4.ax1x.com/2022/02/21/HvywtS.png" alt="HvywtS.png"></a></p>
<h4 id="2-7-Terminate-and-Stay-Resident-Programs"><a href="#2-7-Terminate-and-Stay-Resident-Programs" class="headerlink" title="2.7    Terminate and Stay Resident Programs"></a>2.7    Terminate and Stay Resident Programs</h4><p>installed in memory until removed by a removal program or by rebooting</p>
<h4 id="2-8-Hardware-Control-Using-I-0-Ports"><a href="#2-8-Hardware-Control-Using-I-0-Ports" class="headerlink" title="2.8    Hardware Control Using I/0 Ports"></a>2.8    Hardware Control Using I/0 Ports</h4><p><a href="https://imgtu.com/i/Hv6I58"><img src="https://s4.ax1x.com/2022/02/21/Hv6I58.png" alt="Hv6I58.png"></a></p>
<p><a href="https://imgtu.com/i/Hv6TPS"><img src="https://s4.ax1x.com/2022/02/21/Hv6TPS.png" alt="Hv6TPS.png"></a></p>
]]></content>
      <categories>
        <category>汇编</category>
      </categories>
      <tags>
        <tag>汇编</tag>
      </tags>
  </entry>
  <entry>
    <title>计网学习</title>
    <url>/2022/09/09/%E8%AE%A1%E7%BD%91/%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="概论"><a href="#概论" class="headerlink" title="概论"></a>概论</h1><p>端系统通过<code>接入ISP</code>接入互联网。而<code>接入ISP</code>需要进一步互联，这样任意两个主机才能互相发送分组。可选方案，将<code>接入ISP</code>接入到<code>国家或全球ISP</code>。</p>
<p>而国家ISP直接可以使用peering link互联，也可使用IXP（internet exchange point）。可能出现区域网络，接入运行运营商isp（国家）和接入isp。最近还有content provider network 内容提供商网络，例如google，运行自己的网络。</p>
<h2 id="网络核心"><a href="#网络核心" class="headerlink" title="网络核心"></a>网络核心</h2><p>网络核心的关键功能：路由(routing)+转发(forwarding)。</p>
<h3 id="数据交换"><a href="#数据交换" class="headerlink" title="数据交换"></a>数据交换</h3><p>电路交换、报文交换、分组交换。</p>
<h5 id="电路交换-circuit-switching"><a href="#电路交换-circuit-switching" class="headerlink" title="电路交换(circuit switching)"></a>电路交换(circuit switching)</h5><p>建立连接（呼叫），通信，释放连接</p>
<p>独占资源！！如何解决？多路复用Multiplexing</p>
<h6 id="频分多路复用-FDM"><a href="#频分多路复用-FDM" class="headerlink" title="频分多路复用 FDM"></a>频分多路复用 FDM</h6><p>用户占用不同的频率带宽。</p>
<h6 id="时分多路复用-TDM"><a href="#时分多路复用-TDM" class="headerlink" title="时分多路复用 TDM"></a>时分多路复用 TDM</h6><p>将时间按TDM帧划分，每个TDM帧内划分各用户的帧。在不同的时间占用相同的频率带宽。</p>
<h6 id="波分多路复用-WDM"><a href="#波分多路复用-WDM" class="headerlink" title="波分多路复用 WDM"></a>波分多路复用 WDM</h6><p>光的频分复用。</p>
<h6 id="码分多路复用-CDM"><a href="#码分多路复用-CDM" class="headerlink" title="码分多路复用 CDM"></a>码分多路复用 CDM</h6><p>广泛用于无线链路共享。每个用户分配唯一的m bit码片序列，0用-1表示，-1用+1表示。</p>
<p>用户使用相同频率波段，编码信号=原始数据*码片序列。若发送1，发送自己的m码序列。</p>
<p>各用户码片序列相互正交。</p>
<h5 id="报文交换"><a href="#报文交换" class="headerlink" title="报文交换"></a>报文交换</h5><p>源发送信息整体，比如一个文件。</p>
<h5 id="分组交换-package-switching"><a href="#分组交换-package-switching" class="headerlink" title="分组交换(package switching)"></a>分组交换(package switching)</h5><p>报文分拆的一系列相对较小的数据包。需要报文的拆分与重组。产生额外开销。</p>
<h6 id="统计多路复用"><a href="#统计多路复用" class="headerlink" title="统计多路复用"></a>统计多路复用</h6><p>报文交换与分组交换均采用存储-转发交换方式。缓存？</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220829192710129.png" alt="image-20220829192710129"></p>
<p>传输延迟：比较报文交换与分组交换</p>
<p>分组传输延迟（时延）= $\frac{L}{R}$</p>
<p>分组交换的报文交付时间$T=M/R+nL/R$，M为报文大小，R为链路带宽，分组大小为L，路由器数为n。</p>
<p>比较分组交换与电路交换：</p>
<p>对于同一带宽链路，电路交换能容纳的用户小于分组交换。</p>
<p>适用于突发数据传输网络，资源充分共享、简单无需呼叫建立。</p>
<p>但分组交换可能产生拥塞，分组延迟和丢失。需要协议处理可靠数据传输和拥塞控制。</p>
<h3 id="计算机网络性能："><a href="#计算机网络性能：" class="headerlink" title="计算机网络性能："></a>计算机网络性能：</h3><h4 id="速率"><a href="#速率" class="headerlink" title="速率"></a>速率</h4><p>数据率或数据传输速率或比特率。额定速率或标称速率。</p>
<h4 id="带宽"><a href="#带宽" class="headerlink" title="带宽"></a>带宽</h4><p>bandwidth，数据信道能够传送的最高数据率bps</p>
<h4 id="延迟-时延delay-latency"><a href="#延迟-时延delay-latency" class="headerlink" title="延迟/时延delay latency"></a>延迟/时延delay latency</h4><p>分组交换为什么会发生丢包和时延？</p>
<p>分组在路由器缓存中排队，分组到达速率超出输出链路的速率。</p>
<p>四种分组延迟：</p>
<p>$d_{proc}$节点处理延迟，差错检测，确定输出链路，通常小于ms单位</p>
<p>$d_{queue}$排队延迟，等待输出链路可用，取决于路由器拥塞程度。</p>
<p>流量强度 $La/R$，a为平均分组到达速率，若强度-&gt;0，则平均排队延迟很小。</p>
<p>-&gt;1，平均排队延迟很大，&gt;1，超出服务能力，平均排队延迟无限大。</p>
<p>$d_{trans}$传输延迟，$d=L/R$</p>
<p>$d_{prop}$传播延迟，$d=l/s$，l为物理链路长度，信号传播速度s</p>
<p>$d_{nodal}=d_{proc}+d_{queue}+d_{trans}+d_{prop}$</p>
<h4 id="时延带宽积-传播时延-带宽"><a href="#时延带宽积-传播时延-带宽" class="headerlink" title="时延带宽积=传播时延*带宽"></a>时延带宽积=传播时延*带宽</h4><p>以bit为单位的链路长度。</p>
<h4 id="丢包率-丢包数-已发分组总数"><a href="#丢包率-丢包数-已发分组总数" class="headerlink" title="丢包率=丢包数/已发分组总数"></a>丢包率=丢包数/已发分组总数</h4><h4 id="吞吐量-率"><a href="#吞吐量-率" class="headerlink" title="吞吐量/率"></a>吞吐量/率</h4><p>吞吐量表示在发送端与接收端之间传送数据速率（即时、平均）</p>
<p>min(R_c, R_s, R/10)</p>
<h2 id="计算机分层结构"><a href="#计算机分层结构" class="headerlink" title="计算机分层结构"></a>计算机分层结构</h2><p>为什么？模块化的分层易于系统更新、维护，有利于标准化。</p>
<p>任一层实体需要使用下层服务，遵循本层协议，实现本层功能，向上层提供服务，服务是垂直的。</p>
<p>下层协议的实现对上层的服务用户是透明的。同系统的相邻层实体间通过接口进行交互，通过服务访问点SAP，交换原语，指定请求的特定服务。</p>
<h3 id="OSI参考模型"><a href="#OSI参考模型" class="headerlink" title="OSI参考模型"></a>OSI参考模型</h3><p>支持异构网络系统的互联互通，理论成功，市场失败。</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220829233609053.png" alt="image-20220829233609053"></p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220829234000938.png" alt="image-20220829234000938"></p>
<h4 id="数据封装"><a href="#数据封装" class="headerlink" title="数据封装"></a>数据封装</h4><p>增加控制信息，构造协议数据单元（PDU）</p>
<p>内容包括：</p>
<p>地址（标识发送端/接收端）、差错检测编码（用于差错检测或纠正），协议控制（优先级，服务质量，安全控制）</p>
<h4 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h4><p>接口特性：机械特性、电气特性、功能特性、规格特性</p>
<p>比特编码、数据率、比特同步（时钟同步）、传输模式（单工、半双工、全双工）</p>
<h4 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h4><p>组帧（Framing），负责节点-节点数据传输、物理寻址。</p>
<p>在帧头增加发送端或接收端的物理地址表示数据帧的发送端或接收端。</p>
<p>流量控制，避免淹没接收端。差错控制，检测并重传损坏或丢失帧，并避免重复帧。</p>
<p>访问控制，任意给定时刻决定哪个设备拥有链路控制使用权。</p>
<h4 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h4><p>负责源主机到目的主机数据分组(packet)交付。可能穿越多个网络，需要逻辑寻址，ip</p>
<h5 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h5><h4 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h4><p>负责源-目的的完整报文传输，分段与重组，SAP寻址（端到端）。</p>
<p>流量控制、连接控制、差错控制。</p>
<h4 id="会话层"><a href="#会话层" class="headerlink" title="会话层"></a>会话层</h4><p>对话控制，在数据流中插入同步点。</p>
<h4 id="表示层"><a href="#表示层" class="headerlink" title="表示层"></a>表示层</h4><p>处理两个系统间交换信息的语法与语义问题。</p>
<p>数据表示转化，转化为主机独立的编码，加密解密，压缩解压缩。</p>
<h4 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h4><p>支持用户通过用户代理或网络接口使用网络服务，FTP. SMTP, HTTP</p>
<h3 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP/IP"></a>TCP/IP</h3><p>应用层，传输层，网络层，网络接口层</p>
<h3 id="5层参考模型"><a href="#5层参考模型" class="headerlink" title="5层参考模型"></a>5层参考模型</h3><p>应用层、传输层、网络层、数据链路层、物理层</p>
<h4 id="应用层-1"><a href="#应用层-1" class="headerlink" title="应用层"></a>应用层</h4><p>FTP, SMTP, HTTP</p>
<h4 id="传输层-1"><a href="#传输层-1" class="headerlink" title="传输层"></a>传输层</h4><p>TCP, UDP</p>
<h4 id="网络层-1"><a href="#网络层-1" class="headerlink" title="网络层"></a>网络层</h4><p>IP、路由</p>
<h4 id="链路层"><a href="#链路层" class="headerlink" title="链路层"></a>链路层</h4><p>以太网、wifi，ppp</p>
<h4 id="物理层-1"><a href="#物理层-1" class="headerlink" title="物理层"></a>物理层</h4><p>比特传输</p>
<h2 id="网络应用的体系结构"><a href="#网络应用的体系结构" class="headerlink" title="网络应用的体系结构"></a>网络应用的体系结构</h2><p>C/S，P2P，Hybrid</p>
<h4 id="C-S"><a href="#C-S" class="headerlink" title="C/S"></a>C/S</h4><p>服务器24小时提供服务，永久性访问的地址，利用大量服务器实现可拓展性</p>
<p>客户机则间歇性接入网络，可能使用动态ip，不会与其他客户通信。</p>
<h4 id="P2P"><a href="#P2P" class="headerlink" title="P2P"></a>P2P</h4><p>没有永远在线的服务器，任意节点之间可以直接通信，间隙性接入网络，可能改变ip地址。</p>
<p>优点：高度可伸缩；缺点：难以管理。</p>
<h4 id="混合"><a href="#混合" class="headerlink" title="混合"></a>混合</h4><p>例如Napster，传输使用P2P，搜索采用C/S</p>
<h2 id="进程间通信"><a href="#进程间通信" class="headerlink" title="进程间通信"></a>进程间通信</h2><p>发起通信的进程等待通信请求的进程，需要进程之间的通信机制。</p>
<h3 id="套接字：socket"><a href="#套接字：socket" class="headerlink" title="套接字：socket"></a>套接字：socket</h3><p>类似寄信。如何寻址进程？</p>
<p>每个进程需要拥有标识符，首先标识主机（ip），进程端口号。</p>
<p>需要遵守应用层协议，公开协议RFC，允许互操作；私有协议。</p>
<h3 id="应用层协议"><a href="#应用层协议" class="headerlink" title="应用层协议"></a>应用层协议</h3><p>消息的类型：请求？响应？</p>
<p>消息的语法格式：有哪些字段？每个字段如何描述。</p>
<p>字段的语义：字段信息的含义</p>
<p>规则：何时、如何发送/接收消息。</p>
<h3 id="网络应用对传输服务的需求"><a href="#网络应用对传输服务的需求" class="headerlink" title="网络应用对传输服务的需求"></a>网络应用对传输服务的需求</h3><p>数据丢失和可靠性：容忍一定（网络电话），100%可靠（文件传输）</p>
<p>时间/延迟：网络电话、网络游戏</p>
<p>带宽：网络视频，某些应用可以适应任何带宽，email</p>
<h3 id="传输层提供的传输服务"><a href="#传输层提供的传输服务" class="headerlink" title="传输层提供的传输服务"></a>传输层提供的传输服务</h3><h4 id="tcp"><a href="#tcp" class="headerlink" title="tcp"></a>tcp</h4><p>面向连接，需要建立连接，全双工。可靠的数据传输，流量控制；拥塞控制，不提供时间/延迟保障，不提供最小带宽保障。</p>
<h4 id="udp"><a href="#udp" class="headerlink" title="udp"></a>udp</h4><p>无连接，不可靠的数据传输，</p>
<h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><p>包含多个对象，包括文件，图片，脚本等</p>
<p>基本的html文件：包含对其他对象引用的链接。</p>
<p>对象的寻址：URL，Scheme://host:port/path</p>
<p>遵循http协议</p>
<h3 id="http"><a href="#http" class="headerlink" title="http"></a>http</h3><p>C/S结构，使用tcp传输服务，无状态应用协议。</p>
<h5 id="http链接"><a href="#http链接" class="headerlink" title="http链接"></a>http链接</h5><p>非持久性链接：每个tcp连接的最多允许传输一个对象。HTTP1.0</p>
<p>传输后http服务器会主动关闭tcp连接。</p>
<p>RTT（Round Trip Time）从客户端发送一个很小的数据包到服务器并返回所需要的时间。</p>
<p>响应时间：</p>
<p>发起、建立tcp连接：1个RTT</p>
<p>发送http请求消息到http响应消息的前几个字节到达：1个RTT</p>
<p>响应消息中所含的文件对象传输时间。</p>
<p>总共时间：2RTT+文件发送时间</p>
<p>问题：</p>
<p>每个对象需要2个RTT，操作系统需要为每个tcp连接开销资源。</p>
<p>持久性连接：每个tcp连续允许传输多个对象。HTTP1.1</p>
<p>发送响应后，服务器保持tcp连接。同时还可分为无流水线的持久性连接和流水线的。</p>
<p>即无流水线的，客户端只有收到前一个响应后才发送新的请求，每个对象耗时一个RTT</p>
<p>流水线的，只要遇到一个引用对象就尽快发出请求，只需耗时1个RTT，所有引用。</p>
<h5 id="http信息"><a href="#http信息" class="headerlink" title="http信息"></a>http信息</h5><h6 id="请求信息"><a href="#请求信息" class="headerlink" title="请求信息"></a>请求信息</h6><p>ASCII: 人直接可读。</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220901002040746.png" alt="image-20220901002040746"></p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220901002323758.png" alt="image-20220901002323758"></p>
<h5 id="Cookie技术"><a href="#Cookie技术" class="headerlink" title="Cookie技术"></a>Cookie技术</h5><p>http无状态的，为了辨别用户身份，进行session跟踪而储存在用户本地终端上的数据</p>
<p>cookie组件：</p>
<p>http响应消息的cookie头部行，请求也有。</p>
<p>保存在客户端主机的cookie文件，由浏览器管理。</p>
<p>web服务器端的后台数据库。</p>
<h4 id="web缓存-代理服务器技术"><a href="#web缓存-代理服务器技术" class="headerlink" title="web缓存/代理服务器技术"></a>web缓存/代理服务器技术</h4><p>缩短客服请求的响应时间、减少机构组织的流量、在大范围内实现有效的内容分发。</p>
<p>缓存即充当客户端也充当服务端，一般由ISP架设。</p>
<p>缓存过期？使用条件性GET，加入if-modified-since</p>
<h2 id="Email"><a href="#Email" class="headerlink" title="Email"></a>Email</h2><p>组成构件：</p>
<p>邮件客户端（agent），邮件服务器，SMTP协议（Simple Mail Transfer Protocol）</p>
<p>服务器：</p>
<p>存储发给该用户的email，消息队列：存储等待发送的email</p>
<p>使用tcp进行email消息的可靠传输，端口25。使用持久性连接。</p>
<h4 id="与http对比"><a href="#与http对比" class="headerlink" title="与http对比"></a>与http对比</h4><p>http：拉式pull</p>
<p>smtp：推式push</p>
<p>都是用命令/响应交互模式，命令和状态代码都是ASCII码。</p>
<p>http：每个对象封装在独立的响应信息中</p>
<p>SMTP：每个对象在由多个部分构成的消息中发送。</p>
<h4 id="email的消息格式"><a href="#email的消息格式" class="headerlink" title="email的消息格式"></a>email的消息格式</h4><p>头部行：to，from，subject。</p>
<p>中间有空白行</p>
<p>消息体：消息本身，只能是ascii符号。</p>
<p>MIME：头部增加额外的行声明MIME的内容类型。</p>
<p>POP：下载并删除模式（如果换了客户端软件，无法重读该邮件），无状态</p>
<p>客户端命令User，Pass</p>
<p>服务器响应：+ok，-err</p>
<p>事务阶段：list，retr，dele，quit</p>
<p>IMAP：所有消息统一存放在一个地方：服务器</p>
<p>允许用户利用文件夹组织消息，支持跨会话的用户状态。</p>
<h2 id="DNS-Domain-Name-System"><a href="#DNS-Domain-Name-System" class="headerlink" title="DNS(Domain Name System)"></a>DNS(Domain Name System)</h2><p>域名向ip地址的翻译，主机别名，邮件服务器别名，负载均衡：web服务器（翻译成多个ip地址，轮流访问，实现负载均衡）</p>
<p>为什么不适用集中的DNS？</p>
<p>单点失败问题，流量问题，距离问题，维护性问题</p>
<p>分层：</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220901155856096.png" alt="image-20220901155856096"></p>
<p>根域名服务器：</p>
<p>本地域名解析服务器无法解析域名时，访问根域名服务器。</p>
<p>如果不知道映射，访问权威域名服务器。获得映射后向本地域名服务器返回映射。</p>
<p>TLD：顶级域名服务器</p>
<p>本地域名解析服务器，不严格属于层级体系；每个isp有一个本地域名服务器</p>
<p>DNS查询：迭代查询，递归查询</p>
<p>DNS缓存：</p>
<p>本地域名服务器一般会缓存顶级域名服务器的映射，因此根服务器不经常被访问。</p>
<p>DNS记录：</p>
<p>RR（resource records）（name，value，type，ttl）</p>
<p>type=A  name=主机域名，value=ip地址</p>
<p>type=B name=域，value=该域权威域名解析服务器的主机域名</p>
<p>type=CNAME，name=某一真实域名的别名，value=真实域名</p>
<p>type=MX，value时与name相对应的邮件服务器</p>
<p>DNS协议：</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220902104214033.png" alt="image-20220902104214033"></p>
<p>flags：</p>
<p>查询或恢复；期望递归；递归可用；权威回答；</p>
<h2 id="P2P-1"><a href="#P2P-1" class="headerlink" title="P2P"></a>P2P</h2><p>对于文件分发，当文件N变大时，最小分发时间趋于不变。</p>
<h3 id="bitorrent"><a href="#bitorrent" class="headerlink" title="bitorrent"></a>bitorrent</h3><p>文件划分为256KB的chunk，节点加入torrent，向traker注册获得节点静丹，建立连接。下载的同时，节点需要向其他节点上传chunk。节点可能加入或离开，一旦节点获得完整的文件，它可能留下或离开。</p>
<p>获取chunk，不同的节点持有文件的不同chunk集合，定期查询每个邻居所持有的chunk列表，节点发送请求，请求稀缺的chunk，稀缺优先。</p>
<p>发送chunk，tit-for-tat</p>
<p>alice向4个邻居发送chunk，速率最快的四个。每隔30s，随机选择一个节点，发送chunk。</p>
<h4 id="索引技术"><a href="#索引技术" class="headerlink" title="索引技术"></a>索引技术</h4><p>信息到节点位置（ip+端口）的映射。</p>
<h5 id="集中式索引"><a href="#集中式索引" class="headerlink" title="集中式索引"></a>集中式索引</h5><p>节点加入时，通知中央服务器，ip加内容</p>
<p>单点失效、性能瓶颈、版权问题</p>
<h5 id="洪泛式查询"><a href="#洪泛式查询" class="headerlink" title="洪泛式查询"></a>洪泛式查询</h5><p>完全分布式架构，每个节点对它共享的文件进行索引，且只对它共享的文件进行索引。</p>
<p>覆盖网络</p>
<p>类似BFS</p>
<h5 id="层次式覆盖网络"><a href="#层次式覆盖网络" class="headerlink" title="层次式覆盖网络"></a>层次式覆盖网络</h5><p>划分为两类节点，超级节点。超级节点负责洪泛式。</p>
<h2 id="Socket编程"><a href="#Socket编程" class="headerlink" title="Socket编程"></a>Socket编程</h2><p>表示通信端点：ip+端口号</p>
<p>如何管理？套接字描述符socket descriptor。</p>
<p>地址接口</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220904143959203.png" alt="image-20220904143959203"></p>
<p>winsock 需要建立与cleanup</p>
<h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><h5 id="创建套接字："><a href="#创建套接字：" class="headerlink" title="创建套接字："></a>创建套接字：</h5><p>sd = socket(protofamily, type, proto)</p>
<p>第一个参数protofamily = PF_INET</p>
<p>第二个套接字类型</p>
<p>第三个为协议号</p>
<h5 id="关闭套接字"><a href="#关闭套接字" class="headerlink" title="关闭套接字"></a>关闭套接字</h5><p>closesocket(sd)，如果多个进程共享一个套接字时，需要将引用计数减一。多线程对套接字的使用无计数。</p>
<h5 id="绑定套接字"><a href="#绑定套接字" class="headerlink" title="绑定套接字"></a>绑定套接字</h5><p>bind(sd, localaddr, addrlen)，绑定套接字的本地端口地址，ip+port</p>
<p>客户端一般不用调用bind函数，服务器端需要。</p>
<p>但若本地有多网卡，需要采用地址通配符的方式</p>
<h5 id="监听"><a href="#监听" class="headerlink" title="监听"></a>监听</h5><p>listen(sd, queuesize)，设置请求大小</p>
<h5 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h5><p>connect(sd, saddr, saddrlen)</p>
<p>客户端，tcp/udp。</p>
<h5 id="接受"><a href="#接受" class="headerlink" title="接受"></a>接受</h5><p>accept(sd, caddr, caddrlen)，调用函数从处于监听状态的流套接字sd客户链接请求队列除去排在最前的一个客户请求。</p>
<h4 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h4><h5 id="解析服务器ip地址"><a href="#解析服务器ip地址" class="headerlink" title="解析服务器ip地址"></a>解析服务器ip地址</h5><p>客户端可能使用域名或者ip地址标识服务器，IP协议许哟啊32位ip地址</p>
<p>可以inet_addr 10-&gt;32，gethostbyname 域名-&gt;32，满足网络字节顺序</p>
<h5 id="解析熟知端口号"><a href="#解析熟知端口号" class="headerlink" title="解析熟知端口号"></a>解析熟知端口号</h5><p>可以使用服务名标识，getservbyname()</p>
<h5 id="解析协议号"><a href="#解析协议号" class="headerlink" title="解析协议号"></a>解析协议号</h5><p>实现协议名到协议号的转换，getprotobyname</p>
<h4 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h4><p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220904165610055.png" alt="image-20220904165610055"></p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220904165739253.png" alt="image-20220904165739253"></p>
<h3 id="Socket服务器"><a href="#Socket服务器" class="headerlink" title="Socket服务器"></a>Socket服务器</h3><h4 id="循环无连接"><a href="#循环无连接" class="headerlink" title="循环无连接"></a>循环无连接</h4><p>一次只处理一个客户请求</p>
<h5 id="并行"><a href="#并行" class="headerlink" title="并行"></a>并行</h5><p>创建线程，处理用户的请求。</p>
<h2 id="传输层-2"><a href="#传输层-2" class="headerlink" title="传输层"></a>传输层</h2><p>提供了一种逻辑通信机制。发送方将消息分成多个segment，并传递到网络层。而接收方负责组装成消息传给应用层。</p>
<h4 id="与网络层的区别"><a href="#与网络层的区别" class="headerlink" title="与网络层的区别"></a>与网络层的区别</h4><p>网络层负责主机之间的逻辑通信机制，而传输层提供应用进程之间的逻辑通信机制。</p>
<p>传输层依赖于网络层拂去，对网络层服务进行可能的增强。位于网络层之上。</p>
<h4 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h4><h5 id="tcp-1"><a href="#tcp-1" class="headerlink" title="tcp"></a>tcp</h5><p>可靠、按序的交付服务，拥塞控制，流量控制，连接建立</p>
<h5 id="udp-1"><a href="#udp-1" class="headerlink" title="udp"></a>udp</h5><p>best-effort。</p>
<p>两种服务均不保证延迟和带宽上面的保障。</p>
<h3 id="多路复用-分用"><a href="#多路复用-分用" class="headerlink" title="多路复用/分用"></a>多路复用/分用</h3><p>若一个协议对应上层的多个协议，则需要复用/分用。</p>
<p>接收端进行多路分用，发送端进行多路复用。</p>
<h4 id="分用"><a href="#分用" class="headerlink" title="分用"></a>分用</h4><p>每个数据报会携带地址，段，端口号和目的端口号。根据对应的端口号导入对应的socket</p>
<p>tcp会做更多的处理</p>
<h5 id="无连接分用"><a href="#无连接分用" class="headerlink" title="无连接分用"></a>无连接分用</h5><p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220905191128780.png" alt="image-20220905191128780"></p>
<h5 id="面向连接的"><a href="#面向连接的" class="headerlink" title="面向连接的"></a>面向连接的</h5><p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220905191657230.png" alt="image-20220905191657230"></p>
<h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><p>多路复用多路分用，简单的错误校验。udp段可能丢失，非按序到达。</p>
<p>无连接，不需要握手，每个udp的报文段的处理独立。</p>
<p>减少延迟，实现简单，头部开销少，没有拥塞控制，应用可以更好的控制发送时间和速率。</p>
<p>用于流媒体，可靠性靠应用层增加可靠性，应用特定的错误恢复机制。</p>
<h4 id="checksum"><a href="#checksum" class="headerlink" title="checksum"></a>checksum</h4><p>检测udp在传输中是否发生错误。</p>
<p>发送方计算checksum，将段的内容视作16bit，将所有整数求和，进位放在和的后面，将得到的值按位求反，得到校验和。</p>
<p>接收方，计算接收到的校验和，不相等说明检测出错误，但相等仍然有可能产生错误。</p>
<h4 id="可靠数据传输"><a href="#可靠数据传输" class="headerlink" title="可靠数据传输"></a>可靠数据传输</h4><p>不错，不丢，不乱</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220905193514600.png" alt="image-20220905193514600"></p>
<p>数据单向流动，控制信息双向流动。</p>
<h4 id="Rdt1-0"><a href="#Rdt1-0" class="headerlink" title="Rdt1.0"></a>Rdt1.0</h4><p>可靠信道上的可靠数据传输，底层信道完全可靠。</p>
<h4 id="Rdt2-0"><a href="#Rdt2-0" class="headerlink" title="Rdt2.0"></a>Rdt2.0</h4><p>产生位错误的信道，利用校验和检测位错误。</p>
<p>如何从错误中恢复，确认机制，NAK，重传</p>
<p>ARQ（automatic repeat request）</p>
<p>引入了差错检测，接受方反馈控制消息：ACK/NAK，重传</p>
<p>但是如果ACK, NAK发生错误了会怎么样，为ACK/NAK也增加校验和并纠错</p>
<p>或者收到被破坏的数据不知道接收方发送了什么，添加额外的控制消息。</p>
<p>如果ACK/NAK坏掉，发送方重传，不能简单的重传，会产生重复的分组。</p>
<h4 id="Rdt2-1-2-2"><a href="#Rdt2-1-2-2" class="headerlink" title="Rdt2.1 2.2"></a>Rdt2.1 2.2</h4><p>添加序列号，丢弃重复分组。</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220905233735040.png" alt="image-20220905233735040"></p>
<p>接收方通过ack告知最后一个被正确接受的分组。若发送方收到重复ACK，重传。</p>
<h4 id="Rdt3-0"><a href="#Rdt3-0" class="headerlink" title="Rdt3.0"></a>Rdt3.0</h4><p>如果信道即可能发生错误，也可能丢失分组，怎么办？</p>
<p>解决方法：发送方等待合理时间，定时器</p>
<h4 id="流水线协议"><a href="#流水线协议" class="headerlink" title="流水线协议"></a>流水线协议</h4><p>需要更大的序列号范围，需要更大的存储空间以缓存分组。</p>
<h4 id="滑动窗口协议"><a href="#滑动窗口协议" class="headerlink" title="滑动窗口协议"></a>滑动窗口协议</h4><h6 id="GBN"><a href="#GBN" class="headerlink" title="GBN"></a>GBN</h6><p>ACK(n)为累计确认机制，需要为空中的分组设置计时器，即重传序列号大于等于n，还未收到ACK的所有分组。</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220906104719516.png" alt="image-20220906104719516"></p>
<h6 id="Selective-repeat"><a href="#Selective-repeat" class="headerlink" title="Selective repeat"></a>Selective repeat</h6><p>重传过多，对每个分组单独确认，设置缓存机制，缓存乱序到达的分组。</p>
<p>发送方只重传没收到ACK的分组，需要为每个分组设置定时器。 </p>
<p>$N_s+N_r\le 2^k$</p>
<h2 id="tcp-2"><a href="#tcp-2" class="headerlink" title="tcp"></a>tcp</h2><p>序列号指的是segment第一个字节的编号而不是segment的编号。</p>
<p>在建立tcp连接时，随机选择序列号。</p>
<p>acks：希望接收到的下一个字节的序列号，累计确认机制。</p>
<h3 id="tcp的可靠数据传输"><a href="#tcp的可靠数据传输" class="headerlink" title="tcp的可靠数据传输"></a>tcp的可靠数据传输</h3><h4 id="超时时间"><a href="#超时时间" class="headerlink" title="超时时间"></a>超时时间</h4><p>起码大于RTT，多次测量，丘指数加权移动平均</p>
<p>timeoutinterval = estimate RTT + 4*devrtt</p>
<h4 id="快速重传机制"><a href="#快速重传机制" class="headerlink" title="快速重传机制"></a>快速重传机制</h4><p>如果收到对同一数据的3个ack，则假定之后的段已经丢失</p>
<h3 id="流量控制"><a href="#流量控制" class="headerlink" title="流量控制"></a>流量控制</h3><p>接收方为tcp连接提供buffer，计算可用空间返回给发送方。</p>
<p>若剩余空间为0，发送方仍然能够发送很小的一个段。否则不会再返回信息。</p>
<h3 id="连接管理"><a href="#连接管理" class="headerlink" title="连接管理"></a>连接管理</h3><p>三次握手，第一次客户主机向服务器发送SYN，返回SYNACK，服务器分配缓存，选择自己的序列号。</p>
<p>当收到SYNACK，会答复ACK，包含data</p>
<p>四次挥手，<img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220906172743550.png" alt="image-20220906172743550"></p>
<h3 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h3><p>发送速率太快以至于网络无法处理（排队时间）</p>
<p>拥塞的代价：<img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220906174136232.png" alt="image-20220906174136232"></p>
<h4 id="端到端的拥塞控制"><a href="#端到端的拥塞控制" class="headerlink" title="端到端的拥塞控制"></a>端到端的拥塞控制</h4><p>网络层不需要显示的提供支持</p>
<p>通过观察loss，delay等网络行为判断是否发生拥塞。tcp</p>
<h5 id="LastByteSent-LastByteAcked-lt-congwin"><a href="#LastByteSent-LastByteAcked-lt-congwin" class="headerlink" title="LastByteSent - LastByteAcked &lt;= congwin"></a>LastByteSent - LastByteAcked &lt;= congwin</h5><p>rate = Congwin / RTT</p>
<p>如何感知网络拥塞：timeout或三个重复ack</p>
<p>如何合理的调整发送速率：</p>
<h5 id="加性增-乘性减"><a href="#加性增-乘性减" class="headerlink" title="加性增-乘性减"></a>加性增-乘性减</h5><p>逐渐增加发送速率，谨慎探测可用带宽</p>
<p>每个RTT将Congwin增加一个MSS，当发生loss时将congwin减半</p>
<h5 id="慢启动"><a href="#慢启动" class="headerlink" title="慢启动"></a>慢启动</h5><p>刚开始时希望快速增长，即连接开始时，指数型增长。</p>
<h5 id="threshold"><a href="#threshold" class="headerlink" title="threshold"></a>threshold</h5><p>当超过threshold之后，应切换成线性增长。</p>
<h5 id="loss处理"><a href="#loss处理" class="headerlink" title="loss处理"></a>loss处理</h5><p>3个重复ack，采用reno</p>
<p>timeout，congwin设为1个mss，然后指数增长。</p>
<h4 id="网络辅助的拥塞控制"><a href="#网络辅助的拥塞控制" class="headerlink" title="网络辅助的拥塞控制"></a>网络辅助的拥塞控制</h4><h5 id="ABR"><a href="#ABR" class="headerlink" title="ABR"></a>ABR</h5><p>如果发送方路径拥塞，将发送速率降到最低保障速率</p>
<h5 id="RM"><a href="#RM" class="headerlink" title="RM"></a>RM</h5><p>交换机设置RMcell位，发送给接收方，再由接收方返回给发送方</p>
<h3 id="tcp性能分析"><a href="#tcp性能分析" class="headerlink" title="tcp性能分析"></a>tcp性能分析</h3><h4 id="吞吐率"><a href="#吞吐率" class="headerlink" title="吞吐率"></a>吞吐率</h4><p>要求高带宽，则要求非常低的丢包率。</p>
<h4 id="公平性"><a href="#公平性" class="headerlink" title="公平性"></a>公平性</h4><p>tcp之间是具有公平性的；</p>
<h2 id="网络层-2"><a href="#网络层-2" class="headerlink" title="网络层"></a>网络层</h2><p>转发和路由</p>
<h3 id="服务模型"><a href="#服务模型" class="headerlink" title="服务模型"></a>服务模型</h3><h5 id="无连接服务（数据包网络）"><a href="#无连接服务（数据包网络）" class="headerlink" title="无连接服务（数据包网络）"></a>无连接服务（数据包网络）</h5><p>不事先为系列分组的传输确定传输路径，不同分组独立确定传输路径。</p>
<p>转发时采用最长前缀匹配优先原则。</p>
<h5 id="连接服务（虚电路网络）"><a href="#连接服务（虚电路网络）" class="headerlink" title="连接服务（虚电路网络）"></a>连接服务（虚电路网络）</h5><p>需要实现确定路径，所有分组沿着相同路径。</p>
<p>分组交换，每个分组的传输利用链路的全部带宽。由于路由器的大小不同，虚电路号也会有所不同。转发表如下：</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220907004528918.png" alt="image-20220907004528918"></p>
<h4 id="虚电路信令协议"><a href="#虚电路信令协议" class="headerlink" title="虚电路信令协议"></a>虚电路信令协议</h4><p>目前的internet不采用</p>
<h3 id="IP协议"><a href="#IP协议" class="headerlink" title="IP协议"></a>IP协议</h3><p> 版本号：ipv4，ipv6</p>
<p>首部长度：以4个字节为单位，相当于几行</p>
<p>服务类型：指示期望获得那种类型的服务</p>
<p>总长度：16位，可以封装的最大数据为65535-20B</p>
<p>标识：16位，标识一个ip分组</p>
<p>标志位：占3位，DF=1禁止分片，MF=1，不是最后一片</p>
<p>片偏移：数据的相对偏移量，以8个bit为单位</p>
<p>ttl：ip分组在网络中可以通过的路由器数，每转发一次ttl-1；若ttl=0，丢弃该分组</p>
<p>协议：tcp or udp</p>
<p>首部校验和：对首部进行查出错检测，逐跳计算，逐跳校验</p>
<p>源ip，目的ip：各32位</p>
<p>选项字段：1~40B，很少被使用</p>
<p>填充：补齐32位</p>
<h4 id="mtu"><a href="#mtu" class="headerlink" title="mtu"></a>mtu</h4><p>分片与重组，分片过程：</p>
<p>若原ip分组总长度为L，且待转发链路的MTU为M，若L&gt;M，且DF=0，则可以/需要分片；</p>
<p>分片时，每个分片的表示复制原ip分组的标识。除了最后一片，其余均分为MTU允许的最大分片。</p>
<p>由于片偏移的单位，因此最大可封装数据应该是8的倍数，因此最大可封装的数据为$n=\lfloor(m-20)/8\rfloor*8$，需要的总片数$N=\lceil (L-20)/n\rceil$</p>
<p>每片的片偏移字段取值为，$F_i=\frac{d}{8}(i-1)$</p>
<p>每片的总长度字段：<img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220907145521762.png" alt="image-20220907145521762"></p>
<h4 id="ip编址"><a href="#ip编址" class="headerlink" title="ip编址"></a>ip编址</h4><p>ipv4，32bit；ip地址与每个接口关联</p>
<p>如何为接口分配ip地址？</p>
<p>ip地址=网络号+主机号，ip子网具有相同网络号的设备接口，不跨越路由器可以彼此物理联通的接口。</p>
<h4 id="CIDR"><a href="#CIDR" class="headerlink" title="CIDR"></a>CIDR</h4><p>消除了传统的A类、B类、C类地址界限</p>
<p>融合子网地址和子网掩码，方便子网划分；无类地址：a.b.c.d/x，x为前缀长度</p>
<p>提高了ipv4地址空间分配效率，提高路由效率，构造超网。</p>
<p>路由聚合：</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220907193009340.png" alt="image-20220907193009340"></p>
<h4 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h4><p>在应用层实现，使用广播的方式</p>
<p>从服务器动态获取：ip协议、子网掩码、默认网关地址、DNS服务器名称与ip地址</p>
<p>首先，主机广播DHCP discover，服务器利用DHCP offer进行响应。</p>
<p>主机请求ip地址：DHCP request，DHCP服务器分配ip地址 DHCP ack</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220907233338677.png" alt="image-20220907233338677"></p>
<h4 id="NAT"><a href="#NAT" class="headerlink" title="NAT"></a>NAT</h4><p>只需向isp申请一个ip地址，本地网络设备的ip地址变更无需通告外界网络；</p>
<p>变更isp时，无需修改内部网络设备ip地址；内部设备对外界不可见。</p>
<p>16bit端口号字段，可以同时支持60000多并行连接。</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220907234402588.png" alt="image-20220907234402588"></p>
<h2 id="icmp"><a href="#icmp" class="headerlink" title="icmp"></a>icmp</h2><p>差错报告，网络探寻。</p>
<h3 id="差错报告报文"><a href="#差错报告报文" class="headerlink" title="差错报告报文"></a>差错报告报文</h3><p>目的不可达，源抑制，超时/超期，参数问题，重定向</p>
<h3 id="网络探寻报文"><a href="#网络探寻报文" class="headerlink" title="网络探寻报文"></a>网络探寻报文</h3><p>echo，reply</p>
<p>时间戳请求与应答报文</p>
<h2 id="ipv6"><a href="#ipv6" class="headerlink" title="ipv6"></a>ipv6</h2><p>固定基本首部为40字节，不允许分片</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220908001617913.png" alt="image-20220908001617913"></p>
<p>移除了校验和，允许选项但是从基本首部一处。</p>
<p>ipv6-&gt;ipv4：隧道，将ipv6包放在ipv4的数据段</p>
<h3 id="路由算法"><a href="#路由算法" class="headerlink" title="路由算法"></a>路由算法</h3><h4 id="链路状态路由算法"><a href="#链路状态路由算法" class="headerlink" title="链路状态路由算法"></a>链路状态路由算法</h4><p>dijkstra，O(n^2)，更高效的实现O(nlg n)</p>
<p>存在震荡可能。</p>
<h4 id="距离向量路由算法"><a href="#距离向量路由算法" class="headerlink" title="距离向量路由算法"></a>距离向量路由算法</h4><p>每个节点不定时地将自身的$D_v$发送给邻居，当接收到邻居的$D_v$时，更新其自身的距离向量估计。</p>
<p>异步迭代，局部链路的费用改变，来自邻居的$D_v$更新。</p>
<p>分布式，每个节点只当$D_v$改变时才通告给邻居，因此是分布式的。</p>
<h5 id="存在无限计数问题"><a href="#存在无限计数问题" class="headerlink" title="存在无限计数问题"></a>存在无限计数问题</h5><p>可以采用毒性逆转，或者定义最大度量</p>
<h4 id="层次路由"><a href="#层次路由" class="headerlink" title="层次路由"></a>层次路由</h4><p>聚合路由器为一个区域：自治系统（AS）</p>
<p>同一AS内的路由器运行相同的路由算法（intra-AS)</p>
<p>AS之间，建立网关路由器，位于AS边缘，连接其他AS的网关路由器</p>
<h2 id="AS内协议"><a href="#AS内协议" class="headerlink" title="AS内协议"></a>AS内协议</h2><h3 id="RIP协议-ROUTING-INFORMATION-PROTOCOL"><a href="#RIP协议-ROUTING-INFORMATION-PROTOCOL" class="headerlink" title="RIP协议 ROUTING INFORMATION PROTOCOL"></a>RIP协议 ROUTING INFORMATION PROTOCOL</h3><p>距离向量路由算法。距离的度量采用跳步数，且最大度量为15.</p>
<p>每个30s，邻居之间交换一次DV，称为通告；最多25个目的子网。</p>
<p>如果180s没有收到通告，另据/链路失效</p>
<h3 id="OSPF-open-shortest-path-first"><a href="#OSPF-open-shortest-path-first" class="headerlink" title="OSPF open shortest path first"></a>OSPF open shortest path first</h3><p>链路状态路由算法，在整个AS范围洪泛。</p>
<p>优点：安全，可以被认证；允许使用多条相同费用的路径。集成单播路由与多播路由。</p>
<h2 id="AS间协议"><a href="#AS间协议" class="headerlink" title="AS间协议"></a>AS间协议</h2><h3 id="BGP协议"><a href="#BGP协议" class="headerlink" title="BGP协议"></a>BGP协议</h3><p>bgp会话：两个路由器交换bgp报文。open ，update（通告新路径）、keepalive，保活连接，notification，报告先前报文的差错，也可用于关闭连接。</p>
<p>通告去往不同目的的前缀的路径，基于半永久的tcp连接。</p>
<p>eBGP外部会话，iBGP内部会话。需要增加属性：AS-PATH，NEXT-HOP</p>
<p>路由器可能获知到达某目的AS的多条路由，策略决策；最短AS-PATH路径，最近NEXT-HOP</p>
<h2 id="数据链路层-1"><a href="#数据链路层-1" class="headerlink" title="数据链路层"></a>数据链路层</h2><p>组帧：封装数据报构成数据帧，加首部和尾部，帧同步</p>
<p>链路接入：如果是共享介质，需要解决信道接入</p>
<p>可靠交付：无线链路需要可靠交付</p>
<p>流量控制，差错检测，差错纠正</p>
<h3 id="差错编码"><a href="#差错编码" class="headerlink" title="差错编码"></a>差错编码</h3><p>检错码和纠错码，如果hamming距离$d_s=r+1$，可以检测r位的差错。  </p>
<p>如果编码集的hamming距离$d_s=2r+1$，则可以纠正r位的差错</p>
<h4 id="奇偶校验位"><a href="#奇偶校验位" class="headerlink" title="奇偶校验位"></a>奇偶校验位</h4><h4 id="checksum-1"><a href="#checksum-1" class="headerlink" title="checksum"></a>checksum</h4><h4 id="CRC"><a href="#CRC" class="headerlink" title="CRC"></a>CRC</h4><h2 id="mac地址"><a href="#mac地址" class="headerlink" title="mac地址"></a>mac地址</h2><p>两类链路：</p>
<p>点对点链路，拨号接入的ppp，以太网交换机与主机之间的点对点链路</p>
<p>广播链路：共享介质，早期的总线以太网，HFC的上行链路，wifi无线局域网</p>
<h4 id="单一共享广播信道"><a href="#单一共享广播信道" class="headerlink" title="单一共享广播信道"></a>单一共享广播信道</h4><p>两个或者两个以上节点同时传输：干扰</p>
<h4 id="多路访问控制协议"><a href="#多路访问控制协议" class="headerlink" title="多路访问控制协议"></a>多路访问控制协议</h4><p>三大类</p>
<h5 id="信道划分MAC协议"><a href="#信道划分MAC协议" class="headerlink" title="信道划分MAC协议"></a>信道划分MAC协议</h5><p>多路复用技术，TDMA,FDMA,CDMA,WDMA</p>
<h5 id="随机访问MAC协议"><a href="#随机访问MAC协议" class="headerlink" title="随机访问MAC协议"></a>随机访问MAC协议</h5><p>信道不划分，允许冲突，采用冲突恢复机制</p>
<h6 id="时隙ALOHA协议"><a href="#时隙ALOHA协议" class="headerlink" title="时隙ALOHA协议"></a>时隙ALOHA协议</h6><p>所有帧大小相同，时间被划分为等长的时隙，节点只能在时隙开始时刻发送帧。节点间始终同步。</p>
<p>如果有两个或两个以上节点同一时隙发送，则存在冲突；如果发生冲突，在下一个时隙以概率p重传，直至成功。</p>
<p>缺点，冲突时浪费时隙。且需要时间同步</p>
<p>效率低，最大效率时0.37</p>
<h6 id="ALOHA"><a href="#ALOHA" class="headerlink" title="ALOHA"></a>ALOHA</h6><p>当有新的帧生成，立即发送。冲突的可能性增大。效率更低。</p>
<h6 id="CSMA"><a href="#CSMA" class="headerlink" title="CSMA"></a>CSMA</h6><p>发送帧之前，监听信道；如果信道忙，</p>
<p>1-坚持CSMA</p>
<p>尽管这样冲突可能仍然发生：信号传播延迟；如果继续发送冲突帧，浪费信道资源</p>
<h6 id="CSMA-CD"><a href="#CSMA-CD" class="headerlink" title="CSMA/CD"></a>CSMA/CD</h6><p>带冲突检测的，短时间内可以检测到冲突；冲突后传输终止，减少信道浪费。</p>
<p>冲突检测：边发边听，不发不听。</p>
<p>有线容易实现，测量信号强度，比较发射信号和接收信号；无线很难实现</p>
<h5 id="轮转MAC协议"><a href="#轮转MAC协议" class="headerlink" title="轮转MAC协议"></a>轮转MAC协议</h5><p>节点轮流使用信道</p>
<p>轮询：主节点轮流邀请从属节点发送数据。具有轮询开销，等待延迟，单点故障。</p>
<p>令牌传递：令牌从一个节点传递到下一个节点。令牌开销，等待延迟，单点故障</p>
<h2 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h2><h3 id="MAC地址-物理地址"><a href="#MAC地址-物理地址" class="headerlink" title="MAC地址 物理地址"></a>MAC地址 物理地址</h3><p>用于区别帧从哪个接口发出，到达哪个物理相连的其他接口</p>
<p>48位MAC地址，固化在网卡的ROM中，有时也可以软件设置。</p>
<p>mac地址：身份证号；ip地址：邮政地址</p>
<p>mac地址是平面地址，可以携带，从一个LAN到另一个LAN；</p>
<p>ip地址是层次结构，依赖于节点连接到哪个子网</p>
<h3 id="arp"><a href="#arp" class="headerlink" title="arp"></a>arp</h3><p>ARP表：<img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220909003630768.png" alt="image-20220909003630768"></p>
<p>若不在arp表中，广播查询分组，FF-FF-FF-FF-FF-FF，随后利用单播帧应答。</p>
<h2 id="以太网"><a href="#以太网" class="headerlink" title="以太网"></a>以太网</h2><p>不可靠，无连接服务；MAC协议，采用二进制指数退避算法的CSMA/CDC协议</p>
<p>第m次连续冲突后，$n=Min(m,10)$，随机选取${0,1,2,…,2^n-1}$中随机选数，等待512*该数的传输延迟时间。</p>
<p>如果连续冲突次数越多，平均等待时间越长。</p>
<h4 id="以太网帧结构"><a href="#以太网帧结构" class="headerlink" title="以太网帧结构"></a>以太网帧结构</h4><p>前导码8B，七个字节的10101010，第八个字节为10101011用于时钟同步。</p>
<p>目的mac地址、源mac地址，各6B</p>
<p>type：封装的是哪种高层协议的而分组；</p>
<p>数据：指上层协议载荷。CRC:循环冗余校验码</p>
<p>不同的以太网</p>
<h3 id="交换机"><a href="#交换机" class="headerlink" title="交换机"></a>交换机</h3><p>链路层设备，存储转发以太网帧，检测到达帧的目的MAC地址，选择性向一个或多个输出链路转发帧。透明</p>
<p>交换机有交换表，存放(主机的MAC地址，到达主机的接口，时间戳)</p>
<p>若不在交换表中，采取洪泛。</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220909110416525.png" alt="image-20220909110416525"></p>
<h3 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h3><h4 id="基于端口的VLAN"><a href="#基于端口的VLAN" class="headerlink" title="基于端口的VLAN"></a>基于端口的VLAN</h4><p>流量隔离，动态成员，使用路由器，完成VLAN转发。</p>
<p>去往端口1-8的帧指到达端口1-8</p>
<h3 id="PPP"><a href="#PPP" class="headerlink" title="PPP"></a>PPP</h3><p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220909112513873.png" alt="image-20220909112513873"></p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220909112928820.png" alt="image-20220909112928820"></p>
<h2 id="WIFI"><a href="#WIFI" class="headerlink" title="WIFI"></a>WIFI</h2><p>802.11b：</p>
<p>将频谱划分为11个不同频率的信道，每个accesspoint选择一个频率，存在干扰的可能。</p>
<p>主机必须与某个AP关联。扫描信道，监听包含ap名称和mac地址的信标帧。选择一个ap关联。</p>
<p>被动扫描和主动扫描</p>
<h3 id="多路访问控制"><a href="#多路访问控制" class="headerlink" title="多路访问控制"></a>多路访问控制</h3><p>CSMA，但不能像CSMA/CD边发送边检测从冲突，无线信道很难实现。</p>
<p>CSMA/CA</p>
<p>sender：检测信道空闲了DIFS时间，发送整个帧；如果信道忙，随机退避计时。</p>
<p>receiver：SIFS</p>
<p>允许预约信道，发送端，利用CSMA向BS发送一个很短的RTS帧，仍然可能发生冲突。</p>
<p>随后BS广播一个CTS帧作为响应，消除隐藏站的影响。接收到数据后，广播ACK</p>
<p><img src="C:\Users\23960\AppData\Roaming\Typora\typora-user-images\image-20220909133949083.png" alt="image-20220909133949083"></p>
]]></content>
      <categories>
        <category>计算机网络</category>
      </categories>
  </entry>
</search>
